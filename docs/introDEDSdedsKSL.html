<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4.4 Modeling DEDS in the KSL | Simulation Modeling using the Kotlin Simulation Library (KSL)</title>
  <meta name="description" content="A book that illustrates the basics of using the KSL. The output format for this book is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="4.4 Modeling DEDS in the KSL | Simulation Modeling using the Kotlin Simulation Library (KSL)" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="A book that illustrates the basics of using the KSL. The output format for this book is bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4.4 Modeling DEDS in the KSL | Simulation Modeling using the Kotlin Simulation Library (KSL)" />
  
  <meta name="twitter:description" content="A book that illustrates the basics of using the KSL. The output format for this book is bookdown::gitbook." />
  

<meta name="author" content="Manuel D. Rossetti" />


<meta name="date" content="2024-07-30" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="QHandExample.html"/>
<link rel="next" href="enhancing-the-drive-through-pharmacy-model.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Simulation Modeling using the Kotlin Simulation Library (KSL)</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="release-history.html"><a href="release-history.html"><i class="fa fa-check"></i>Release History</a></li>
<li class="chapter" data-level="" data-path="ksl-project-page.html"><a href="ksl-project-page.html"><i class="fa fa-check"></i>KSL Project Page</a></li>
<li class="chapter" data-level="" data-path="book-support-files.html"><a href="book-support-files.html"><i class="fa fa-check"></i>Book Support Files</a></li>
<li class="chapter" data-level="" data-path="acknowledgments.html"><a href="acknowledgments.html"><i class="fa fa-check"></i>Acknowledgments</a></li>
<li class="chapter" data-level="" data-path="intended-audience.html"><a href="intended-audience.html"><i class="fa fa-check"></i>Intended Audience</a></li>
<li class="chapter" data-level="" data-path="organization-of-the-book.html"><a href="organization-of-the-book.html"><i class="fa fa-check"></i>Organization of the Book</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html"><i class="fa fa-check"></i>About the Author</a></li>
<li class="chapter" data-level="1" data-path="ch1.html"><a href="ch1.html"><i class="fa fa-check"></i><b>1</b> Simulation Modeling</a>
<ul>
<li class="chapter" data-level="1.1" data-path="simulation-modeling.html"><a href="simulation-modeling.html"><i class="fa fa-check"></i><b>1.1</b> Simulation Modeling</a></li>
<li class="chapter" data-level="1.2" data-path="why-simulate.html"><a href="why-simulate.html"><i class="fa fa-check"></i><b>1.2</b> Why Simulate?</a></li>
<li class="chapter" data-level="1.3" data-path="types-of-systems-and-simulation-models.html"><a href="types-of-systems-and-simulation-models.html"><i class="fa fa-check"></i><b>1.3</b> Types of Systems and Simulation Models</a></li>
<li class="chapter" data-level="1.4" data-path="simulation-descriptive-or-prescriptive-modeling.html"><a href="simulation-descriptive-or-prescriptive-modeling.html"><i class="fa fa-check"></i><b>1.4</b> Simulation: Descriptive or Prescriptive Modeling?</a></li>
<li class="chapter" data-level="1.5" data-path="randomness-in-simulation.html"><a href="randomness-in-simulation.html"><i class="fa fa-check"></i><b>1.5</b> Randomness in Simulation</a></li>
<li class="chapter" data-level="1.6" data-path="simulation-languages.html"><a href="simulation-languages.html"><i class="fa fa-check"></i><b>1.6</b> Simulation Languages</a></li>
<li class="chapter" data-level="1.7" data-path="ch1secsimMeth.html"><a href="ch1secsimMeth.html"><i class="fa fa-check"></i><b>1.7</b> Simulation Methodology</a></li>
<li class="chapter" data-level="1.8" data-path="overview-of-the-kotlin-simulation-library.html"><a href="overview-of-the-kotlin-simulation-library.html"><i class="fa fa-check"></i><b>1.8</b> Overview of the Kotlin Simulation Library</a></li>
<li class="chapter" data-level="1.9" data-path="exercises.html"><a href="exercises.html"><i class="fa fa-check"></i><b>1.9</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="ch2rng.html"><a href="ch2rng.html"><i class="fa fa-check"></i><b>2</b> Modeling Randomness</a>
<ul>
<li class="chapter" data-level="2.1" data-path="ch2generator.html"><a href="ch2generator.html"><i class="fa fa-check"></i><b>2.1</b> Random Number Generator</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="ch2generator.html"><a href="ch2generator.html#ch2randompkg"><i class="fa fa-check"></i><b>2.1.1</b> Random Package</a></li>
<li class="chapter" data-level="2.1.2" data-path="ch2generator.html"><a href="ch2generator.html#ch2creatingStreams"><i class="fa fa-check"></i><b>2.1.2</b> Creating and Using Streams</a></li>
<li class="chapter" data-level="2.1.3" data-path="ch2generator.html"><a href="ch2generator.html#ch2crn"><i class="fa fa-check"></i><b>2.1.3</b> Common Random Numbers</a></li>
<li class="chapter" data-level="2.1.4" data-path="ch2generator.html"><a href="ch2generator.html#ch2antitheticStreams"><i class="fa fa-check"></i><b>2.1.4</b> Creating and Using Antithetic Streams</a></li>
<li class="chapter" data-level="2.1.5" data-path="ch2generator.html"><a href="ch2generator.html#ch2rnFAQ"><i class="fa fa-check"></i><b>2.1.5</b> Frequently Asked Questions about Random Numbers</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="rvg.html"><a href="rvg.html"><i class="fa fa-check"></i><b>2.2</b> Random Variate Generation</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="rvg.html"><a href="rvg.html#basic-random-variate-generation"><i class="fa fa-check"></i><b>2.2.1</b> Basic Random Variate Generation</a></li>
<li class="chapter" data-level="2.2.2" data-path="rvg.html"><a href="rvg.html#rvg_dists"><i class="fa fa-check"></i><b>2.2.2</b> Continuous and Discrete Random Variables</a></li>
<li class="chapter" data-level="2.2.3" data-path="rvg.html"><a href="rvg.html#rvguse"><i class="fa fa-check"></i><b>2.2.3</b> Creating and Using Random Variables</a></li>
<li class="chapter" data-level="2.2.4" data-path="rvg.html"><a href="rvg.html#functions-of-random-variables"><i class="fa fa-check"></i><b>2.2.4</b> Functions of Random Variables</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="probModels.html"><a href="probModels.html"><i class="fa fa-check"></i><b>2.3</b> Probability Distribution Models</a></li>
<li class="chapter" data-level="2.4" data-path="distFitting.html"><a href="distFitting.html"><i class="fa fa-check"></i><b>2.4</b> Distribution Fitting Using the KSL</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="distFitting.html"><a href="distFitting.html#estimating-distribution-parameters"><i class="fa fa-check"></i><b>2.4.1</b> Estimating Distribution Parameters</a></li>
<li class="chapter" data-level="2.4.2" data-path="distFitting.html"><a href="distFitting.html#continuous-distribution-recommendation-framework"><i class="fa fa-check"></i><b>2.4.2</b> Continuous Distribution Recommendation Framework</a></li>
<li class="chapter" data-level="2.4.3" data-path="distFitting.html"><a href="distFitting.html#discrete-distribution-framework"><i class="fa fa-check"></i><b>2.4.3</b> Discrete Distribution Framework</a></li>
<li class="chapter" data-level="2.4.4" data-path="distFitting.html"><a href="distFitting.html#pdfmexamples"><i class="fa fa-check"></i><b>2.4.4</b> Illustrative Examples from Appendix @ref(appidm)</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="summary.html"><a href="summary.html"><i class="fa fa-check"></i><b>2.5</b> Summary</a></li>
<li class="chapter" data-level="2.6" data-path="exercises-1.html"><a href="exercises-1.html"><i class="fa fa-check"></i><b>2.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="mcm.html"><a href="mcm.html"><i class="fa fa-check"></i><b>3</b> Monte Carlo Methods</a>
<ul>
<li class="chapter" data-level="3.1" data-path="kslStatistics.html"><a href="kslStatistics.html"><i class="fa fa-check"></i><b>3.1</b> Collecting Statistics</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="kslStatistics.html"><a href="kslStatistics.html#creating-and-using-a-statistic"><i class="fa fa-check"></i><b>3.1.1</b> Creating and Using a Statistic</a></li>
<li class="chapter" data-level="3.1.2" data-path="kslStatistics.html"><a href="kslStatistics.html#histFreq"><i class="fa fa-check"></i><b>3.1.2</b> Histograms and Frequencies</a></li>
<li class="chapter" data-level="3.1.3" data-path="kslStatistics.html"><a href="kslStatistics.html#ch3batchStats"><i class="fa fa-check"></i><b>3.1.3</b> Batch Statistics</a></li>
<li class="chapter" data-level="3.1.4" data-path="kslStatistics.html"><a href="kslStatistics.html#ch3StatSummary"><i class="fa fa-check"></i><b>3.1.4</b> Statistics Summary</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="ssMC.html"><a href="ssMC.html"><i class="fa fa-check"></i><b>3.2</b> Simple Monte Carlo Integration</a></li>
<li class="chapter" data-level="3.3" data-path="ch3StatReview.html"><a href="ch3StatReview.html"><i class="fa fa-check"></i><b>3.3</b> Review of Statistical Concepts</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="ch3StatReview.html"><a href="ch3StatReview.html#point-estimates-and-confidence-intervals"><i class="fa fa-check"></i><b>3.3.1</b> Point Estimates and Confidence Intervals</a></li>
<li class="chapter" data-level="3.3.2" data-path="ch3StatReview.html"><a href="ch3StatReview.html#ch3SampleSize"><i class="fa fa-check"></i><b>3.3.2</b> Sample Size Determination</a></li>
<li class="chapter" data-level="3.3.3" data-path="ch3StatReview.html"><a href="ch3StatReview.html#determining-the-sample-size-for-a-monte-carlo-simulation-experiment"><i class="fa fa-check"></i><b>3.3.3</b> Determining the Sample Size for a Monte Carlo Simulation Experiment</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="craps.html"><a href="craps.html"><i class="fa fa-check"></i><b>3.4</b> Simulating the Game of Craps</a></li>
<li class="chapter" data-level="3.5" data-path="the-news-vendor-problem.html"><a href="the-news-vendor-problem.html"><i class="fa fa-check"></i><b>3.5</b> The News Vendor Problem</a></li>
<li class="chapter" data-level="3.6" data-path="ch3InsProcess.html"><a href="ch3InsProcess.html"><i class="fa fa-check"></i><b>3.6</b> A Simple Inspection Process</a></li>
<li class="chapter" data-level="3.7" data-path="ch3SAN.html"><a href="ch3SAN.html"><i class="fa fa-check"></i><b>3.7</b> Stochastic Activity Networks</a></li>
<li class="chapter" data-level="3.8" data-path="mcmExperiments.html"><a href="mcmExperiments.html"><i class="fa fa-check"></i><b>3.8</b> Monte-Carlo Experiments</a></li>
<li class="chapter" data-level="3.9" data-path="summary-1.html"><a href="summary-1.html"><i class="fa fa-check"></i><b>3.9</b> Summary</a></li>
<li class="chapter" data-level="3.10" data-path="exercises-2.html"><a href="exercises-2.html"><i class="fa fa-check"></i><b>3.10</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="introDEDS.html"><a href="introDEDS.html"><i class="fa fa-check"></i><b>4</b> Introduction to Discrete Event Modeling</a>
<ul>
<li class="chapter" data-level="4.1" data-path="introDEDSdeds.html"><a href="introDEDSdeds.html"><i class="fa fa-check"></i><b>4.1</b> Discrete-Event Dynamic Systems</a></li>
<li class="chapter" data-level="4.2" data-path="HowDEDSClockWorks.html"><a href="HowDEDSClockWorks.html"><i class="fa fa-check"></i><b>4.2</b> How the Discrete-Event Clock Works</a></li>
<li class="chapter" data-level="4.3" data-path="QHandExample.html"><a href="QHandExample.html"><i class="fa fa-check"></i><b>4.3</b> Simulating a Queueing System By Hand</a></li>
<li class="chapter" data-level="4.4" data-path="introDEDSdedsKSL.html"><a href="introDEDSdedsKSL.html"><i class="fa fa-check"></i><b>4.4</b> Modeling DEDS in the KSL</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="introDEDSdedsKSL.html"><a href="introDEDSdedsKSL.html#event-scheduling"><i class="fa fa-check"></i><b>4.4.1</b> Event Scheduling</a></li>
<li class="chapter" data-level="4.4.2" data-path="introDEDSdedsKSL.html"><a href="introDEDSdedsKSL.html#introDEDSschedExamples"><i class="fa fa-check"></i><b>4.4.2</b> Simple Event Scheduling Examples</a></li>
<li class="chapter" data-level="4.4.3" data-path="introDEDSdedsKSL.html"><a href="introDEDSdedsKSL.html#introDEDSUpDown"><i class="fa fa-check"></i><b>4.4.3</b> Up and Down Component Example</a></li>
<li class="chapter" data-level="4.4.4" data-path="introDEDSdedsKSL.html"><a href="introDEDSdedsKSL.html#introDEDSPharmacy"><i class="fa fa-check"></i><b>4.4.4</b> Modeling a Simple Queueing System</a></li>
<li class="chapter" data-level="4.4.5" data-path="introDEDSdedsKSL.html"><a href="introDEDSdedsKSL.html#more-details-about-the-pharmacy-model-implementation"><i class="fa fa-check"></i><b>4.4.5</b> More Details About the Pharmacy Model Implementation</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="enhancing-the-drive-through-pharmacy-model.html"><a href="enhancing-the-drive-through-pharmacy-model.html"><i class="fa fa-check"></i><b>4.5</b> Enhancing the Drive Through Pharmacy Model</a></li>
<li class="chapter" data-level="4.6" data-path="DTPExpanded.html"><a href="DTPExpanded.html"><i class="fa fa-check"></i><b>4.6</b> More Drive Through Fun</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="DTPExpanded.html"><a href="DTPExpanded.html#modeling-a-simple-resource"><i class="fa fa-check"></i><b>4.6.1</b> Modeling a Simple Resource</a></li>
<li class="chapter" data-level="4.6.2" data-path="DTPExpanded.html"><a href="DTPExpanded.html#modeling-a-resource-with-a-waiting-line"><i class="fa fa-check"></i><b>4.6.2</b> Modeling a Resource with a Waiting Line</a></li>
<li class="chapter" data-level="4.6.3" data-path="DTPExpanded.html"><a href="DTPExpanded.html#modeling-the-tandem-queue-of-example-refexmexch4tandemq"><i class="fa fa-check"></i><b>4.6.3</b> Modeling the Tandem Queue of Example @ref(exm:exCh4TandemQ)</a></li>
<li class="chapter" data-level="4.6.4" data-path="DTPExpanded.html"><a href="DTPExpanded.html#modeling-with-the-station-package"><i class="fa fa-check"></i><b>4.6.4</b> Modeling with the Station Package</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="introDEDSSummary.html"><a href="introDEDSSummary.html"><i class="fa fa-check"></i><b>4.7</b> Summary</a></li>
<li class="chapter" data-level="4.8" data-path="exercises-3.html"><a href="exercises-3.html"><i class="fa fa-check"></i><b>4.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="simoa.html"><a href="simoa.html"><i class="fa fa-check"></i><b>5</b> Analyzing and Accessing Simulation Output</a>
<ul>
<li class="chapter" data-level="5.1" data-path="simoadatatypes.html"><a href="simoadatatypes.html"><i class="fa fa-check"></i><b>5.1</b> Types of Statistical Variables</a></li>
<li class="chapter" data-level="5.2" data-path="simoasimtypes.html"><a href="simoasimtypes.html"><i class="fa fa-check"></i><b>5.2</b> Types of Simulation With Respect To Output Analysis</a></li>
<li class="chapter" data-level="5.3" data-path="simoafinhorizon.html"><a href="simoafinhorizon.html"><i class="fa fa-check"></i><b>5.3</b> Analysis of Finite Horizon Simulations</a></li>
<li class="chapter" data-level="5.4" data-path="simoafinhorizonex.html"><a href="simoafinhorizonex.html"><i class="fa fa-check"></i><b>5.4</b> Capturing Output for a Simple Finite Horizon Simulation</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="simoafinhorizonex.html"><a href="simoafinhorizonex.html#simoaCapture"><i class="fa fa-check"></i><b>5.4.1</b> KSL Functionality for Capturing Statistical Results</a></li>
<li class="chapter" data-level="5.4.2" data-path="simoafinhorizonex.html"><a href="simoafinhorizonex.html#additional-remarks"><i class="fa fa-check"></i><b>5.4.2</b> Additional Remarks</a></li>
<li class="chapter" data-level="5.4.3" data-path="simoafinhorizonex.html"><a href="simoafinhorizonex.html#querying-the-ksl-database"><i class="fa fa-check"></i><b>5.4.3</b> Querying the KSL Database</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="simoaseqsampling.html"><a href="simoaseqsampling.html"><i class="fa fa-check"></i><b>5.5</b> Sequential Sampling for Finite Horizon Simulations</a></li>
<li class="chapter" data-level="5.6" data-path="simoainfhorizon.html"><a href="simoainfhorizon.html"><i class="fa fa-check"></i><b>5.6</b> Analysis of Infinite Horizon Simulations</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="simoainfhorizon.html"><a href="simoainfhorizon.html#simoainfhorizoninitialbias"><i class="fa fa-check"></i><b>5.6.1</b> Assessing the Effect of Initial Conditions</a></li>
<li class="chapter" data-level="5.6.2" data-path="simoainfhorizon.html"><a href="simoainfhorizon.html#simoainfhorizonrepDeletion"><i class="fa fa-check"></i><b>5.6.2</b> Performing the Method of Replication-Deletion</a></li>
<li class="chapter" data-level="5.6.3" data-path="simoainfhorizon.html"><a href="simoainfhorizon.html#simoainfhorizonbatchmeans"><i class="fa fa-check"></i><b>5.6.3</b> The Method of Batch Means</a></li>
<li class="chapter" data-level="5.6.4" data-path="simoainfhorizon.html"><a href="simoainfhorizon.html#simoainfhorizonjslbatching"><i class="fa fa-check"></i><b>5.6.4</b> Performing the Method of Batch Means</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="simoacomparingSystems.html"><a href="simoacomparingSystems.html"><i class="fa fa-check"></i><b>5.7</b> Comparing System Configurations</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="simoacomparingSystems.html"><a href="simoacomparingSystems.html#simoacomparingSystems:two"><i class="fa fa-check"></i><b>5.7.1</b> Comparing Two Systems</a></li>
<li class="chapter" data-level="5.7.2" data-path="simoacomparingSystems.html"><a href="simoacomparingSystems.html#simoacomparingSystemsMCB"><i class="fa fa-check"></i><b>5.7.2</b> Concepts for Comparing Systems</a></li>
<li class="chapter" data-level="5.7.3" data-path="simoacomparingSystems.html"><a href="simoacomparingSystems.html#multiple-comparison-with-the-best-procedures-mcb"><i class="fa fa-check"></i><b>5.7.3</b> Multiple Comparison with the Best Procedures (MCB)</a></li>
<li class="chapter" data-level="5.7.4" data-path="simoacomparingSystems.html"><a href="simoacomparingSystems.html#ch5Screening"><i class="fa fa-check"></i><b>5.7.4</b> Screening Procedures</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="ch5Scenarios.html"><a href="ch5Scenarios.html"><i class="fa fa-check"></i><b>5.8</b> Simulating Many Scenarios</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="ch5Scenarios.html"><a href="ch5Scenarios.html#controlAntns"><i class="fa fa-check"></i><b>5.8.1</b> Control Annotations</a></li>
<li class="chapter" data-level="5.8.2" data-path="ch5Scenarios.html"><a href="ch5Scenarios.html#rvParameters"><i class="fa fa-check"></i><b>5.8.2</b> Random Variable Parameters</a></li>
<li class="chapter" data-level="5.8.3" data-path="ch5Scenarios.html"><a href="ch5Scenarios.html#kslScenarios"><i class="fa fa-check"></i><b>5.8.3</b> Setting Up and Running Multiple Scenarios</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="simoasummary.html"><a href="simoasummary.html"><i class="fa fa-check"></i><b>5.9</b> Summary</a></li>
<li class="chapter" data-level="5.10" data-path="exercises-4.html"><a href="exercises-4.html"><i class="fa fa-check"></i><b>5.10</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="processview.html"><a href="processview.html"><i class="fa fa-check"></i><b>6</b> Process View Modeling Using the KSL</a>
<ul>
<li class="chapter" data-level="6.1" data-path="ch6Entities.html"><a href="ch6Entities.html"><i class="fa fa-check"></i><b>6.1</b> What are Entities?</a></li>
<li class="chapter" data-level="6.2" data-path="pvIntro.html"><a href="pvIntro.html"><i class="fa fa-check"></i><b>6.2</b> The Process View</a></li>
<li class="chapter" data-level="6.3" data-path="understanding-ksl-processes-and-entities.html"><a href="understanding-ksl-processes-and-entities.html"><i class="fa fa-check"></i><b>6.3</b> Understanding KSL Processes and Entities</a></li>
<li class="chapter" data-level="6.4" data-path="examples-of-process-modeling.html"><a href="examples-of-process-modeling.html"><i class="fa fa-check"></i><b>6.4</b> Examples of Process Modeling</a></li>
<li class="chapter" data-level="6.5" data-path="modeling-a-stem-career-mixer.html"><a href="modeling-a-stem-career-mixer.html"><i class="fa fa-check"></i><b>6.5</b> Modeling a STEM Career Mixer</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="modeling-a-stem-career-mixer.html"><a href="modeling-a-stem-career-mixer.html#conceptualizing-the-system"><i class="fa fa-check"></i><b>6.5.1</b> Conceptualizing the System</a></li>
<li class="chapter" data-level="6.5.2" data-path="modeling-a-stem-career-mixer.html"><a href="modeling-a-stem-career-mixer.html#implementing-the-stem-mixer-model"><i class="fa fa-check"></i><b>6.5.2</b> Implementing the STEM Mixer Model</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="the-tie-dye-t-shirt-model.html"><a href="the-tie-dye-t-shirt-model.html"><i class="fa fa-check"></i><b>6.6</b> The Tie-Dye T-Shirt Model</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="the-tie-dye-t-shirt-model.html"><a href="the-tie-dye-t-shirt-model.html#ch4:TieDyeTShirtsSub1"><i class="fa fa-check"></i><b>6.6.1</b> Implementing the Tie-Dye T-Shirt Model</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="summary-2.html"><a href="summary-2.html"><i class="fa fa-check"></i><b>6.7</b> Summary</a></li>
<li class="chapter" data-level="6.8" data-path="exercises-5.html"><a href="exercises-5.html"><i class="fa fa-check"></i><b>6.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="ch7AdvModeling.html"><a href="ch7AdvModeling.html"><i class="fa fa-check"></i><b>7</b> Advanced Event and Process View Modeling</a>
<ul>
<li class="chapter" data-level="7.1" data-path="modeling-with-processes-and-resources.html"><a href="modeling-with-processes-and-resources.html"><i class="fa fa-check"></i><b>7.1</b> Modeling with Processes and Resources</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="modeling-with-processes-and-resources.html"><a href="modeling-with-processes-and-resources.html#modeling-space-with-resources"><i class="fa fa-check"></i><b>7.1.1</b> Modeling Space with Resources</a></li>
<li class="chapter" data-level="7.1.2" data-path="modeling-with-processes-and-resources.html"><a href="modeling-with-processes-and-resources.html#resource-pools"><i class="fa fa-check"></i><b>7.1.2</b> Resource Pools</a></li>
<li class="chapter" data-level="7.1.3" data-path="modeling-with-processes-and-resources.html"><a href="modeling-with-processes-and-resources.html#computer-test-and-repair-shop-example"><i class="fa fa-check"></i><b>7.1.3</b> Computer Test and Repair Shop Example</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="modeling-non-stationary-systems.html"><a href="modeling-non-stationary-systems.html"><i class="fa fa-check"></i><b>7.2</b> Modeling Non-Stationary Systems</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="modeling-non-stationary-systems.html"><a href="modeling-non-stationary-systems.html#ch7secNSPP"><i class="fa fa-check"></i><b>7.2.1</b> Non-Stationary Arrival Processes</a></li>
<li class="chapter" data-level="7.2.2" data-path="modeling-non-stationary-systems.html"><a href="modeling-non-stationary-systems.html#modeling-resources-under-non-stationary-conditions"><i class="fa fa-check"></i><b>7.2.2</b> Modeling Resources Under Non-Stationary Conditions</a></li>
<li class="chapter" data-level="7.2.3" data-path="modeling-non-stationary-systems.html"><a href="modeling-non-stationary-systems.html#enhancing-the-stem-career-mixer-model"><i class="fa fa-check"></i><b>7.2.3</b> Enhancing the STEM Career Mixer Model</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="examples-of-advanced-event-models.html"><a href="examples-of-advanced-event-models.html"><i class="fa fa-check"></i><b>7.3</b> Examples of Advanced Event Models</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="examples-of-advanced-event-models.html"><a href="examples-of-advanced-event-models.html#ch6s1sb4sub3"><i class="fa fa-check"></i><b>7.3.1</b> Modeling Balking and Reneging</a></li>
<li class="chapter" data-level="7.3.2" data-path="examples-of-advanced-event-models.html"><a href="examples-of-advanced-event-models.html#rqModel"><i class="fa fa-check"></i><b>7.3.2</b> Modeling a Reorder Point, Reorder Quantity Inventory Policy</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="summary-3.html"><a href="summary-3.html"><i class="fa fa-check"></i><b>7.4</b> Summary</a></li>
<li class="chapter" data-level="7.5" data-path="exercises-6.html"><a href="exercises-6.html"><i class="fa fa-check"></i><b>7.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="ch9AdvMC.html"><a href="ch9AdvMC.html"><i class="fa fa-check"></i><b>8</b> Advanced Monte Carlo Methods</a>
<ul>
<li class="chapter" data-level="8.1" data-path="ch9BootStrapping.html"><a href="ch9BootStrapping.html"><i class="fa fa-check"></i><b>8.1</b> Bootstrap Methods</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="ch9BootStrapping.html"><a href="ch9BootStrapping.html#bootstrapping-using-the-ksl"><i class="fa fa-check"></i><b>8.1.1</b> Bootstrapping Using the KSL</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="ch9VRTs.html"><a href="ch9VRTs.html"><i class="fa fa-check"></i><b>8.2</b> Variance Reduction Techniques</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="ch9VRTs.html"><a href="ch9VRTs.html#common-random-numbers-crn"><i class="fa fa-check"></i><b>8.2.1</b> Common Random Numbers (CRN)</a></li>
<li class="chapter" data-level="8.2.2" data-path="ch9VRTs.html"><a href="ch9VRTs.html#antithetic-variates-av"><i class="fa fa-check"></i><b>8.2.2</b> Antithetic Variates (AV)</a></li>
<li class="chapter" data-level="8.2.3" data-path="ch9VRTs.html"><a href="ch9VRTs.html#indirect-estimation"><i class="fa fa-check"></i><b>8.2.3</b> Indirect Estimation</a></li>
<li class="chapter" data-level="8.2.4" data-path="ch9VRTs.html"><a href="ch9VRTs.html#control-variates-cv"><i class="fa fa-check"></i><b>8.2.4</b> Control Variates (CV)</a></li>
<li class="chapter" data-level="8.2.5" data-path="ch9VRTs.html"><a href="ch9VRTs.html#stratified-and-post-stratified-sampling"><i class="fa fa-check"></i><b>8.2.5</b> Stratified and Post Stratified Sampling</a></li>
<li class="chapter" data-level="8.2.6" data-path="ch9VRTs.html"><a href="ch9VRTs.html#conditional-expectation-ce"><i class="fa fa-check"></i><b>8.2.6</b> Conditional Expectation (CE)</a></li>
<li class="chapter" data-level="8.2.7" data-path="ch9VRTs.html"><a href="ch9VRTs.html#importance-sampling-is"><i class="fa fa-check"></i><b>8.2.7</b> Importance Sampling (IS)</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="ch9GMVRVs.html"><a href="ch9GMVRVs.html"><i class="fa fa-check"></i><b>8.3</b> Generating Multi-Variate and Correlated Random Variates</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="ch9GMVRVs.html"><a href="ch9GMVRVs.html#generating-from-a-bivariate-normal-distribution"><i class="fa fa-check"></i><b>8.3.1</b> Generating from a Bivariate Normal Distribution</a></li>
<li class="chapter" data-level="8.3.2" data-path="ch9GMVRVs.html"><a href="ch9GMVRVs.html#copulas-and-multi-variate-generation-methods"><i class="fa fa-check"></i><b>8.3.2</b> Copulas and Multi-variate Generation Methods</a></li>
<li class="chapter" data-level="8.3.3" data-path="ch9GMVRVs.html"><a href="ch9GMVRVs.html#autocorrelated-generation"><i class="fa fa-check"></i><b>8.3.3</b> Autocorrelated Generation</a></li>
<li class="chapter" data-level="8.3.4" data-path="ch9GMVRVs.html"><a href="ch9GMVRVs.html#ch9MCMC"><i class="fa fa-check"></i><b>8.3.4</b> Introduction to Markov Chain Monte Carlo Methods</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="summary-4.html"><a href="summary-4.html"><i class="fa fa-check"></i><b>8.4</b> Summary</a></li>
<li class="chapter" data-level="8.5" data-path="exercises-7.html"><a href="exercises-7.html"><i class="fa fa-check"></i><b>8.5</b> Exercises</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="appRNRV.html"><a href="appRNRV.html"><i class="fa fa-check"></i><b>A</b> Generating Pseudo-Random Numbers and Random Variates</a>
<ul>
<li class="chapter" data-level="A.1" data-path="appRNRVPRN.html"><a href="appRNRVPRN.html"><i class="fa fa-check"></i><b>A.1</b> Pseudo Random Numbers</a>
<ul>
<li class="chapter" data-level="A.1.1" data-path="appRNRVPRN.html"><a href="appRNRVPRN.html#appRNRVRNGs"><i class="fa fa-check"></i><b>A.1.1</b> Random Number Generators</a></li>
</ul></li>
<li class="chapter" data-level="A.2" data-path="appRNRVs.html"><a href="appRNRVs.html"><i class="fa fa-check"></i><b>A.2</b> Generating Random Variates from Distributions</a>
<ul>
<li class="chapter" data-level="A.2.1" data-path="appRNRVs.html"><a href="appRNRVs.html#inverse-transform-method"><i class="fa fa-check"></i><b>A.2.1</b> Inverse Transform Method</a></li>
<li class="chapter" data-level="A.2.2" data-path="appRNRVs.html"><a href="appRNRVs.html#convolution"><i class="fa fa-check"></i><b>A.2.2</b> Convolution</a></li>
<li class="chapter" data-level="A.2.3" data-path="appRNRVs.html"><a href="appRNRVs.html#acceptancerejection"><i class="fa fa-check"></i><b>A.2.3</b> Acceptance/Rejection</a></li>
<li class="chapter" data-level="A.2.4" data-path="appRNRVs.html"><a href="appRNRVs.html#AppRNRVsubsecMTSRV"><i class="fa fa-check"></i><b>A.2.4</b> Mixture Distributions, Truncated Distributions, and Shifted Random Variables</a></li>
</ul></li>
<li class="chapter" data-level="A.3" data-path="summary-5.html"><a href="summary-5.html"><i class="fa fa-check"></i><b>A.3</b> Summary</a></li>
<li class="chapter" data-level="A.4" data-path="exercises-8.html"><a href="exercises-8.html"><i class="fa fa-check"></i><b>A.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="appidm.html"><a href="appidm.html"><i class="fa fa-check"></i><b>B</b> Probability Distribution Modeling</a>
<ul>
<li class="chapter" data-level="B.1" data-path="appidmsecrvPD.html"><a href="appidmsecrvPD.html"><i class="fa fa-check"></i><b>B.1</b> Random Variables and Probability Distributions</a></li>
<li class="chapter" data-level="B.2" data-path="appidmsecMDD.html"><a href="appidmsecMDD.html"><i class="fa fa-check"></i><b>B.2</b> Modeling with Discrete Distributions</a></li>
<li class="chapter" data-level="B.3" data-path="appidmsecfitDiscrete.html"><a href="appidmsecfitDiscrete.html"><i class="fa fa-check"></i><b>B.3</b> Fitting Discrete Distributions</a>
<ul>
<li class="chapter" data-level="B.3.1" data-path="appidmsecfitDiscrete.html"><a href="appidmsecfitDiscrete.html#AppDisFitPoissonFit"><i class="fa fa-check"></i><b>B.3.1</b> Fitting a Poisson Distribution</a></li>
<li class="chapter" data-level="B.3.2" data-path="appidmsecfitDiscrete.html"><a href="appidmsecfitDiscrete.html#visualizing-the-data"><i class="fa fa-check"></i><b>B.3.2</b> Visualizing the Data</a></li>
<li class="chapter" data-level="B.3.3" data-path="appidmsecfitDiscrete.html"><a href="appidmsecfitDiscrete.html#estimating-the-rate-parameter-for-the-poisson-distribution"><i class="fa fa-check"></i><b>B.3.3</b> Estimating the Rate Parameter for the Poisson Distribution</a></li>
<li class="chapter" data-level="B.3.4" data-path="appidmsecfitDiscrete.html"><a href="appidmsecfitDiscrete.html#chi-squared-goodness-of-fit-test-for-poisson-distribution"><i class="fa fa-check"></i><b>B.3.4</b> Chi-Squared Goodness of Fit Test for Poisson Distribution</a></li>
<li class="chapter" data-level="B.3.5" data-path="appidmsecfitDiscrete.html"><a href="appidmsecfitDiscrete.html#subsubchisqGOF"><i class="fa fa-check"></i><b>B.3.5</b> Chi-Squared Goodness of Fit Test</a></li>
<li class="chapter" data-level="B.3.6" data-path="appidmsecfitDiscrete.html"><a href="appidmsecfitDiscrete.html#using-the-fitdistrplus-r-package-on-discrete-data"><i class="fa fa-check"></i><b>B.3.6</b> Using the fitdistrplus R Package on Discrete Data</a></li>
<li class="chapter" data-level="B.3.7" data-path="appidmsecfitDiscrete.html"><a href="appidmsecfitDiscrete.html#fitting-a-discrete-empirical-distribution"><i class="fa fa-check"></i><b>B.3.7</b> Fitting a Discrete Empirical Distribution</a></li>
</ul></li>
<li class="chapter" data-level="B.4" data-path="appidmsecMCD.html"><a href="appidmsecMCD.html"><i class="fa fa-check"></i><b>B.4</b> Modeling with Continuous Distributions</a></li>
<li class="chapter" data-level="B.5" data-path="appidmsecfitContinuous.html"><a href="appidmsecfitContinuous.html"><i class="fa fa-check"></i><b>B.5</b> Fitting Continuous Distributions</a>
<ul>
<li class="chapter" data-level="B.5.1" data-path="appidmsecfitContinuous.html"><a href="appidmsecfitContinuous.html#appidmsubsecvisualizedata"><i class="fa fa-check"></i><b>B.5.1</b> Visualizing the Data</a></li>
<li class="chapter" data-level="B.5.2" data-path="appidmsecfitContinuous.html"><a href="appidmsecfitContinuous.html#appidmsubsecstatsdata"><i class="fa fa-check"></i><b>B.5.2</b> Statistically Summarize the Data</a></li>
<li class="chapter" data-level="B.5.3" data-path="appidmsecfitContinuous.html"><a href="appidmsecfitContinuous.html#appidmsubsechypothDist"><i class="fa fa-check"></i><b>B.5.3</b> Hypothesizing and Testing a Distribution</a></li>
<li class="chapter" data-level="B.5.4" data-path="appidmsecfitContinuous.html"><a href="appidmsecfitContinuous.html#kolmogorov-smirnov-test"><i class="fa fa-check"></i><b>B.5.4</b> Kolmogorov-Smirnov Test</a></li>
<li class="chapter" data-level="B.5.5" data-path="appidmsecfitContinuous.html"><a href="appidmsecfitContinuous.html#appidmsubsecvisFit"><i class="fa fa-check"></i><b>B.5.5</b> Visualizing the Fit</a></li>
<li class="chapter" data-level="B.5.6" data-path="appidmsecfitContinuous.html"><a href="appidmsecfitContinuous.html#appidms2sb3"><i class="fa fa-check"></i><b>B.5.6</b> Using the Input Analyzer</a></li>
</ul></li>
<li class="chapter" data-level="B.6" data-path="appdistfittestU01.html"><a href="appdistfittestU01.html"><i class="fa fa-check"></i><b>B.6</b> Testing Uniform (0,1) Pseudo-Random Numbers</a>
<ul>
<li class="chapter" data-level="B.6.1" data-path="appdistfittestU01.html"><a href="appdistfittestU01.html#chi-squared-goodness-of-fit-tests-for-pseudo-random-numbers"><i class="fa fa-check"></i><b>B.6.1</b> Chi-Squared Goodness of Fit Tests for Pseudo-Random Numbers</a></li>
<li class="chapter" data-level="B.6.2" data-path="appdistfittestU01.html"><a href="appdistfittestU01.html#higher-dimensional-chi-squared-test"><i class="fa fa-check"></i><b>B.6.2</b> Higher Dimensional Chi-Squared Test</a></li>
<li class="chapter" data-level="B.6.3" data-path="appdistfittestU01.html"><a href="appdistfittestU01.html#kolmogorov-smirnov-test-for-pseudo-random-numbers"><i class="fa fa-check"></i><b>B.6.3</b> Kolmogorov-Smirnov Test for Pseudo-Random Numbers</a></li>
<li class="chapter" data-level="B.6.4" data-path="appdistfittestU01.html"><a href="appdistfittestU01.html#testing-for-independence-and-patterns-in-pseudo-random-numbers"><i class="fa fa-check"></i><b>B.6.4</b> Testing for Independence and Patterns in Pseudo-Random Numbers</a></li>
</ul></li>
<li class="chapter" data-level="B.7" data-path="appdistfitidms2sb4.html"><a href="appdistfitidms2sb4.html"><i class="fa fa-check"></i><b>B.7</b> Additional Distribution Modeling Concepts</a></li>
<li class="chapter" data-level="B.8" data-path="appidmSummary.html"><a href="appidmSummary.html"><i class="fa fa-check"></i><b>B.8</b> Summary</a></li>
<li class="chapter" data-level="B.9" data-path="exercises-9.html"><a href="exercises-9.html"><i class="fa fa-check"></i><b>B.9</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="appqtAndInvT.html"><a href="appqtAndInvT.html"><i class="fa fa-check"></i><b>C</b> Queueing Theory</a>
<ul>
<li class="chapter" data-level="C.1" data-path="appqts1.html"><a href="appqts1.html"><i class="fa fa-check"></i><b>C.1</b> Single Line Queueing Stations</a>
<ul>
<li class="chapter" data-level="C.1.1" data-path="appqts1.html"><a href="appqts1.html#queueing-notation"><i class="fa fa-check"></i><b>C.1.1</b> Queueing Notation</a></li>
<li class="chapter" data-level="C.1.2" data-path="appqts1.html"><a href="appqts1.html#littles-formula"><i class="fa fa-check"></i><b>C.1.2</b> Little’s Formula</a></li>
<li class="chapter" data-level="C.1.3" data-path="appqts1.html"><a href="appqts1.html#appqts1sb1"><i class="fa fa-check"></i><b>C.1.3</b> Deriving Formulas for Markovian Single Queue Systems</a></li>
</ul></li>
<li class="chapter" data-level="C.2" data-path="appqts1sb2.html"><a href="appqts1sb2.html"><i class="fa fa-check"></i><b>C.2</b> Examples and Applications of Queueing Analysis</a>
<ul>
<li class="chapter" data-level="C.2.1" data-path="appqts1sb2.html"><a href="appqts1sb2.html#infinite-queue-examples"><i class="fa fa-check"></i><b>C.2.1</b> Infinite Queue Examples</a></li>
<li class="chapter" data-level="C.2.2" data-path="appqts1sb2.html"><a href="appqts1sb2.html#finite-queue-examples"><i class="fa fa-check"></i><b>C.2.2</b> Finite Queue Examples</a></li>
</ul></li>
<li class="chapter" data-level="C.3" data-path="appqts1sb3.html"><a href="appqts1sb3.html"><i class="fa fa-check"></i><b>C.3</b> Non-Markovian Queues and Approximations</a></li>
<li class="chapter" data-level="C.4" data-path="appqtsecformulas.html"><a href="appqtsecformulas.html"><i class="fa fa-check"></i><b>C.4</b> Summary of Queueing Formulas</a>
<ul>
<li class="chapter" data-level="C.4.1" data-path="appqtsecformulas.html"><a href="appqtsecformulas.html#mm1-queue"><i class="fa fa-check"></i><b>C.4.1</b> M/M/1 Queue</a></li>
<li class="chapter" data-level="C.4.2" data-path="appqtsecformulas.html"><a href="appqtsecformulas.html#mmc-queue"><i class="fa fa-check"></i><b>C.4.2</b> M/M/c Queue</a></li>
<li class="chapter" data-level="C.4.3" data-path="appqtsecformulas.html"><a href="appqtsecformulas.html#mmck-queue"><i class="fa fa-check"></i><b>C.4.3</b> M/M/c/k Queue</a></li>
<li class="chapter" data-level="C.4.4" data-path="appqtsecformulas.html"><a href="appqtsecformulas.html#mgcc-queue"><i class="fa fa-check"></i><b>C.4.4</b> M/G/c/c Queue</a></li>
<li class="chapter" data-level="C.4.5" data-path="appqtsecformulas.html"><a href="appqtsecformulas.html#mm1k-queue"><i class="fa fa-check"></i><b>C.4.5</b> M/M/1/k Queue</a></li>
<li class="chapter" data-level="C.4.6" data-path="appqtsecformulas.html"><a href="appqtsecformulas.html#mmck-queue-1"><i class="fa fa-check"></i><b>C.4.6</b> M/M/c/k Queue</a></li>
<li class="chapter" data-level="C.4.7" data-path="appqtsecformulas.html"><a href="appqtsecformulas.html#mm1kk-queue"><i class="fa fa-check"></i><b>C.4.7</b> M/M/1/k/k Queue</a></li>
<li class="chapter" data-level="C.4.8" data-path="appqtsecformulas.html"><a href="appqtsecformulas.html#mmckk-queue"><i class="fa fa-check"></i><b>C.4.8</b> M/M/c/k/k Queue</a></li>
</ul></li>
<li class="chapter" data-level="C.5" data-path="exercises-10.html"><a href="exercises-10.html"><i class="fa fa-check"></i><b>C.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="D" data-path="appUtilities.html"><a href="appUtilities.html"><i class="fa fa-check"></i><b>D</b> KSL Utility Packages</a>
<ul>
<li class="chapter" data-level="D.1" data-path="the-outputdirectory-class-and-ksl-object.html"><a href="the-outputdirectory-class-and-ksl-object.html"><i class="fa fa-check"></i><b>D.1</b> The <code>OutputDirectory</code> Class and <code>KSL</code> Object</a></li>
<li class="chapter" data-level="D.2" data-path="logging-options.html"><a href="logging-options.html"><i class="fa fa-check"></i><b>D.2</b> Logging Options</a></li>
<li class="chapter" data-level="D.3" data-path="the-kslfileutil-object.html"><a href="the-kslfileutil-object.html"><i class="fa fa-check"></i><b>D.3</b> The <code>KSLFileUtil</code> Object</a></li>
<li class="chapter" data-level="D.4" data-path="appDCSVEtc.html"><a href="appDCSVEtc.html"><i class="fa fa-check"></i><b>D.4</b> CSV, Excel, and Tabular Data Files</a></li>
<li class="chapter" data-level="D.5" data-path="dfUtil.html"><a href="dfUtil.html"><i class="fa fa-check"></i><b>D.5</b> The <code>DataFrameUtil</code> Object</a></li>
<li class="chapter" data-level="D.6" data-path="ksl-database-utilities.html"><a href="ksl-database-utilities.html"><i class="fa fa-check"></i><b>D.6</b> KSL Database Utilities</a></li>
<li class="chapter" data-level="D.7" data-path="appUtilitiesArrays.html"><a href="appUtilitiesArrays.html"><i class="fa fa-check"></i><b>D.7</b> Array Utilities</a></li>
<li class="chapter" data-level="D.8" data-path="appPlotting.html"><a href="appPlotting.html"><i class="fa fa-check"></i><b>D.8</b> KSL Plotting Utilities</a></li>
<li class="chapter" data-level="D.9" data-path="appExpDesign.html"><a href="appExpDesign.html"><i class="fa fa-check"></i><b>D.9</b> Experimental Design Utilities</a></li>
<li class="chapter" data-level="D.10" data-path="appUtilitiesMisc.html"><a href="appUtilitiesMisc.html"><i class="fa fa-check"></i><b>D.10</b> Miscellaneous Utilities</a></li>
</ul></li>
<li class="chapter" data-level="E" data-path="distributions.html"><a href="distributions.html"><i class="fa fa-check"></i><b>E</b> Distributions</a>
<ul>
<li class="chapter" data-level="E.1" data-path="appDiscreteDistributions.html"><a href="appDiscreteDistributions.html"><i class="fa fa-check"></i><b>E.1</b> Discrete Distrbutions</a></li>
<li class="chapter" data-level="E.2" data-path="appContinuousDistributions.html"><a href="appContinuousDistributions.html"><i class="fa fa-check"></i><b>E.2</b> Continuous Distrbutions</a></li>
</ul></li>
<li class="chapter" data-level="F" data-path="appStatTables.html"><a href="appStatTables.html"><i class="fa fa-check"></i><b>F</b> Statistical Tables</a></li>
<li class="chapter" data-level="G" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>G</b> References</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="_blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Simulation Modeling using the Kotlin Simulation Library (KSL)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="introDEDSdedsKSL" class="section level2 hasAnchor" number="4.4">
<h2><span class="header-section-number">4.4</span> Modeling DEDS in the KSL<a href="introDEDSdedsKSL.html#introDEDSdedsKSL" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Discrete event modeling within the KSL is facilitated by two packages:
1) the <code>ksl.simulation</code> package and 2) the <code>ksl.calendar</code> package. The <code>ksl.simulation</code>
package has classes that implement behavior associated with simulation
events and models. The <code>ksl.calendar</code> package has classes that facilitate the
scheduling and processing of events.</p>
<div id="event-scheduling" class="section level3 hasAnchor" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> Event Scheduling<a href="introDEDSdedsKSL.html#event-scheduling" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The following classes within the <code>ksl.simulation</code> package work together to
provide for the scheduling and execution of events:</p>
<ul>
<li><p><code>Model</code> - An instance of <code>Model</code> holds the model and
facilitates the running of the simulation according to run
parameters such as simulation run length and number of replications. An instance of a Model is required to serve as the parent to any model elements within a simulation model. It is the top-level container for model elements.</p></li>
<li><p><code>Executive</code> - The Executive controls the execution of the events and
works with the calendar package to ensure that events are executed
and the appropriate model logic is called at the appropriate event
time. This class is responsible for placing the events on a
calendar, allowing events to be canceled, and executing the events
in the correct order.</p></li>
<li><p><code>KSLEvent</code> – This class represents a simulation event. The
attributes of <code>KSLEvent</code> provide information about the name, time,
priority, and type of the event. The user can also check whether or
not the event is canceled or if it has been scheduled. In addition,
a generic attribute of type <code>&lt;T&gt;</code> can be associated with an event and
can be used to pass information along with the event.</p></li>
<li><p><code>ModelElement</code> – This class serves as a base class for all classes
that are within a simulation model. It provides access to the
scheduler and ensures that model elements participate in common
simulation actions (e.g. warm up, initialization, etc.).</p></li>
</ul>
<p>Figure <a href="introDEDSdedsKSL.html#fig:kslModeling">4.5</a> illustrates the relationships between the
classes <code>Model,</code> <code>ModelElement,</code> and
<code>Executive.</code> The <code>ModelElement</code> class represents the primary building block
for KSL models. A <code>ModelElement</code> represents something (an element) that
can be placed within an instance of a <code>Model</code>. The <code>Model</code> class subclasses
<code>ModelElement.</code> Every <code>ModelElement</code> can contain many other instances of
<code>ModelElement.</code> As such, an instance of a <code>Model</code> can also contain model
elements. There can only be one instance of the <code>Model</code> class within the
simulation. It acts as the parent (container) for all other model
elements. Model elements in turn also hold other model elements.
Instances arranged in this pattern form an object hierarchy that
represents the simulation model. The instance of a <code>Model</code> holds
(references) the instance of the <code>Executive</code> class. The instance of the <code>Executive</code> uses an instance of a class
that implements the <code>CalendarIfc</code> interface. The simulation also
references an instance of the <code>Experiment</code> class. The <code>Experiment</code> class
allows the specification and control of the run parameters for the
simulation. Every instance of a <code>ModelElement</code> must be a child of another
<code>ModelElement</code> or the <code>Model.</code> This implies that instances of <code>ModelElement</code>
have access to the main model, which has access to an instance of
<code>Model</code> and thus the instance of the <code>Executive.</code> Therefore sub-classes
of <code>ModelElement</code> have access to the <code>Executive</code> and can schedule events.</p>
<div class="figure"><span style="display:block;" id="fig:kslModeling"></span>
<img src="figures2/ch4/kslModeling.png" alt="ksl.simulation Package and Relationships"  />
<p class="caption">
Figure 4.5: ksl.simulation Package and Relationships
</p>
</div>
<p><code>ModelElement</code> is an abstract base class for building other classes that can exist within a model. Sub-classes
of the <code>ModelElement</code> class will have a set of methods that
facilitate the scheduling of events.</p>
<div class="figure"><span style="display:block;" id="fig:ModelElement"></span>
<img src="figures2/ch4/ModelElement.png" alt="ModelElement and its inner classes"  />
<p class="caption">
Figure 4.6: ModelElement and its inner classes
</p>
</div>
<p>Figure <a href="introDEDSdedsKSL.html#fig:ModelElement">4.6</a> illustrates the protected methods of
the <code>ModelElement</code> class. Since these methods are protected,
sub-classes will have them available through inheritance. The scheduling of new
events results in the creation of a new <code>KSLEvent</code> instance and the placement of
the event on the event calendar via the <code>Executive.</code></p>
<p>The following code listing illustrates the key method for
scheduling events within the class <code>ModelElement</code> Notice that the instance of the <code>Executive</code> is called via <code>executive</code> property. In addition, the user can supply information for the
creation of an event such as its time, name, and priority. The user can
also provide an instance of classes that implement the <code>EventActionIfc</code>
interface. This interface promises to have an <code>action()</code> method. Within
the <code>action()</code> method the user can provide the code that is necessary to
represent the state changes associated with the event.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb107-1"><a href="introDEDSdedsKSL.html#cb107-1" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb107-2"><a href="introDEDSdedsKSL.html#cb107-2" tabindex="-1"></a><span class="co">     * Allows event actions to be scheduled by model elements</span></span>
<span id="cb107-3"><a href="introDEDSdedsKSL.html#cb107-3" tabindex="-1"></a><span class="co">     * @param eventAction the event action to schedule</span></span>
<span id="cb107-4"><a href="introDEDSdedsKSL.html#cb107-4" tabindex="-1"></a><span class="co">     * @param timeToEvent the time to the next action</span></span>
<span id="cb107-5"><a href="introDEDSdedsKSL.html#cb107-5" tabindex="-1"></a><span class="co">     * @param priority the priority of the action</span></span>
<span id="cb107-6"><a href="introDEDSdedsKSL.html#cb107-6" tabindex="-1"></a><span class="co">     * @param message a general object to attach to the action</span></span>
<span id="cb107-7"><a href="introDEDSdedsKSL.html#cb107-7" tabindex="-1"></a><span class="co">     * @param name a name to associate with the event for the action</span></span>
<span id="cb107-8"><a href="introDEDSdedsKSL.html#cb107-8" tabindex="-1"></a><span class="co">     * @return the scheduled event</span></span>
<span id="cb107-9"><a href="introDEDSdedsKSL.html#cb107-9" tabindex="-1"></a><span class="co">     */</span></span>
<span id="cb107-10"><a href="introDEDSdedsKSL.html#cb107-10" tabindex="-1"></a>    <span class="kw">protected</span> <span class="kw">fun</span> <span class="op">&lt;</span><span class="dt">T</span><span class="op">&gt;</span> <span class="fu">schedule</span><span class="op">(</span></span>
<span id="cb107-11"><a href="introDEDSdedsKSL.html#cb107-11" tabindex="-1"></a>        <span class="va">eventAction</span><span class="op">:</span> <span class="dt">EventActionIfc</span>&lt;<span class="va">T</span>&gt;<span class="op">,</span></span>
<span id="cb107-12"><a href="introDEDSdedsKSL.html#cb107-12" tabindex="-1"></a>        <span class="va">timeToEvent</span><span class="op">:</span> <span class="dt">Double</span><span class="op">,</span></span>
<span id="cb107-13"><a href="introDEDSdedsKSL.html#cb107-13" tabindex="-1"></a>        <span class="va">message</span><span class="op">:</span> <span class="dt">T</span><span class="op">?</span> <span class="op">=</span> null<span class="op">,</span></span>
<span id="cb107-14"><a href="introDEDSdedsKSL.html#cb107-14" tabindex="-1"></a>        <span class="va">priority</span><span class="op">:</span> <span class="dt">Int</span> <span class="op">=</span> KSLEvent<span class="op">.</span>DEFAULT_PRIORITY<span class="op">,</span></span>
<span id="cb107-15"><a href="introDEDSdedsKSL.html#cb107-15" tabindex="-1"></a>        <span class="va">name</span><span class="op">:</span> <span class="dt">String</span><span class="op">?</span> <span class="op">=</span> null</span>
<span id="cb107-16"><a href="introDEDSdedsKSL.html#cb107-16" tabindex="-1"></a>    <span class="op">):</span> <span class="dt">KSLEvent</span><span class="op">&lt;</span><span class="dt">T</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb107-17"><a href="introDEDSdedsKSL.html#cb107-17" tabindex="-1"></a>        <span class="kw">return</span> executive<span class="op">.</span>scheduleEvent<span class="op">(</span><span class="kw">this</span><span class="op">,</span> eventAction<span class="op">,</span> timeToEvent<span class="op">,</span> message<span class="op">,</span> priority<span class="op">,</span> name<span class="op">)</span></span>
<span id="cb107-18"><a href="introDEDSdedsKSL.html#cb107-18" tabindex="-1"></a>    <span class="op">}</span></span></code></pre></div>
<p>There are two ways that the user can
provide event action code: 1) provide a class that implements the
<code>EventActionIfc</code> interface and supply it when scheduling the event or 2)
by treating the <code>EventActionIfc</code> as a functional interface and using Kotlin’s functional method representation.</p>
<p>Notice that besides the <code>schedule()</code> method of the <code>ModelElement</code> class, the <code>EventAction</code> class definition also facilitates the scheduling of the event action.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb108-1"><a href="introDEDSdedsKSL.html#cb108-1" tabindex="-1"></a>    <span class="kw">protected</span> <span class="kw">abstract</span> <span class="kw">inner</span> <span class="kw">class</span> EventAction<span class="op">&lt;</span><span class="dt">T</span><span class="op">&gt;</span> <span class="op">:</span> <span class="dt">EventActionIfc</span><span class="op">&lt;</span><span class="dt">T</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb108-2"><a href="introDEDSdedsKSL.html#cb108-2" tabindex="-1"></a></span>
<span id="cb108-3"><a href="introDEDSdedsKSL.html#cb108-3" tabindex="-1"></a>        <span class="co">/**</span></span>
<span id="cb108-4"><a href="introDEDSdedsKSL.html#cb108-4" tabindex="-1"></a><span class="co">         * Allows event actions to more conveniently schedule themselves</span></span>
<span id="cb108-5"><a href="introDEDSdedsKSL.html#cb108-5" tabindex="-1"></a><span class="co">         * @param timeToEvent the time to the next action</span></span>
<span id="cb108-6"><a href="introDEDSdedsKSL.html#cb108-6" tabindex="-1"></a><span class="co">         * @param priority the priority of the action</span></span>
<span id="cb108-7"><a href="introDEDSdedsKSL.html#cb108-7" tabindex="-1"></a><span class="co">         * @param message a general object to attach to the action</span></span>
<span id="cb108-8"><a href="introDEDSdedsKSL.html#cb108-8" tabindex="-1"></a><span class="co">         * @param name a name to associate with the event for the action</span></span>
<span id="cb108-9"><a href="introDEDSdedsKSL.html#cb108-9" tabindex="-1"></a><span class="co">         * @return the scheduled event</span></span>
<span id="cb108-10"><a href="introDEDSdedsKSL.html#cb108-10" tabindex="-1"></a><span class="co">         */</span></span>
<span id="cb108-11"><a href="introDEDSdedsKSL.html#cb108-11" tabindex="-1"></a>        <span class="kw">fun</span> <span class="fu">schedule</span><span class="op">(</span></span>
<span id="cb108-12"><a href="introDEDSdedsKSL.html#cb108-12" tabindex="-1"></a>            <span class="va">timeToEvent</span><span class="op">:</span> <span class="dt">Double</span><span class="op">,</span></span>
<span id="cb108-13"><a href="introDEDSdedsKSL.html#cb108-13" tabindex="-1"></a>            <span class="va">message</span><span class="op">:</span> <span class="dt">T</span><span class="op">?</span> <span class="op">=</span> null<span class="op">,</span></span>
<span id="cb108-14"><a href="introDEDSdedsKSL.html#cb108-14" tabindex="-1"></a>            <span class="va">priority</span><span class="op">:</span> <span class="dt">Int</span> <span class="op">=</span> KSLEvent<span class="op">.</span>DEFAULT_PRIORITY<span class="op">,</span></span>
<span id="cb108-15"><a href="introDEDSdedsKSL.html#cb108-15" tabindex="-1"></a>            <span class="va">name</span><span class="op">:</span> <span class="dt">String</span><span class="op">?</span> <span class="op">=</span> null</span>
<span id="cb108-16"><a href="introDEDSdedsKSL.html#cb108-16" tabindex="-1"></a>        <span class="op">):</span> <span class="dt">KSLEvent</span><span class="op">&lt;</span><span class="dt">T</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb108-17"><a href="introDEDSdedsKSL.html#cb108-17" tabindex="-1"></a>            <span class="kw">return</span> schedule<span class="op">(</span><span class="kw">this</span><span class="op">,</span> timeToEvent<span class="op">,</span> message<span class="op">,</span> priority<span class="op">,</span> name<span class="op">)</span></span>
<span id="cb108-18"><a href="introDEDSdedsKSL.html#cb108-18" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb108-19"><a href="introDEDSdedsKSL.html#cb108-19" tabindex="-1"></a></span>
<span id="cb108-20"><a href="introDEDSdedsKSL.html#cb108-20" tabindex="-1"></a>        <span class="kw">fun</span> <span class="fu">schedule</span><span class="op">(</span></span>
<span id="cb108-21"><a href="introDEDSdedsKSL.html#cb108-21" tabindex="-1"></a>            <span class="va">timeToEvent</span><span class="op">:</span> <span class="dt">GetValueIfc</span><span class="op">,</span></span>
<span id="cb108-22"><a href="introDEDSdedsKSL.html#cb108-22" tabindex="-1"></a>            <span class="va">message</span><span class="op">:</span> <span class="dt">T</span><span class="op">?</span> <span class="op">=</span> null<span class="op">,</span></span>
<span id="cb108-23"><a href="introDEDSdedsKSL.html#cb108-23" tabindex="-1"></a>            <span class="va">priority</span><span class="op">:</span> <span class="dt">Int</span> <span class="op">=</span> KSLEvent<span class="op">.</span>DEFAULT_PRIORITY<span class="op">,</span></span>
<span id="cb108-24"><a href="introDEDSdedsKSL.html#cb108-24" tabindex="-1"></a>            <span class="va">name</span><span class="op">:</span> <span class="dt">String</span><span class="op">?</span> <span class="op">=</span> null</span>
<span id="cb108-25"><a href="introDEDSdedsKSL.html#cb108-25" tabindex="-1"></a>        <span class="op">):</span> <span class="dt">KSLEvent</span><span class="op">&lt;</span><span class="dt">T</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb108-26"><a href="introDEDSdedsKSL.html#cb108-26" tabindex="-1"></a>            <span class="kw">return</span> schedule<span class="op">(</span>timeToEvent<span class="op">.</span>value<span class="op">,</span> message<span class="op">,</span> priority<span class="op">,</span> name<span class="op">)</span></span>
<span id="cb108-27"><a href="introDEDSdedsKSL.html#cb108-27" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb108-28"><a href="introDEDSdedsKSL.html#cb108-28" tabindex="-1"></a>    <span class="op">}</span></span></code></pre></div>
<p>These scheduling methods have also been overloaded to allow the specification of time via instances that implement the <code>GetValueIfc.</code> This allows instances of random variables to be used directly with the time until the event ultimately being randomly drawn from the distribution.</p>
</div>
<div id="introDEDSschedExamples" class="section level3 hasAnchor" number="4.4.2">
<h3><span class="header-section-number">4.4.2</span> Simple Event Scheduling Examples<a href="introDEDSdedsKSL.html#introDEDSschedExamples" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This section presents two simple examples to illustrate event
scheduling. The first example illustrates the scheduling of events using the <code>EventActionIfc</code> interface. The second example shows how to simulate a Poisson process and collect
simple statistics.</p>
<div id="implementing-event-actions-using-the-eventactionifc-interface" class="section level4 hasAnchor" number="4.4.2.1">
<h4><span class="header-section-number">4.4.2.1</span> Implementing Event Actions Using the EventActionIfc Interface<a href="introDEDSdedsKSL.html#implementing-event-actions-using-the-eventactionifc-interface" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In the first example, there will be two events scheduled with actions.
The time between the events will all be deterministic. The specifics of
the events are as follows:</p>
<ol style="list-style-type: decimal">
<li>Event Action One: This event occurs only once at time 10.0 and schedules the Action Two event to occur 5.0 time units later. It also prints out a message.</li>
<li>Event Action Two: This event prints out a message. Then, it schedules an action one event 15 time units into the future. It also reschedules itself to reoccur in 20 minutes.</li>
</ol>
<p>The following code listing provides the code for this simple event
example. Let’s walk carefully through the construction and execution of
this code.</p>
<p>First, the class sub-classes from <code>ModelElement.</code> This
enables the class to have access to all the scheduling methods within
<code>ModelElement</code> and provides one method that needs to be overridden:
<code>initialize().</code> Every <code>ModelElement</code> has an <code>initialize()</code>
method. The <code>initialize()</code> method does nothing within the class <code>ModelElement.</code>
However, the <code>initialize()</code> method is <em>critical</em> to properly modeling
using instances of <code>ModelElement</code> within the KSL architecture. The purpose of the
<code>initialize()</code> method is to provide code that can occur once at the
beginning of each replication of the simulation, prior to the execution
of any events. Thus, the <code>initialize()</code> method is the perfect location to
schedule initial events onto the event calendar so that when the
replications associated with the simulation are executed initial events
will be on the calendar ready for execution. Notice that in this example
the <code>initialize()</code> method does two things:</p>
<ol style="list-style-type: decimal">
<li>schedules the first event action one event at time 10.0 via the call:
<code>scheduleEvent(myEventActionOne, 10.0)</code></li>
<li>schedules the first action two event at time 20.0 via the call:
<code>scheduleEvent(myEventActionTwo, 20.0)</code></li>
</ol>
<div class="example">
<p><span id="exm:ch4ex1" class="example"><strong>Example 4.1  (Scheduling Events) </strong></span>This example code illustrates how to create event actions and to schedule their occurrence at specific event times.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb109-1"><a href="introDEDSdedsKSL.html#cb109-1" tabindex="-1"></a><span class="kw">class</span> SchedulingEventExamples <span class="op">(</span><span class="va">parent</span><span class="op">:</span> <span class="dt">ModelElement</span><span class="op">,</span> <span class="va">name</span><span class="op">:</span> <span class="dt">String</span><span class="op">?</span> <span class="op">=</span> null<span class="op">)</span> <span class="op">:</span></span>
<span id="cb109-2"><a href="introDEDSdedsKSL.html#cb109-2" tabindex="-1"></a>    <span class="dt">ModelElement</span><span class="op">(</span><span class="va">parent</span><span class="op">,</span> <span class="va">name</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb109-3"><a href="introDEDSdedsKSL.html#cb109-3" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">myEventActionOne</span><span class="op">:</span> EventActionOne <span class="op">=</span> EventActionOne<span class="op">()</span></span>
<span id="cb109-4"><a href="introDEDSdedsKSL.html#cb109-4" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">myEventActionTwo</span><span class="op">:</span> EventActionTwo <span class="op">=</span> EventActionTwo<span class="op">()</span></span>
<span id="cb109-5"><a href="introDEDSdedsKSL.html#cb109-5" tabindex="-1"></a></span>
<span id="cb109-6"><a href="introDEDSdedsKSL.html#cb109-6" tabindex="-1"></a>    <span class="kw">override</span> <span class="kw">fun</span> <span class="fu">initialize</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb109-7"><a href="introDEDSdedsKSL.html#cb109-7" tabindex="-1"></a>        <span class="co">// schedule a type 1 event at time 10.0</span></span>
<span id="cb109-8"><a href="introDEDSdedsKSL.html#cb109-8" tabindex="-1"></a>        schedule<span class="op">(</span>myEventActionOne<span class="op">,</span> <span class="fl">10.0</span><span class="op">)</span></span>
<span id="cb109-9"><a href="introDEDSdedsKSL.html#cb109-9" tabindex="-1"></a>        <span class="co">// schedule an event that uses myEventAction for time 20.0</span></span>
<span id="cb109-10"><a href="introDEDSdedsKSL.html#cb109-10" tabindex="-1"></a>        schedule<span class="op">(</span>myEventActionTwo<span class="op">,</span> <span class="fl">20.0</span><span class="op">)</span></span>
<span id="cb109-11"><a href="introDEDSdedsKSL.html#cb109-11" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb109-12"><a href="introDEDSdedsKSL.html#cb109-12" tabindex="-1"></a></span>
<span id="cb109-13"><a href="introDEDSdedsKSL.html#cb109-13" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">inner</span> <span class="kw">class</span> EventActionOne <span class="op">:</span> <span class="dt">EventAction</span><span class="op">&lt;</span><span class="dt">Nothing</span><span class="op">&gt;()</span> <span class="op">{</span></span>
<span id="cb109-14"><a href="introDEDSdedsKSL.html#cb109-14" tabindex="-1"></a>        <span class="kw">override</span> <span class="kw">fun</span> <span class="fu">action</span><span class="op">(</span><span class="va">event</span><span class="op">:</span> <span class="dt">KSLEvent</span>&lt;<span class="va">Nothing</span>&gt;<span class="op">)</span> <span class="op">{</span></span>
<span id="cb109-15"><a href="introDEDSdedsKSL.html#cb109-15" tabindex="-1"></a>            println<span class="op">(</span><span class="st">&quot;EventActionOne at time : </span><span class="ss">$time</span><span class="st">&quot;</span><span class="op">)</span></span>
<span id="cb109-16"><a href="introDEDSdedsKSL.html#cb109-16" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb109-17"><a href="introDEDSdedsKSL.html#cb109-17" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb109-18"><a href="introDEDSdedsKSL.html#cb109-18" tabindex="-1"></a></span>
<span id="cb109-19"><a href="introDEDSdedsKSL.html#cb109-19" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">inner</span> <span class="kw">class</span> EventActionTwo <span class="op">:</span> <span class="dt">EventAction</span><span class="op">&lt;</span><span class="dt">Nothing</span><span class="op">&gt;()</span> <span class="op">{</span></span>
<span id="cb109-20"><a href="introDEDSdedsKSL.html#cb109-20" tabindex="-1"></a>        <span class="kw">override</span> <span class="kw">fun</span> <span class="fu">action</span><span class="op">(</span><span class="va">event</span><span class="op">:</span> <span class="dt">KSLEvent</span>&lt;<span class="va">Nothing</span>&gt;<span class="op">)</span> <span class="op">{</span></span>
<span id="cb109-21"><a href="introDEDSdedsKSL.html#cb109-21" tabindex="-1"></a>            println<span class="op">(</span><span class="st">&quot;EventActionTwo at time : </span><span class="ss">$time</span><span class="st">&quot;</span><span class="op">)</span></span>
<span id="cb109-22"><a href="introDEDSdedsKSL.html#cb109-22" tabindex="-1"></a>            <span class="co">// schedule a type 1 event for time t + 15</span></span>
<span id="cb109-23"><a href="introDEDSdedsKSL.html#cb109-23" tabindex="-1"></a>            schedule<span class="op">(</span>myEventActionOne<span class="op">,</span> <span class="fl">15.0</span><span class="op">)</span></span>
<span id="cb109-24"><a href="introDEDSdedsKSL.html#cb109-24" tabindex="-1"></a>            <span class="co">// reschedule the EventAction event for t + 20</span></span>
<span id="cb109-25"><a href="introDEDSdedsKSL.html#cb109-25" tabindex="-1"></a>            schedule<span class="op">(</span>myEventActionTwo<span class="op">,</span> <span class="fl">20.0</span><span class="op">)</span></span>
<span id="cb109-26"><a href="introDEDSdedsKSL.html#cb109-26" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb109-27"><a href="introDEDSdedsKSL.html#cb109-27" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb109-28"><a href="introDEDSdedsKSL.html#cb109-28" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<p>The the function call <code>scheduleEvent(myEventActionTwo, 20.0)</code> schedules an event 20 time
units into the future where the event will be handled via the instance
of the class <code>EventActionTwo</code>, which implements the <code>EventActionIfc</code> interface.
The reference <code>myEventActionTwo</code> refers to an object of type <code>EventActionTwo,</code>
which is an instance of the inner classes defined within
<code>SchedulingEventExamples.</code> This variable is defined as as class property
on line 4 and an instance is created via the constructor. To
summarize, the <code>initialize()</code> method is used to schedule the initial occurrences of the two types of events. The <code>initialize()</code> method occurs right before time 0.0. That is, it occurs right before the simulation clock starts.</p>
<p>Now, let us examine the actions that occur for the two types of events. Within the <code>action()</code> method of <code>EventActionOne,</code> we see the following code:</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb110-1"><a href="introDEDSdedsKSL.html#cb110-1" tabindex="-1"></a>println<span class="op">(</span><span class="st">&quot;EventActionOne at time : </span><span class="ss">$time</span><span class="st">&quot;</span><span class="op">)</span></span></code></pre></div>
<p>Here a simple message is printed that includes the simulation time via the inherited <code>time</code> property of the <code>ModelElement</code> class. Thus, by implementing the <code>action()</code> method of the <code>EventActionIfc</code> interface, you can supply the logic that occurs when the event is executed by the simulation executive. In the implemented <code>EventActionTwo</code> class, a simple message is printed and event action one is scheduled. In addition, the <code>schedule()</code> method is used to reschedule the <code>action()</code> method. The following code illustrates how to setup and run the simulation.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb111-1"><a href="introDEDSdedsKSL.html#cb111-1" tabindex="-1"></a><span class="kw">fun</span> <span class="fu">main</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb111-2"><a href="introDEDSdedsKSL.html#cb111-2" tabindex="-1"></a>    <span class="kw">val</span> <span class="va">m</span> <span class="op">=</span> Model<span class="op">(</span><span class="st">&quot;Scheduling Example&quot;</span><span class="op">)</span></span>
<span id="cb111-3"><a href="introDEDSdedsKSL.html#cb111-3" tabindex="-1"></a>    SchedulingEventExamples<span class="op">(</span>m<span class="op">.</span>model<span class="op">)</span></span>
<span id="cb111-4"><a href="introDEDSdedsKSL.html#cb111-4" tabindex="-1"></a>    m<span class="op">.</span>lengthOfReplication <span class="op">=</span> <span class="fl">100.0</span></span>
<span id="cb111-5"><a href="introDEDSdedsKSL.html#cb111-5" tabindex="-1"></a>    m<span class="op">.</span>simulate<span class="op">()</span></span>
<span id="cb111-6"><a href="introDEDSdedsKSL.html#cb111-6" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>The main method associated with the <code>SchedulingEventExamples</code> class
indicates how to create and run a simulation model. The first line of the main method creates an instance of a <code>Model.</code> The next line makes an instance of
<code>SchedulingEventExamples</code> and attaches it to the simulation model. The
property called, <code>s.model</code> returns an instance of the <code>Model</code> class that is
associated with the instance of the simulation. The next line sets up the
simulation to run for 100 time units and the last line tells the simulation to
begin executing via the <code>simulate()</code> method. The output of the code is as follows:</p>
<pre><code>EventActionOne at time : 10.0
EventActionTwo at time : 20.0
EventActionOne at time : 35.0
EventActionTwo at time : 40.0
EventActionOne at time : 55.0
EventActionTwo at time : 60.0
EventActionOne at time : 75.0
EventActionTwo at time : 80.0
EventActionOne at time : 95.0
EventActionTwo at time : 100.0</code></pre>
<p>Notice that event action one output occurs at time 10.0. This is due to the event that was scheduled within the <code>initialize()</code> method. Event action two occurs for the first time at time 20.0 and then every 20 time units. Notice that event action one occurs at time 35.0. This is due to the event being scheduled in the action method of event action two.</p>
</div>
<div id="introDEDSOverview" class="section level4 hasAnchor" number="4.4.2.2">
<h4><span class="header-section-number">4.4.2.2</span> Overview of Simuation Run Context<a href="introDEDSdedsKSL.html#introDEDSOverview" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>When the simulation runs, much underlying code is executed. At this
stage it is not critically important to understand how this code works;
however, it is useful to understand, in a general sense, what is
happening. The following outlines the basic processes that are occurring
when <code>s.simulate()</code> occurs:</p>
<ol style="list-style-type: decimal">
<li><p>Setup the simulation experiment</p></li>
<li><p>For each replication of the simulation:</p>
<ol style="list-style-type: lower-alpha">
<li><p>Initialize the replication</p></li>
<li><p>Initialize the executive and calendar</p></li>
<li><p>Initialize the model and all model elements</p></li>
<li><p>While there are events on the event calendar or the simulation
is not stopped</p>
<ol style="list-style-type: lower-roman">
<li><p>Determine the next event to execute</p></li>
<li><p>Update the current simulation time to the time of the next
event</p></li>
<li><p>Call the action() method of the instance of <code>EventActionIfc</code> that was attached to the next event.</p></li>
<li><p>Execute the actions associated with the next event</p></li>
</ol></li>
<li><p>Execute end of replication model logic</p></li>
</ol></li>
<li><p>Execute end of simulation experiment logic</p></li>
</ol>
<p>Step 2(b) initializes the executive and calendar and ensures that there
are no events at the beginning of the simulation. It also resets the
simulation time to 0.0. Then, step 2(c) initializes the model. In this
step, the initialize() methods of all of the model elements are
executed. This is why it was important to implement the <code>initialize()</code>
method in the example and have it schedule the initial events. Then,
step 2(c) begins the execution of the events that were placed on the
calendar. In looking at the code listings, it is not possible to ascertain how the <code>action()</code> methods are actually invoked unless you
understand that during step 2(c) each scheduled event is removed from
the calendar and its associated action called. In the case of the event action one
and two events in the example, these actions are specified in the <code>action()</code> method of <code>EventActionOne</code> and <code>EventActionTwo.</code> After all the events in the
calendar are executed or the simulation is not otherwise stopped, the
replication is ended. Any clean up logic (such as statistical
collection) is executed at the end of the replication. Finally, after
all replications have been executed, any logic associated with ending
the simulation experiment is invoked. Thus, even though the code does
not directly call the event logic it is still invoked by the simulation
executive because the events are scheduled. Thus, if you schedule
events, you can be assured that the logic associated with the events
will be executed.</p>
<div class="infobox important">
<p><strong>IMPORTANT!</strong>
In upcoming examples, we will provide names for the model elements. The most
important point to remember is that the name of a model element must be unique.
If you do not provide a name for a model element, then a unique name will be created
for you. The name of a model element should not contain the period “.” character. If
it does, the period will be replaced with an underscore “_” character. If you happen to specify the same name for more than one model element, an error will be reported.
<strong>Bottom line: Provide unique names for model elements.</strong></p>
</div>
</div>
<div id="introDEDSPois" class="section level4 hasAnchor" number="4.4.2.3">
<h4><span class="header-section-number">4.4.2.3</span> Simulating a Poisson Process<a href="introDEDSdedsKSL.html#introDEDSPois" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The second simple example illustrates how to simulate a Poisson process.
Recall that a Poisson process models the number of events that occur
within some time interval. For a Poisson process the time between events
is exponentially distributed with a mean that is the reciprocal of the
rate of occurrence for the events. For simplicity, this example
simulates a Poisson process with rate 1 arrival per unit time. Thus, the
mean time between events is 1.0 time unit. In this case the action is very simple, increment a counter that is tracking the number of events that have
occurred.</p>
<p>The code for this example is as follows.</p>
<div class="example">
<p><span id="exm:ch4ex2" class="example"><strong>Example 4.2  (Simulating a Poisson Process) </strong></span>This code example illustrates how to generate a Poisson process by scheduling events that have an inter-event time that is exponentially distributed. The code also illustrates how to use a <code>Counter</code> to collect statistics.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb113-1"><a href="introDEDSdedsKSL.html#cb113-1" tabindex="-1"></a><span class="kw">class</span> SimplePoissonProcess <span class="op">(</span><span class="va">parent</span><span class="op">:</span> <span class="dt">ModelElement</span><span class="op">,</span> <span class="va">name</span><span class="op">:</span> <span class="dt">String</span><span class="op">?</span> <span class="op">=</span> null<span class="op">)</span> <span class="op">:</span></span>
<span id="cb113-2"><a href="introDEDSdedsKSL.html#cb113-2" tabindex="-1"></a>    <span class="dt">ModelElement</span><span class="op">(</span><span class="va">parent</span><span class="op">,</span> <span class="va">name</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb113-3"><a href="introDEDSdedsKSL.html#cb113-3" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">myTBE</span><span class="op">:</span> RandomVariable <span class="op">=</span> RandomVariable<span class="op">(</span><span class="kw">this</span><span class="op">,</span> ExponentialRV<span class="op">(</span><span class="fl">1.0</span><span class="op">))</span></span>
<span id="cb113-4"><a href="introDEDSdedsKSL.html#cb113-4" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">myCount</span><span class="op">:</span> Counter <span class="op">=</span> Counter<span class="op">(</span><span class="kw">this</span><span class="op">,</span> name <span class="op">=</span> <span class="st">&quot;Counts events&quot;</span><span class="op">)</span></span>
<span id="cb113-5"><a href="introDEDSdedsKSL.html#cb113-5" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">myEventHandler</span><span class="op">:</span> EventHandler <span class="op">=</span> EventHandler<span class="op">()</span></span>
<span id="cb113-6"><a href="introDEDSdedsKSL.html#cb113-6" tabindex="-1"></a></span>
<span id="cb113-7"><a href="introDEDSdedsKSL.html#cb113-7" tabindex="-1"></a>    <span class="kw">override</span> <span class="kw">fun</span> <span class="fu">initialize</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb113-8"><a href="introDEDSdedsKSL.html#cb113-8" tabindex="-1"></a>        <span class="kw">super</span><span class="op">.</span>initialize<span class="op">()</span></span>
<span id="cb113-9"><a href="introDEDSdedsKSL.html#cb113-9" tabindex="-1"></a>        schedule<span class="op">(</span>myEventHandler<span class="op">,</span> myTBE<span class="op">.</span>value<span class="op">)</span></span>
<span id="cb113-10"><a href="introDEDSdedsKSL.html#cb113-10" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb113-11"><a href="introDEDSdedsKSL.html#cb113-11" tabindex="-1"></a></span>
<span id="cb113-12"><a href="introDEDSdedsKSL.html#cb113-12" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">inner</span> <span class="kw">class</span> EventHandler <span class="op">:</span> <span class="dt">EventAction</span><span class="op">&lt;</span><span class="dt">Nothing</span><span class="op">&gt;()</span> <span class="op">{</span></span>
<span id="cb113-13"><a href="introDEDSdedsKSL.html#cb113-13" tabindex="-1"></a>        <span class="kw">override</span> <span class="kw">fun</span> <span class="fu">action</span><span class="op">(</span><span class="va">event</span><span class="op">:</span> <span class="dt">KSLEvent</span>&lt;<span class="va">Nothing</span>&gt;<span class="op">)</span> <span class="op">{</span></span>
<span id="cb113-14"><a href="introDEDSdedsKSL.html#cb113-14" tabindex="-1"></a>            myCount<span class="op">.</span>increment<span class="op">()</span></span>
<span id="cb113-15"><a href="introDEDSdedsKSL.html#cb113-15" tabindex="-1"></a>            schedule<span class="op">(</span>myEventHandler<span class="op">,</span> myTBE<span class="op">.</span>value<span class="op">)</span></span>
<span id="cb113-16"><a href="introDEDSdedsKSL.html#cb113-16" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb113-17"><a href="introDEDSdedsKSL.html#cb113-17" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb113-18"><a href="introDEDSdedsKSL.html#cb113-18" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<p>There are a few new elements of this code to
note. First, this example uses two new KSL model elements:
<code>RandomVariable</code> and <code>Counter.</code> A <code>RandomVariable</code> is a sub-class of
<code>ModelElement</code> that is used to represent random variables within a
simulation model. The <code>RandomVariable</code> class must be supplied an instance
of a class that implements the <code>RandomIfc</code> interface. Recall that
implementations of the <code>RandomIfc</code> interface have a <code>value</code> property that
returns a random value and permit random number stream control. The
supplied stream control is important when utilized advanced simulation
statistical methods. For example, stream control is used to advance the
state of the underlying stream to the next substream at the end of every
replication of the model. This helps in synchronizing the use of random
numbers in certain types of experimental setups.</p>
<p>A <code>Counter</code> is also a sub-class of <code>ModelElement</code> which facilitates the incrementing and
decrementing of a variable and the statistical collection of the
variable across replications. The value of the variable associated with
the instance of a <code>Counter</code> is automatically reset to 0.0 at the beginning
of each replication. Lines 2 and 3 within the constructor create the
instances of the <code>RandomVariable</code> and the <code>Counter.</code></p>
<p>Since we are modeling a Poisson process, the <code>initialize()</code> method is used
to schedule the first event using the random variable that represents
the time between events. This occurs on the only line of the <code>initialize()</code> method. The event logic, found in the inner class <code>EventHandler,</code>
causes the counter to be incremented. Then, the next arrival is scheduled
to occur. Thus, it is very easy to model an arrival process using this
pattern.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb114-1"><a href="introDEDSdedsKSL.html#cb114-1" tabindex="-1"></a><span class="kw">fun</span> <span class="fu">main</span><span class="op">(){</span></span>
<span id="cb114-2"><a href="introDEDSdedsKSL.html#cb114-2" tabindex="-1"></a>    <span class="kw">val</span> <span class="va">s</span> <span class="op">=</span> Model<span class="op">(</span><span class="st">&quot;Simple PP&quot;</span><span class="op">)</span></span>
<span id="cb114-3"><a href="introDEDSdedsKSL.html#cb114-3" tabindex="-1"></a>    SimplePoissonProcess<span class="op">(</span>s<span class="op">.</span>model<span class="op">)</span></span>
<span id="cb114-4"><a href="introDEDSdedsKSL.html#cb114-4" tabindex="-1"></a>    s<span class="op">.</span>lengthOfReplication <span class="op">=</span> <span class="fl">20.0</span></span>
<span id="cb114-5"><a href="introDEDSdedsKSL.html#cb114-5" tabindex="-1"></a>    s<span class="op">.</span>numberOfReplications <span class="op">=</span> <span class="dv">50</span></span>
<span id="cb114-6"><a href="introDEDSdedsKSL.html#cb114-6" tabindex="-1"></a>    s<span class="op">.</span>simulate<span class="op">()</span></span>
<span id="cb114-7"><a href="introDEDSdedsKSL.html#cb114-7" tabindex="-1"></a>    println<span class="op">()</span></span>
<span id="cb114-8"><a href="introDEDSdedsKSL.html#cb114-8" tabindex="-1"></a>    <span class="kw">val</span> <span class="va">r</span> <span class="op">=</span> s<span class="op">.</span>simulationReporter</span>
<span id="cb114-9"><a href="introDEDSdedsKSL.html#cb114-9" tabindex="-1"></a>    r<span class="op">.</span>printAcrossReplicationSummaryStatistics<span class="op">()</span></span>
<span id="cb114-10"><a href="introDEDSdedsKSL.html#cb114-10" tabindex="-1"></a>    println<span class="op">(</span><span class="st">&quot;Done!&quot;</span><span class="op">)</span></span>
<span id="cb114-11"><a href="introDEDSdedsKSL.html#cb114-11" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>The last items to note are in the <code>main()</code> method of the class,
where the simulation is created and run. In setting up the simulation,
the run length is set to 20 time units and the number of
replications associated with the simulation is set to 50.</p>
<p>A replication represents a sample path of the simulation that starts and
ends under the same conditions. Thus, statistics collected on each
replication represent independent and identically distributed
observations of the simulation model’s execution. In this example, there
will be 50 observations of the counter observed. Since we have a Poisson
process with rate 1 event per time unit and we are observing the process
for 20 time units, we should expect that about 20 events should occur on
average.</p>
<p>Right after the <code>simulate()</code> method is called, an instance of a <code>SimulationReporter</code> is created for the
simulation. A <code>SimulationReporter</code> has the ability to write out
statistical output associated with the simulation. The code uses the
<code>printAcrossReplicationSummaryStatistics()</code> method to write out a simple
summary report across the 50 replications for the <code>Counter.</code> Note that
using the <code>Counter</code> to count the events provided for automatically
collected statistics across the replications for the counter. As you can
see from the output, the average number of events is close to the
theoretically expected amount.</p>
<pre><code>Across Replication Statistical Summary Report
Tue Nov 29 16:41:25 CST 2022
Simulation Results for Model: MainModel


Number of Replications: 50
Length of Warm up period: 0.0
Length of Replications: 20.0

-------------------------------------------------------------------------------
Counters
-------------------------------------------------------------------------------
Name                                  Average       Std. Dev.    Count 
-------------------------------------------------------------------------------
Counts events                       20.060000        3.235076       50.000000 
-------------------------------------------------------------------------------</code></pre>
</div>
</div>
<div id="introDEDSUpDown" class="section level3 hasAnchor" number="4.4.3">
<h3><span class="header-section-number">4.4.3</span> Up and Down Component Example<a href="introDEDSdedsKSL.html#introDEDSUpDown" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This section further illustrates DEDS modeling with a component of a
system that is subject to random failures.</p>
<div class="example">
<p><span id="exm:ch4ex3" class="example"><strong>Example 4.3  (Up and Down Component) </strong></span>Consider a component subject to random breakdowns that has two states
UP and DOWN. The time until failure is random and governed by an
exponential distribution with a mean of 1.0 time units. This represents
the time that the component is in the UP state. Once the component
fails, the component goes into the DOWN state. The time that the
component spends in the DOWN state is governed by an exponential
distribution with a mean of 2.0 time units. In this model, we are
interested in estimating the proportion of time that the component is in
the UP state and tracking the number of failures over the running time
of the simulation. In addition, we are interested in measuring the cycle
length of the component. The cycle length is the time between entering
the UP state. The cycle length should be equal to the sum of the time
spent in the up and down states.</p>
<div class="figure"><span style="display:block;" id="fig:UpDownComponent"></span>
<img src="figures2/ch4/UpDownComponent.png" alt="Up and Down Component Process"  />
<p class="caption">
Figure 4.7: Up and Down Component Process
</p>
</div>
</div>
<p>Figure <a href="introDEDSdedsKSL.html#fig:UpDownComponent">4.7</a> illustrates the dynamics of the
component over time.</p>
<p>The following steps are useful in developing this model:</p>
<ol style="list-style-type: decimal">
<li>Conceptualize the system/objects and their states</li>
<li>Determine the events and the actions associated with the events</li>
<li>Determine how to represent the system and objects as ModelElements</li>
<li>Determine how to initialize and run the model</li>
</ol>
<p>The first step is to conceptualize how to model the system and the state
of the component. A model element, <code>UpDownComponent,</code> will be used to
model the component. To track the state of the component, it is
necessary to know whether or not the component is UP or DOWN. A variable
can be used to represent this state. However, since we need to estimate
the proportion of time that the component is in the UP state, a
<code>TWResponse</code> variable will be used. <code>TWResponse</code> is a sub-class of
<code>ModelElement</code> that facilitates the observation and statistical collection
of time-based variables. Time-bases variables, which are discussed
further in the next Chapter, are a type of variable that changes values
at particular instants of time. Time-based variables must have
time-weighted statistics collected. Time-weighted statistics weight the
value of the variable by the proportion of time that the variable is set
to a value. To collect statistics on the cycle length we can use a
<code>Response.</code> <code>Response</code> is a sub-class of <code>ModelElement</code> that
can take on values within a simulation model and allows easy statistical
observation of its values during the simulation run. This class provides
observation-based statistical collection. Further discussion of
observation-based statistics will be presented in subsequent sections.</p>
<p>Because this system is so simple the required performance measures can
be easily computed theoretically. According to renewal theory, the
probability of being in the UP state in the long run should be equal to:</p>
<p><span class="math display">\[P(UP) = \frac{\theta_{u}}{\theta_{u}+\theta_{d}} = \frac{1.0}{1.0+2.0}=0.\overline{33}\]</span></p>
<p>where <span class="math inline">\(\theta_{u}\)</span> is the mean of the up-time distribution and
<span class="math inline">\(\theta_{d}\)</span> is the mean of the down-time distribution. In addition, the
expected cycle length should be <span class="math inline">\(\theta_{u}+\theta_{d} = 3.0\)</span>.</p>
<p>The <code>UpDownComponent</code> class extends the <code>ModelElement</code> class and has
object references to instances of <code>RandomVariable,</code> <code>TWResponse,</code>
<code>Response,</code> and <code>Counter</code> classes. Within the constructor of
<code>UpDownComponent,</code> we need to create the instances of these objects for
use within the class, as shown in the following code fragment.</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb116-1"><a href="introDEDSdedsKSL.html#cb116-1" tabindex="-1"></a><span class="kw">class</span> UpDownComponent <span class="op">(</span><span class="va">parent</span><span class="op">:</span> <span class="dt">ModelElement</span><span class="op">,</span> <span class="va">name</span><span class="op">:</span> <span class="dt">String</span><span class="op">?</span> <span class="op">=</span> null<span class="op">)</span> <span class="op">:</span> <span class="dt">ModelElement</span><span class="op">(</span><span class="va">parent</span><span class="op">,</span> <span class="va">name</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb116-2"><a href="introDEDSdedsKSL.html#cb116-2" tabindex="-1"></a>    <span class="kw">companion</span> <span class="kw">object</span> <span class="op">{</span></span>
<span id="cb116-3"><a href="introDEDSdedsKSL.html#cb116-3" tabindex="-1"></a>        <span class="kw">const</span> <span class="kw">val</span> <span class="va">UP</span> <span class="op">=</span> <span class="fl">1.0</span></span>
<span id="cb116-4"><a href="introDEDSdedsKSL.html#cb116-4" tabindex="-1"></a>        <span class="kw">const</span> <span class="kw">val</span> <span class="va">DOWN</span> <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb116-5"><a href="introDEDSdedsKSL.html#cb116-5" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb116-6"><a href="introDEDSdedsKSL.html#cb116-6" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">myUpTime</span><span class="op">:</span> RandomVariable</span>
<span id="cb116-7"><a href="introDEDSdedsKSL.html#cb116-7" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">myDownTime</span><span class="op">:</span> RandomVariable</span>
<span id="cb116-8"><a href="introDEDSdedsKSL.html#cb116-8" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">myState</span><span class="op">:</span> TWResponse</span>
<span id="cb116-9"><a href="introDEDSdedsKSL.html#cb116-9" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">myCycleLength</span><span class="op">:</span> Response</span>
<span id="cb116-10"><a href="introDEDSdedsKSL.html#cb116-10" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">myCountFailures</span><span class="op">:</span> Counter</span>
<span id="cb116-11"><a href="introDEDSdedsKSL.html#cb116-11" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">myUpChangeAction</span> <span class="op">=</span> UpChangeAction<span class="op">()</span></span>
<span id="cb116-12"><a href="introDEDSdedsKSL.html#cb116-12" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">myDownChangeAction</span> <span class="op">=</span> DownChangeAction<span class="op">()</span></span>
<span id="cb116-13"><a href="introDEDSdedsKSL.html#cb116-13" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">var</span> <span class="va">myTimeLastUp</span> <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb116-14"><a href="introDEDSdedsKSL.html#cb116-14" tabindex="-1"></a></span>
<span id="cb116-15"><a href="introDEDSdedsKSL.html#cb116-15" tabindex="-1"></a>    init <span class="op">{</span></span>
<span id="cb116-16"><a href="introDEDSdedsKSL.html#cb116-16" tabindex="-1"></a>        <span class="kw">val</span> <span class="va">utd</span><span class="op">:</span> RVariableIfc <span class="op">=</span> ExponentialRV<span class="op">(</span><span class="fl">1.0</span><span class="op">)</span></span>
<span id="cb116-17"><a href="introDEDSdedsKSL.html#cb116-17" tabindex="-1"></a>        <span class="kw">val</span> <span class="va">dtd</span><span class="op">:</span> RVariableIfc <span class="op">=</span> ExponentialRV<span class="op">(</span><span class="fl">2.0</span><span class="op">)</span></span>
<span id="cb116-18"><a href="introDEDSdedsKSL.html#cb116-18" tabindex="-1"></a>        myUpTime <span class="op">=</span> RandomVariable<span class="op">(</span><span class="kw">this</span><span class="op">,</span> utd<span class="op">,</span> <span class="st">&quot;up time&quot;</span><span class="op">)</span></span>
<span id="cb116-19"><a href="introDEDSdedsKSL.html#cb116-19" tabindex="-1"></a>        myDownTime <span class="op">=</span> RandomVariable<span class="op">(</span><span class="kw">this</span><span class="op">,</span> dtd<span class="op">,</span> <span class="st">&quot;down time&quot;</span><span class="op">)</span></span>
<span id="cb116-20"><a href="introDEDSdedsKSL.html#cb116-20" tabindex="-1"></a>        myState <span class="op">=</span> TWResponse<span class="op">(</span><span class="kw">this</span><span class="op">,</span> name <span class="op">=</span> <span class="st">&quot;state&quot;</span><span class="op">)</span></span>
<span id="cb116-21"><a href="introDEDSdedsKSL.html#cb116-21" tabindex="-1"></a>        myCycleLength <span class="op">=</span> Response<span class="op">(</span><span class="kw">this</span><span class="op">,</span> name <span class="op">=</span> <span class="st">&quot;cycle length&quot;</span><span class="op">)</span></span>
<span id="cb116-22"><a href="introDEDSdedsKSL.html#cb116-22" tabindex="-1"></a>        myCountFailures <span class="op">=</span> Counter<span class="op">(</span><span class="kw">this</span><span class="op">,</span> name <span class="op">=</span> <span class="st">&quot;count failures&quot;</span><span class="op">)</span></span>
<span id="cb116-23"><a href="introDEDSdedsKSL.html#cb116-23" tabindex="-1"></a>    <span class="op">}</span></span></code></pre></div>
<p>Lines 3 and 4 define two constants to represent
the up and down states within the companion object. Lines 5-9 declare additional references
needed to represent the up and down time random variables and the
variables that need statistical collection (<code>myState,</code> <code>myCycleLength,</code> and
<code>myCountFailures</code>). Notice how <strong>unique</strong> names have been provided for the random variables and for the response variables.</p>
<p>Lines 10 and 11 define and create the event actions
associated with the end of the up-time and the end of the down time. The
variable <code>myTimeLastUp</code> is used to keep track of the time that the
component last changed into the UP state, which allows the cycle length
to be collected. In lines 20-23, the random variables for the up and
downtime are constructed using exponential distributions.</p>
<p>As show in the following code listing, the <code>initialize()</code> method sets up the component.The variable <code>myTimeLastUp</code> is set to 0.0 in order to assume that the last time the component was in the UP state started at time 0.0. Thus,
we are assuming that the component starts the simulation in the UP
state. Finally, in line 7 the initial event is scheduled to cause the
component to go down according to the uptime distribution. This is the
first event and then the component can start its regular up and down
pattern. In the action associated with the change to the UP state,
line 18 sets the state to UP. Line 22 schedules the time until the
component goes down. Line 16 causes statistics to be collected on the
value of the cycle length. The code <code>time - myTimeLastUp</code> represents
the elapsed time since the value of <code>myTimeLastUp</code> was set (in line 20),
which represents the cycle length. The <code>DownChangeAction</code> is very similar.
Line 31 counts the number of failures (times that the component has gone
down). Line 32 sets the state of the component to DOWN and line 34
schedules when the component should next transition into the UP state.</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb117-1"><a href="introDEDSdedsKSL.html#cb117-1" tabindex="-1"></a>    <span class="kw">override</span> <span class="kw">fun</span> <span class="fu">initialize</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb117-2"><a href="introDEDSdedsKSL.html#cb117-2" tabindex="-1"></a>        <span class="co">// assume that the component starts in the UP state at time 0.0</span></span>
<span id="cb117-3"><a href="introDEDSdedsKSL.html#cb117-3" tabindex="-1"></a>        myTimeLastUp <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb117-4"><a href="introDEDSdedsKSL.html#cb117-4" tabindex="-1"></a>        myState<span class="op">.</span>value <span class="op">=</span> UP</span>
<span id="cb117-5"><a href="introDEDSdedsKSL.html#cb117-5" tabindex="-1"></a>        <span class="co">// schedule the time that it goes down</span></span>
<span id="cb117-6"><a href="introDEDSdedsKSL.html#cb117-6" tabindex="-1"></a>        schedule<span class="op">(</span>myDownChangeAction<span class="op">,</span> myUpTime<span class="op">.</span>value<span class="op">)</span></span>
<span id="cb117-7"><a href="introDEDSdedsKSL.html#cb117-7" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb117-8"><a href="introDEDSdedsKSL.html#cb117-8" tabindex="-1"></a></span>
<span id="cb117-9"><a href="introDEDSdedsKSL.html#cb117-9" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">inner</span> <span class="kw">class</span> UpChangeAction <span class="op">:</span> <span class="dt">EventAction</span><span class="op">&lt;</span><span class="dt">Nothing</span><span class="op">&gt;()</span> <span class="op">{</span></span>
<span id="cb117-10"><a href="introDEDSdedsKSL.html#cb117-10" tabindex="-1"></a>        <span class="kw">override</span> <span class="kw">fun</span> <span class="fu">action</span><span class="op">(</span><span class="va">event</span><span class="op">:</span> <span class="dt">KSLEvent</span>&lt;<span class="va">Nothing</span>&gt;<span class="op">)</span> <span class="op">{</span></span>
<span id="cb117-11"><a href="introDEDSdedsKSL.html#cb117-11" tabindex="-1"></a>            <span class="co">// this event action represents what happens when the component goes up</span></span>
<span id="cb117-12"><a href="introDEDSdedsKSL.html#cb117-12" tabindex="-1"></a>            <span class="co">// record the cycle length, the time btw up states</span></span>
<span id="cb117-13"><a href="introDEDSdedsKSL.html#cb117-13" tabindex="-1"></a>            myCycleLength<span class="op">.</span>value <span class="op">=</span> time <span class="op">-</span> myTimeLastUp</span>
<span id="cb117-14"><a href="introDEDSdedsKSL.html#cb117-14" tabindex="-1"></a>            <span class="co">// component has just gone up, change its state value</span></span>
<span id="cb117-15"><a href="introDEDSdedsKSL.html#cb117-15" tabindex="-1"></a>            myState<span class="op">.</span>value <span class="op">=</span> UP</span>
<span id="cb117-16"><a href="introDEDSdedsKSL.html#cb117-16" tabindex="-1"></a>            <span class="co">// record the time it went up</span></span>
<span id="cb117-17"><a href="introDEDSdedsKSL.html#cb117-17" tabindex="-1"></a>            myTimeLastUp <span class="op">=</span> time</span>
<span id="cb117-18"><a href="introDEDSdedsKSL.html#cb117-18" tabindex="-1"></a>            <span class="co">// schedule the down state change after the uptime</span></span>
<span id="cb117-19"><a href="introDEDSdedsKSL.html#cb117-19" tabindex="-1"></a>            schedule<span class="op">(</span>myDownChangeAction<span class="op">,</span> myUpTime<span class="op">.</span>value<span class="op">)</span></span>
<span id="cb117-20"><a href="introDEDSdedsKSL.html#cb117-20" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb117-21"><a href="introDEDSdedsKSL.html#cb117-21" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb117-22"><a href="introDEDSdedsKSL.html#cb117-22" tabindex="-1"></a></span>
<span id="cb117-23"><a href="introDEDSdedsKSL.html#cb117-23" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">inner</span> <span class="kw">class</span> DownChangeAction <span class="op">:</span> <span class="dt">EventAction</span><span class="op">&lt;</span><span class="dt">Nothing</span><span class="op">&gt;()</span> <span class="op">{</span></span>
<span id="cb117-24"><a href="introDEDSdedsKSL.html#cb117-24" tabindex="-1"></a>        <span class="kw">override</span> <span class="kw">fun</span> <span class="fu">action</span><span class="op">(</span><span class="va">event</span><span class="op">:</span> <span class="dt">KSLEvent</span>&lt;<span class="va">Nothing</span>&gt;<span class="op">)</span> <span class="op">{</span></span>
<span id="cb117-25"><a href="introDEDSdedsKSL.html#cb117-25" tabindex="-1"></a>            <span class="co">// component has just gone down, change its state value</span></span>
<span id="cb117-26"><a href="introDEDSdedsKSL.html#cb117-26" tabindex="-1"></a>            myCountFailures<span class="op">.</span>increment<span class="op">()</span></span>
<span id="cb117-27"><a href="introDEDSdedsKSL.html#cb117-27" tabindex="-1"></a>            myState<span class="op">.</span>value <span class="op">=</span> DOWN</span>
<span id="cb117-28"><a href="introDEDSdedsKSL.html#cb117-28" tabindex="-1"></a>            <span class="co">// schedule when it goes up after the downtime</span></span>
<span id="cb117-29"><a href="introDEDSdedsKSL.html#cb117-29" tabindex="-1"></a>            schedule<span class="op">(</span>myUpChangeAction<span class="op">,</span> myDownTime<span class="op">.</span>value<span class="op">)</span></span>
<span id="cb117-30"><a href="introDEDSdedsKSL.html#cb117-30" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb117-31"><a href="introDEDSdedsKSL.html#cb117-31" tabindex="-1"></a>    <span class="op">}</span></span></code></pre></div>
<p>The following listing presents the code to construct and execute the
simulation. This code is very similar to previously presented code for
running a simulation. In line 3, the simulation is constructed. Then, in
line 5, the model associated with the simulation is accessed. This model
is then used to construct an instance of the <code>UpDownComponent</code> in line 5.
Finally, lines 7-12 represent setting up the replication parameters of the simulation, running the
simulation, and causing output to be written to the console via a <code>SimulationReporter.</code></p>
<div class="sourceCode" id="cb118"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb118-1"><a href="introDEDSdedsKSL.html#cb118-1" tabindex="-1"></a><span class="kw">fun</span> <span class="fu">main</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb118-2"><a href="introDEDSdedsKSL.html#cb118-2" tabindex="-1"></a>    <span class="co">// create the simulation model</span></span>
<span id="cb118-3"><a href="introDEDSdedsKSL.html#cb118-3" tabindex="-1"></a>    <span class="kw">val</span> <span class="va">m</span> <span class="op">=</span> Model<span class="op">(</span><span class="st">&quot;UpDownComponent&quot;</span><span class="op">)</span></span>
<span id="cb118-4"><a href="introDEDSdedsKSL.html#cb118-4" tabindex="-1"></a>    <span class="co">// create the model element and attach it to the model</span></span>
<span id="cb118-5"><a href="introDEDSdedsKSL.html#cb118-5" tabindex="-1"></a>    <span class="kw">val</span> <span class="va">tv</span> <span class="op">=</span> UpDownComponent<span class="op">(</span>m<span class="op">)</span></span>
<span id="cb118-6"><a href="introDEDSdedsKSL.html#cb118-6" tabindex="-1"></a>    <span class="co">// set the running parameters of the simulation</span></span>
<span id="cb118-7"><a href="introDEDSdedsKSL.html#cb118-7" tabindex="-1"></a>    m<span class="op">.</span>numberOfReplications <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb118-8"><a href="introDEDSdedsKSL.html#cb118-8" tabindex="-1"></a>    m<span class="op">.</span>lengthOfReplication <span class="op">=</span> <span class="fl">5000.0</span></span>
<span id="cb118-9"><a href="introDEDSdedsKSL.html#cb118-9" tabindex="-1"></a>    <span class="co">// tell the simulation model to run</span></span>
<span id="cb118-10"><a href="introDEDSdedsKSL.html#cb118-10" tabindex="-1"></a>    m<span class="op">.</span>simulate<span class="op">()</span></span>
<span id="cb118-11"><a href="introDEDSdedsKSL.html#cb118-11" tabindex="-1"></a></span>
<span id="cb118-12"><a href="introDEDSdedsKSL.html#cb118-12" tabindex="-1"></a>    m<span class="op">.</span>simulationReporter<span class="op">.</span>printAcrossReplicationSummaryStatistics<span class="op">()</span></span>
<span id="cb118-13"><a href="introDEDSdedsKSL.html#cb118-13" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>The results for the average time in the up state and the cycle length are consistent
with the theoretically computed results.</p>
<pre><code>---------------------------------------------------------
Across Replication Statistical Summary Report
Sat Dec 31 18:31:27 EST 2016
Simulation Results for Model: UpDownComponent_Model

Number of Replications: 30
Length of Warm up period: 0.0
Length of Replications: 5000.0
---------------------------------------------------------
Response Variables
---------------------------------------------------------
Name              Average       Std. Dev.       Count 
---------------------------------------------------------
state             0.335537       0.005846       30.000000 
cycle length      2.994080       0.040394       30.000000 
---------------------------------------------------------

---------------------------------------------------------
Counters
---------------------------------------------------------
Name             Average        Std. Dev.    Count 
---------------------------------------------------------
count failures   1670.066667    22.996152    30.000000 
---------------------------------------------------------</code></pre>
<p>This example only scratches the surface of what is possible. Imagine if
there were 20 components. We could easily create 20 instances of the <code>UpDownComponent</code> class and add
them to the model. Even more interesting would be to define the state of
the system based on which components were in the up state. This would be
the beginning of modeling the reliability of a complex system. This type
of modeling can be achieved by making the individual model elements
(e.g. <code>UpDownComponent</code>) more reusable and allow the modeling objects to
interact in complex ways. More complex modeling will be the focus of the
next chapter.</p>
</div>
<div id="introDEDSPharmacy" class="section level3 hasAnchor" number="4.4.4">
<h3><span class="header-section-number">4.4.4</span> Modeling a Simple Queueing System<a href="introDEDSdedsKSL.html#introDEDSPharmacy" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This section present a simple queueuing system considering of one server with a single waiting line. The logic of this system is essentially the same as that presented in Section <a href="QHandExample.html#QHandExample">4.3</a> for the example where we simulated the queue by hand.</p>
<div class="example">
<p><span id="exm:ch4ex4" class="example"><strong>Example 4.4  (Drive Through Pharmacy) </strong></span>This example considers a small pharmacy that has a single line for
waiting customers and only one pharmacist. Assume that customers arrive
at a drive through pharmacy window according to a Poisson distribution
with a mean of 10 per hour. The time that it takes the pharmacist to
serve the customer is random and data has indicated that the time is
well modeled with an exponential distribution with a mean of 3 minutes.
Customers who arrive to the pharmacy are served in the order of arrival
and enough space is available within the parking area of the adjacent
grocery store to accommodate any waiting customers.</p>
<div class="figure"><span style="display:block;" id="fig:DriveThruPharmacy"></span>
<img src="figures2/ch4/ch4fig8.png" alt="Drive Through Pharmacy" width="80%" height="80%" />
<p class="caption">
Figure 4.8: Drive Through Pharmacy
</p>
</div>
</div>
<p>The drive through pharmacy system can be conceptualized as a single
server waiting line system, where the server is the pharmacist. An
idealized representation of this system is shown in Figure <a href="introDEDSdedsKSL.html#fig:DriveThruPharmacy">4.8</a>. If the pharmacist is busy serving a
customer, then additional customers will wait in line. In such a
situation, management might be interested in how long customers wait in
line, before being served by the pharmacist. In addition, management
might want to predict if the number of waiting cars will be large.
Finally, they might want to estimate the utilization of the pharmacist
in order to ensure that he or she is not too busy.</p>
<p>When modeling the system first question to ask is: <em>What is the system</em>?
In this situation, the system is the pharmacist and the potential
customers as idealized in Figure <a href="introDEDSdedsKSL.html#fig:DriveThruPharmacy">4.8</a>. Now you should consider the entities of
the system. An entity is a conceptual thing of importance that flows
through a system potentially using the resources of the system.
Therefore, one of the first questions to ask when developing a model is:
<em>What are the entities</em>? In this situation, the entities are the
customers that need to use the pharmacy. This is because customers are
discrete things that enter the system, flow through the system, and then
depart the system.</p>
<p>Since entities often use things as they flow through the system, a
natural question is to ask: <em>What are the resources that are used by the
entities</em>? A resource is something that is used by the entities and that
may constrain the flow of the entities within the system. Another way to
think of resources is to think of the things that provide service in the
system. In this situation, the entities “use” the pharmacist in order to
get their medicine. Thus, the pharmacist is a resource.</p>
<p>Another useful conceptual modeling tool is the <em>activity diagram</em>. An
<em>activity</em> is an operation that takes time to complete. An activity is
associated with the state of an object over an interval of time.
Activities are defined by the occurrence of two events which represent
the activity’s beginning time and ending time and mark the entrance and
exit of the state associated with the activity. An activity diagram is a
pictorial representation of the process (steps of activities) for an
entity and its interaction with resources while within the system. If
the entity is a temporary entity (i.e. it flows through the system) the
activity diagram is called an activity flow diagram. If the entity is
permanent (i.e. it remains in the system throughout its life) the
activity diagram is called an activity cycle diagram. The notation of an
activity diagram is very simple, and can be augmented as needed to
explain additional concepts:</p>
<ul>
<li><p>Queues: shown as a circle with queue labeled inside</p></li>
<li><p>Activities: shown as a rectangle with appropriate label inside</p></li>
<li><p>Resources: shown as small circles with resource labeled inside</p></li>
<li><p>Lines/arcs: indicating flow (precedence ordering) for engagement of entities in
activities or for obtaining resources. Dotted lines are used to
indicate the seizing and releasing of resources.</p></li>
<li><p>zigzag lines: indicate the creation or destruction of entities</p></li>
</ul>
<p>Activity diagrams are especially useful for illustrating how entities
interact with resources. In addition, activity diagrams help in finding
the events and in identifying some the state changes that must be
modeled. Activity diagrams are easy to build by hand and serve as a
useful communication mechanism. Since they have a simple set of symbols,
it is easy to use an activity diagram to communicate with people who
have little simulation background. Activity diagrams are an excellent
mechanism to document a conceptual model of the system before building
the model.</p>
<div class="figure"><span style="display:block;" id="fig:DTPActivityDiagram"></span>
<img src="figures2/ch4/ch4fig9.png" alt="Activity Diagram of Drive through Pharmacy" width="75%" height="75%" />
<p class="caption">
Figure 4.9: Activity Diagram of Drive through Pharmacy
</p>
</div>
<p>Figure <a href="introDEDSdedsKSL.html#fig:DTPActivityDiagram">4.9</a> shows the activity diagram for the
pharmacy situation. The diagram describes the life of an entity within
the system. The zigzag lines at the top of the diagram indicate the
creation of an entity. Consider following the life of the customer
through the pharmacy. Following the direction of the arrows, the
customers are first created and then enter the queue. Notice that the
diagram clearly shows that there is a queue for the drive-through
customers. You should think of the entity flowing through the diagram.
As it flows through the queue, the customer attempts to start an
activity. In this case, the activity requires a resource. The pharmacist
is shown as a resource (circle) next to the rectangle that represents
the service activity.</p>
<p>The customer requires the resource in order to start its service
activity. This is indicated by the dashed arrow from the pharmacist
(resource) to the top of the service activity rectangle. If the customer
does not get the resource, they wait in the queue. Once they receive the
number of units of the resource requested, they proceed with the
activity. The activity represents a delay of time and in this case the
resource is used throughout the delay. After the activity is completed,
the customer releases the pharmacist (resource). This is indicated by
another dashed arrow, with the direction indicating that the units of the resource aare
being put back or released. After the customer completes its service
activity, the customer leaves the system. This is indicated with the
zigzag lines going to no-where and indicating that the object leaves the
system and is disposed The conceptual model of this system can be
summarized as follows:</p>
<ul>
<li><p>System: The system has a pharmacist that acts as a resource, customers that
act as entities, and a queue to hold the waiting customers. The
state of the system includes the number of customers in the system,
in the queue, and in service.</p></li>
<li><p>Events: Arrivals of customers to the system, which occur within an
inter-event time that is exponentially distributed with a mean of 6
minutes.</p></li>
<li><p>Activities: The service time of the customers are exponentially distributed with
a mean of 3 minutes.</p></li>
<li><p>Conditional delays: A conditional delay occurs when an entity has to wait for a
condition to occur in order to proceed. In this system, the customer
may have to wait in a queue until the pharmacist becomes available.</p></li>
</ul>
<p>With an activity diagram and pseudo-code to
represent a solid conceptual understanding of the system, you can begin
the model development process.</p>
<p>In the current example, pharmacy customers arrive according to a Poisson
process with a mean of <span class="math inline">\(\lambda\)</span> = 10 per hour. According to probability
theory, this implies that the time between arrivals is exponentially
distributed with a mean of (1/<span class="math inline">\(\lambda\)</span>). Thus, for this situation, the
mean time between arrivals is 6 minutes.</p>
<p><span class="math display">\[\frac{1}{\lambda} = \frac{\text{1 hour}}{\text{10 customers}} \times \frac{\text{60 minutes}}{\text{1 hour}} = \frac{\text{6 minutes}}{\text{customers}}\]</span></p>
<p>Let’s assume that the pharmacy is open 24 hours a day, 7 days a week. In
other words, it is always open. In addition, assume that the arrival
process does not vary with respect to time. Finally, assume that
management is interested in understanding the long term behavior of this
system in terms of the average waiting time of customers, the average
number of customers, and the utilization of the pharmacist.</p>
<p>To simulate this situation over time, you must specify how long to run
the model. Ideally, since management is interested in long run
performance, you should run the model for an infinite amount of time to
get long term performance; however, you probably don’t want to wait that
long! For the sake of simplicity, assume that 10,000 hours of operation
is long enough.</p>
<p>The logic of this model follows very closely the discussion of the bank
teller example. Let’s define the following variable:</p>
<ul>
<li>Let <span class="math inline">\(t\)</span> represent the current simulation clock time.</li>
<li>Let <span class="math inline">\(c\)</span> represent the number of available pharmacists</li>
<li>Let <span class="math inline">\(N(t)\)</span> represent the number of customers in the system at any time <span class="math inline">\(t\)</span>.</li>
<li>Let <span class="math inline">\(Q(t)\)</span> represent the number of customers waiting in line for the at any time <span class="math inline">\(t\)</span>.</li>
<li>Let <span class="math inline">\(B(t)\)</span> represent the number of pharmacists that are busy at any time <span class="math inline">\(t\)</span>.</li>
<li>Let <span class="math inline">\(TBA_i\)</span> represent the time between arrivals, which we will assume is exponentially distributed with a mean of 6 minutes.</li>
<li>Let <span class="math inline">\(ST_i\)</span> represent the service time of the <span class="math inline">\(i^{th}\)</span> customer, which we will assume is exponentially distributed with a mean of 3 minutes.</li>
<li>Let <span class="math inline">\(E_a\)</span> represent the arrival event.</li>
<li>Let <span class="math inline">\(E_s\)</span> represent the end of service event.</li>
<li>Let <span class="math inline">\(K\)</span> represent the number of customers processed</li>
</ul>
<p>Within the KSL model, we will model <span class="math inline">\(N(t)\)</span>, <span class="math inline">\(Q(t)\)</span>, and <span class="math inline">\(B(t)\)</span> with instances of the <code>TWResponse</code> class The use of the <code>TWResponse</code> class will automate the collection of time averages for these variables as discussed in Section <a href="QHandExample.html#QHandExample">4.3</a>. Both <span class="math inline">\(TBA_i\)</span> and <span class="math inline">\(ST_i\)</span> will be modeled with instances of the <code>RandomVariable</code> class instantiated with instances of the <code>ExponentialRV</code> class. The pseudo-code for this situation is as follows.</p>
<p><strong>Arrival Actions for Event <span class="math inline">\(E_a\)</span></strong></p>
<pre><code>N(t) = N(t) + 1
if (B(t) &lt; c)
  B(t) = B(t) + 1
  schedule E_s at time t + ST_i
else
  Q(t) = Q(t) + 1
endif
schedule E_a at time t + TBA_i</code></pre>
<p>In the arrival actions, first we increment the number of customers in the system. Then, the number of busy pharmacists is compared to the number of pharmacists that are available. If there is an available pharmacist, the number of busy pharmacists is incremented and the end of service for the arriving customer is scheduled. If all the pharmacists are busy, then the customer must wait in the queue, which is indicated by incrementing the number in the queue. To continue the arrival process, the arrival of the next customer is scheduled.</p>
<p><strong>End of Service Actions for Event <span class="math inline">\(E_s\)</span></strong></p>
<pre><code>B(t) = B(t) - 1
if (Q(t) &gt; 0)
  Q(t) = Q(t) - 1
  B(t) = B(t) + 1
  schedule E_s at time t + ST_i
endif
N(t) = N(t) - 1
K = K + 1</code></pre>
<p>In the end of service actions, the number of busy pharmacists is decreased by one because the pharmacist has completed service for the departing customer. Then the queue is checked to see if it has customers. If the queue has customers, then a customer is removed from the queue (decreasing the number in queue) and the number of busy pharmacists is increased by one. In addition, the end of service event is scheduled. Finally, the number of customers in the system is decremented and the count of the total customers processes is incremented.</p>
<p>The following code listing presents the definition of the variables and their creation within the KSL. The drive through pharmacy system is modeled via a class <code>DriveThroughPharmacy</code> that sub-classes from <code>ModelElement</code> to provide the ability to schedule events. The <code>RandomVariable</code> instances <code>myServiceRV</code> and <code>myArrivalRV</code> are used to represent the <span class="math inline">\(ST_i\)</span> and <span class="math inline">\(TBA_i\)</span> random variables. <span class="math inline">\(B(t)\)</span>, <span class="math inline">\(N(t)\)</span>, and <span class="math inline">\(Q(t)\)</span> are modeled with the objects <code>myNumBusy,</code> <code>myNS,</code> and <code>myQ,</code> respectively, all instances of the <code>TWResponse</code> class. The tabulation of the number of processed customers, <span class="math inline">\(K\)</span>, is modeled with a KSL counter, using the <code>Counter</code> class.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb122-1"><a href="introDEDSdedsKSL.html#cb122-1" tabindex="-1"></a><span class="kw">class</span> DriveThroughPharmacy<span class="op">(</span></span>
<span id="cb122-2"><a href="introDEDSdedsKSL.html#cb122-2" tabindex="-1"></a>    <span class="va">parent</span><span class="op">:</span> <span class="dt">ModelElement</span><span class="op">,</span> <span class="va">numServers</span><span class="op">:</span> <span class="dt">Int</span> <span class="op">=</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb122-3"><a href="introDEDSdedsKSL.html#cb122-3" tabindex="-1"></a>    <span class="va">timeBtwArrivals</span><span class="op">:</span> <span class="dt">RandomIfc</span> <span class="op">=</span> ExponentialRV<span class="op">(</span><span class="fl">1.0</span>, <span class="dv">1</span><span class="op">),</span></span>
<span id="cb122-4"><a href="introDEDSdedsKSL.html#cb122-4" tabindex="-1"></a>    <span class="va">serviceTime</span><span class="op">:</span> <span class="dt">RandomIfc</span> <span class="op">=</span> ExponentialRV<span class="op">(</span><span class="fl">0.5</span>, <span class="dv">2</span><span class="op">),</span></span>
<span id="cb122-5"><a href="introDEDSdedsKSL.html#cb122-5" tabindex="-1"></a>    <span class="va">name</span><span class="op">:</span> <span class="dt">String</span><span class="op">?</span> <span class="op">=</span> null</span>
<span id="cb122-6"><a href="introDEDSdedsKSL.html#cb122-6" tabindex="-1"></a><span class="op">)</span> <span class="op">:</span> <span class="dt">ModelElement</span><span class="op">(</span><span class="va">parent</span><span class="op">,</span> <span class="va">name</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb122-7"><a href="introDEDSdedsKSL.html#cb122-7" tabindex="-1"></a>    init<span class="op">{</span></span>
<span id="cb122-8"><a href="introDEDSdedsKSL.html#cb122-8" tabindex="-1"></a>        require<span class="op">(</span>numServers <span class="op">&gt;=</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span><span class="st">&quot;The number of pharmacists must be &gt;= 1&quot;</span><span class="op">}</span></span>
<span id="cb122-9"><a href="introDEDSdedsKSL.html#cb122-9" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb122-10"><a href="introDEDSdedsKSL.html#cb122-10" tabindex="-1"></a>    <span class="kw">var</span> <span class="va">numPharmacists</span> <span class="op">=</span> numServers</span>
<span id="cb122-11"><a href="introDEDSdedsKSL.html#cb122-11" tabindex="-1"></a>        <span class="kw">set</span><span class="op">(</span>value<span class="op">)</span> <span class="op">{</span></span>
<span id="cb122-12"><a href="introDEDSdedsKSL.html#cb122-12" tabindex="-1"></a>            require<span class="op">(</span>value <span class="op">&gt;=</span> <span class="dv">1</span><span class="op">){</span><span class="st">&quot;The number of pharmacists must be &gt;= 1&quot;</span><span class="op">}</span></span>
<span id="cb122-13"><a href="introDEDSdedsKSL.html#cb122-13" tabindex="-1"></a>            field <span class="op">=</span> value</span>
<span id="cb122-14"><a href="introDEDSdedsKSL.html#cb122-14" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb122-15"><a href="introDEDSdedsKSL.html#cb122-15" tabindex="-1"></a></span>
<span id="cb122-16"><a href="introDEDSdedsKSL.html#cb122-16" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">myServiceRV</span><span class="op">:</span> RandomVariable <span class="op">=</span> RandomVariable<span class="op">(</span><span class="kw">this</span><span class="op">,</span> serviceTime<span class="op">,</span> <span class="st">&quot;Service RV&quot;</span><span class="op">)</span></span>
<span id="cb122-17"><a href="introDEDSdedsKSL.html#cb122-17" tabindex="-1"></a>    <span class="kw">val</span> <span class="va">serviceRV</span><span class="op">:</span> RandomSourceCIfc</span>
<span id="cb122-18"><a href="introDEDSdedsKSL.html#cb122-18" tabindex="-1"></a>        <span class="kw">get</span><span class="op">()</span> <span class="op">=</span> myServiceRV</span>
<span id="cb122-19"><a href="introDEDSdedsKSL.html#cb122-19" tabindex="-1"></a></span>
<span id="cb122-20"><a href="introDEDSdedsKSL.html#cb122-20" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">myArrivalRV</span><span class="op">:</span> RandomVariable <span class="op">=</span> RandomVariable<span class="op">(</span><span class="kw">this</span><span class="op">,</span> timeBtwArrivals<span class="op">,</span> <span class="st">&quot;Arrival RV&quot;</span><span class="op">)</span></span>
<span id="cb122-21"><a href="introDEDSdedsKSL.html#cb122-21" tabindex="-1"></a>    <span class="kw">val</span> <span class="va">arrivalRV</span><span class="op">:</span> RandomSourceCIfc</span>
<span id="cb122-22"><a href="introDEDSdedsKSL.html#cb122-22" tabindex="-1"></a>        <span class="kw">get</span><span class="op">()</span> <span class="op">=</span> myArrivalRV</span>
<span id="cb122-23"><a href="introDEDSdedsKSL.html#cb122-23" tabindex="-1"></a></span>
<span id="cb122-24"><a href="introDEDSdedsKSL.html#cb122-24" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">myNumInQ</span><span class="op">:</span> TWResponse <span class="op">=</span> TWResponse<span class="op">(</span><span class="kw">this</span><span class="op">,</span> <span class="st">&quot;PharmacyQ&quot;</span><span class="op">)</span></span>
<span id="cb122-25"><a href="introDEDSdedsKSL.html#cb122-25" tabindex="-1"></a>    <span class="kw">val</span> <span class="va">numInQ</span><span class="op">:</span> TWResponseCIfc</span>
<span id="cb122-26"><a href="introDEDSdedsKSL.html#cb122-26" tabindex="-1"></a>        <span class="kw">get</span><span class="op">()</span> <span class="op">=</span> myNumInQ</span>
<span id="cb122-27"><a href="introDEDSdedsKSL.html#cb122-27" tabindex="-1"></a></span>
<span id="cb122-28"><a href="introDEDSdedsKSL.html#cb122-28" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">myNumBusy</span><span class="op">:</span> TWResponse <span class="op">=</span> TWResponse<span class="op">(</span><span class="kw">this</span><span class="op">,</span> <span class="st">&quot;NumBusy&quot;</span><span class="op">)</span></span>
<span id="cb122-29"><a href="introDEDSdedsKSL.html#cb122-29" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">myNS</span><span class="op">:</span> TWResponse <span class="op">=</span> TWResponse<span class="op">(</span><span class="kw">this</span><span class="op">,</span> <span class="st">&quot;# in System&quot;</span><span class="op">)</span></span>
<span id="cb122-30"><a href="introDEDSdedsKSL.html#cb122-30" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">myNumCustomers</span><span class="op">:</span> Counter <span class="op">=</span> Counter<span class="op">(</span><span class="kw">this</span><span class="op">,</span> name <span class="op">=</span> <span class="st">&quot;Num Served&quot;</span><span class="op">)</span></span>
<span id="cb122-31"><a href="introDEDSdedsKSL.html#cb122-31" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">myTotal</span><span class="op">:</span> AggregateTWResponse <span class="op">=</span> AggregateTWResponse<span class="op">(</span><span class="kw">this</span><span class="op">,</span> <span class="st">&quot;aggregate # in system&quot;</span><span class="op">)</span></span>
<span id="cb122-32"><a href="introDEDSdedsKSL.html#cb122-32" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">myArrivalEventAction</span><span class="op">:</span> ArrivalEventAction <span class="op">=</span> ArrivalEventAction<span class="op">()</span></span>
<span id="cb122-33"><a href="introDEDSdedsKSL.html#cb122-33" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">myEndServiceEventAction</span><span class="op">:</span> EndServiceEventAction <span class="op">=</span> EndServiceEventAction<span class="op">()</span></span>
<span id="cb122-34"><a href="introDEDSdedsKSL.html#cb122-34" tabindex="-1"></a></span>
<span id="cb122-35"><a href="introDEDSdedsKSL.html#cb122-35" tabindex="-1"></a>    init <span class="op">{</span></span>
<span id="cb122-36"><a href="introDEDSdedsKSL.html#cb122-36" tabindex="-1"></a>        myTotal<span class="op">.</span>observe<span class="op">(</span>myNumInQ<span class="op">)</span></span>
<span id="cb122-37"><a href="introDEDSdedsKSL.html#cb122-37" tabindex="-1"></a>        myTotal<span class="op">.</span>observe<span class="op">(</span>myNumBusy<span class="op">)</span></span>
<span id="cb122-38"><a href="introDEDSdedsKSL.html#cb122-38" tabindex="-1"></a>    <span class="op">}</span></span></code></pre></div>
<p>The main constructor of the <code>DriveThroughPharmacy</code> class checks for valid input parameters, instantiates the KSL model elements, and instantiates the arrival and end of service event actions.</p>
<p>As can be seen in the following code, the arrival event is represented by the inner class <code>ArrivalEventAction</code> extending the abstract class <code>EventAction</code> to model the arrival event action. The Kotlin code closely follows the pseudo-code. Notice the use of the <code>initialize()</code> method to schedule the first arrival event. The <code>initialize()</code> method is called just prior to the start of the replication for the simulation. The modeler can think of the <code>initialize()</code> method as being called at time <span class="math inline">\(t^{-}=0\)</span>.</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb123-1"><a href="introDEDSdedsKSL.html#cb123-1" tabindex="-1"></a>    <span class="kw">override</span> <span class="kw">fun</span> <span class="fu">initialize</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb123-2"><a href="introDEDSdedsKSL.html#cb123-2" tabindex="-1"></a>        <span class="kw">super</span><span class="op">.</span>initialize<span class="op">()</span></span>
<span id="cb123-3"><a href="introDEDSdedsKSL.html#cb123-3" tabindex="-1"></a>        <span class="co">// start the arrivals</span></span>
<span id="cb123-4"><a href="introDEDSdedsKSL.html#cb123-4" tabindex="-1"></a>        schedule<span class="op">(</span>myArrivalEventAction<span class="op">,</span> myArrivalRV<span class="op">)</span></span>
<span id="cb123-5"><a href="introDEDSdedsKSL.html#cb123-5" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb123-6"><a href="introDEDSdedsKSL.html#cb123-6" tabindex="-1"></a></span>
<span id="cb123-7"><a href="introDEDSdedsKSL.html#cb123-7" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">inner</span> <span class="kw">class</span> ArrivalEventAction <span class="op">:</span> <span class="dt">EventAction</span><span class="op">&lt;</span><span class="dt">Nothing</span><span class="op">&gt;()</span> <span class="op">{</span></span>
<span id="cb123-8"><a href="introDEDSdedsKSL.html#cb123-8" tabindex="-1"></a>        <span class="kw">override</span> <span class="kw">fun</span> <span class="fu">action</span><span class="op">(</span><span class="va">event</span><span class="op">:</span> <span class="dt">KSLEvent</span>&lt;<span class="va">Nothing</span>&gt;<span class="op">)</span> <span class="op">{</span></span>
<span id="cb123-9"><a href="introDEDSdedsKSL.html#cb123-9" tabindex="-1"></a>            myNS<span class="op">.</span>increment<span class="op">()</span> <span class="co">// new customer arrived</span></span>
<span id="cb123-10"><a href="introDEDSdedsKSL.html#cb123-10" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>myNumBusy<span class="op">.</span>value <span class="op">&lt;</span> numPharmacists<span class="op">)</span> <span class="op">{</span> <span class="co">// server available</span></span>
<span id="cb123-11"><a href="introDEDSdedsKSL.html#cb123-11" tabindex="-1"></a>                myNumBusy<span class="op">.</span>increment<span class="op">()</span> <span class="co">// make server busy</span></span>
<span id="cb123-12"><a href="introDEDSdedsKSL.html#cb123-12" tabindex="-1"></a>                <span class="co">// schedule end of service</span></span>
<span id="cb123-13"><a href="introDEDSdedsKSL.html#cb123-13" tabindex="-1"></a>                schedule<span class="op">(</span>myEndServiceEventAction<span class="op">,</span> myServiceRV<span class="op">)</span></span>
<span id="cb123-14"><a href="introDEDSdedsKSL.html#cb123-14" tabindex="-1"></a>            <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb123-15"><a href="introDEDSdedsKSL.html#cb123-15" tabindex="-1"></a>                myNumInQ<span class="op">.</span>increment<span class="op">()</span> <span class="co">// customer must wait</span></span>
<span id="cb123-16"><a href="introDEDSdedsKSL.html#cb123-16" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb123-17"><a href="introDEDSdedsKSL.html#cb123-17" tabindex="-1"></a>            <span class="co">// always schedule the next arrival</span></span>
<span id="cb123-18"><a href="introDEDSdedsKSL.html#cb123-18" tabindex="-1"></a>            schedule<span class="op">(</span>myArrivalEventAction<span class="op">,</span> myArrivalRV<span class="op">)</span></span>
<span id="cb123-19"><a href="introDEDSdedsKSL.html#cb123-19" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb123-20"><a href="introDEDSdedsKSL.html#cb123-20" tabindex="-1"></a>    <span class="op">}</span></span></code></pre></div>
<p>In line 4 the first arrival event is scheduled
within the <code>initialize()</code> method. Within the <code>ArrivalEventAction</code> class implementation of
the <code>action()</code> method, we see the number of customers in the system incremented, the status of the pharmacists checked, and customers either starting service or having to wait in the queue.</p>
<p>The following code fragment presents the logic associated with the end
of service event.</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb124-1"><a href="introDEDSdedsKSL.html#cb124-1" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">inner</span> <span class="kw">class</span> EndServiceEventAction <span class="op">:</span> <span class="dt">EventAction</span><span class="op">&lt;</span><span class="dt">Nothing</span><span class="op">&gt;()</span> <span class="op">{</span></span>
<span id="cb124-2"><a href="introDEDSdedsKSL.html#cb124-2" tabindex="-1"></a>        <span class="kw">override</span> <span class="kw">fun</span> <span class="fu">action</span><span class="op">(</span><span class="va">event</span><span class="op">:</span> <span class="dt">KSLEvent</span>&lt;<span class="va">Nothing</span>&gt;<span class="op">)</span> <span class="op">{</span></span>
<span id="cb124-3"><a href="introDEDSdedsKSL.html#cb124-3" tabindex="-1"></a>            myNumBusy<span class="op">.</span>decrement<span class="op">()</span> <span class="co">// customer is leaving server is freed</span></span>
<span id="cb124-4"><a href="introDEDSdedsKSL.html#cb124-4" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>myNumInQ<span class="op">.</span>value <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> <span class="co">// queue is not empty</span></span>
<span id="cb124-5"><a href="introDEDSdedsKSL.html#cb124-5" tabindex="-1"></a>                myNumInQ<span class="op">.</span>decrement<span class="op">()</span> <span class="co">//remove the next customer</span></span>
<span id="cb124-6"><a href="introDEDSdedsKSL.html#cb124-6" tabindex="-1"></a>                myNumBusy<span class="op">.</span>increment<span class="op">()</span> <span class="co">// make server busy</span></span>
<span id="cb124-7"><a href="introDEDSdedsKSL.html#cb124-7" tabindex="-1"></a>                <span class="co">// schedule end of service</span></span>
<span id="cb124-8"><a href="introDEDSdedsKSL.html#cb124-8" tabindex="-1"></a>                schedule<span class="op">(</span>myEndServiceEventAction<span class="op">,</span> myServiceRV<span class="op">)</span></span>
<span id="cb124-9"><a href="introDEDSdedsKSL.html#cb124-9" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb124-10"><a href="introDEDSdedsKSL.html#cb124-10" tabindex="-1"></a>            myNS<span class="op">.</span>decrement<span class="op">()</span> <span class="co">// customer left system</span></span>
<span id="cb124-11"><a href="introDEDSdedsKSL.html#cb124-11" tabindex="-1"></a>            myNumCustomers<span class="op">.</span>increment<span class="op">()</span></span>
<span id="cb124-12"><a href="introDEDSdedsKSL.html#cb124-12" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb124-13"><a href="introDEDSdedsKSL.html#cb124-13" tabindex="-1"></a>    <span class="op">}</span></span></code></pre></div>
<p>First the number of busy servers is decremented
because a pharmacist is becoming idle. Then, the queue is
checked to see if it is not empty. If the queue is not empty, then the
next customer must be removed, the server made busy again
and the customer scheduled into service. Finally, the <code>TWResponse</code> variable,
<code>myNS,</code> indicates that a customer has departed the system and the <code>Counter</code> for the number of customers processed is incremented.</p>
<p>The following method can be used to run the model based on a desired number of servers.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb125-1"><a href="introDEDSdedsKSL.html#cb125-1" tabindex="-1"></a><span class="kw">fun</span> <span class="fu">main</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb125-2"><a href="introDEDSdedsKSL.html#cb125-2" tabindex="-1"></a>    <span class="kw">val</span> <span class="va">model</span> <span class="op">=</span> Model<span class="op">(</span><span class="st">&quot;Drive Through Pharmacy&quot;</span><span class="op">,</span> autoCSVReports <span class="op">=</span> <span class="kw">true</span><span class="op">)</span></span>
<span id="cb125-3"><a href="introDEDSdedsKSL.html#cb125-3" tabindex="-1"></a>    model<span class="op">.</span>numberOfReplications <span class="op">=</span> <span class="dv">30</span></span>
<span id="cb125-4"><a href="introDEDSdedsKSL.html#cb125-4" tabindex="-1"></a>    model<span class="op">.</span>lengthOfReplication <span class="op">=</span> <span class="fl">20000.0</span></span>
<span id="cb125-5"><a href="introDEDSdedsKSL.html#cb125-5" tabindex="-1"></a>    model<span class="op">.</span>lengthOfReplicationWarmUp <span class="op">=</span> <span class="fl">5000.0</span></span>
<span id="cb125-6"><a href="introDEDSdedsKSL.html#cb125-6" tabindex="-1"></a>    <span class="co">// add DriveThroughPharmacy to the main model</span></span>
<span id="cb125-7"><a href="introDEDSdedsKSL.html#cb125-7" tabindex="-1"></a>    <span class="kw">val</span> <span class="va">dtp</span> <span class="op">=</span> DriveThroughPharmacy<span class="op">(</span>model<span class="op">,</span> <span class="dv">1</span><span class="op">)</span></span>
<span id="cb125-8"><a href="introDEDSdedsKSL.html#cb125-8" tabindex="-1"></a>    dtp<span class="op">.</span>arrivalRV<span class="op">.</span>initialRandomSource <span class="op">=</span> ExponentialRV<span class="op">(</span><span class="fl">6.0</span><span class="op">,</span> <span class="dv">1</span><span class="op">)</span></span>
<span id="cb125-9"><a href="introDEDSdedsKSL.html#cb125-9" tabindex="-1"></a>    dtp<span class="op">.</span>serviceRV<span class="op">.</span>initialRandomSource <span class="op">=</span> ExponentialRV<span class="op">(</span><span class="fl">3.0</span><span class="op">,</span> <span class="dv">2</span><span class="op">)</span></span>
<span id="cb125-10"><a href="introDEDSdedsKSL.html#cb125-10" tabindex="-1"></a>    model<span class="op">.</span>simulate<span class="op">()</span></span>
<span id="cb125-11"><a href="introDEDSdedsKSL.html#cb125-11" tabindex="-1"></a>    model<span class="op">.</span>print<span class="op">()</span></span>
<span id="cb125-12"><a href="introDEDSdedsKSL.html#cb125-12" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>The results indicate that the utilization of the pharmacist is about 50%. This means
that about 50% of the time the pharmacist was busy. For this type of
system, this is probably not a bad utilization, considering that the
pharmacist probably has other in-store duties. The reports also indicate
that there was less than one customer on average waiting for service.</p>
<pre><code>Name: Drive Through Pharmacy
Last Executive stopping message: 
    Scheduled end event occurred at time 20000.0
Replication Process Information:
-------------------------------
Iterative Process Name: Model: Replication Process
Beginning Execution Time: 2022-11-29T22:58:06.768592Z
End Execution Time: 2022-11-29T22:58:07.479916Z
Elapsed Execution Time: 711.324ms
Max Allowed Execution Time: Not Specified
Done Flag: true
Has Next: false
Current State: EndedState
Ending Status Indicator: COMPLETED_ALL_STEPS
Stopping Message: Completed all steps.
-------------------------------
Experiment Name: Experiment_1
Experiment ID: 2
Planned number of replications: 30
Replication initialization option: true
Antithetic option: false
Reset start stream option: false
Reset next sub-stream option: true
Number of stream advancements: 0
Planned time horizon for replication: 20000.0
Warm up time period for replication: 5000.0
Maximum allowed replication execution time not specified.
Current Replication Number: 30
-------------------------------

Half-Width Statistical Summary Report - Confidence Level (95.000)% 

Name                                                Count         Average      Half-Width 
---------------------------------------------------------------------------------------------------- 
PharmacyQ                                              30          0.5025          0.0222 
NumBusy                                                30          0.5035          0.0060 
# in System                                            30          1.0060          0.0271 
aggregate # in system                                  30          1.0060          0.0271 
Num Served                                             30       2513.2667         17.6883 
---------------------------------------------------------------------------------------------------- </code></pre>
<p>This single server waiting line system is a very common situation in
practice. In fact, this exact situation has been studied mathematically
through a branch of operations research called queuing theory. For
specific modeling situations, formulas for the long term performance of
queuing systems can be derived. This particular pharmacy model happens
to be an example of an M/M/1 queuing model. The first M stands for
Markov arrivals, the second M stands for Markov service times, and the 1
represents a single server. Markov was a famous mathematician who
examined the exponential distribution and its properties. According to
queuing theory, the expected number of customer in queue, <span class="math inline">\(L_q\)</span>, for the
M/M/1 model is:</p>
<p><span class="math display">\[
\begin{aligned}
\label{ch4:eq:mm1}
L_q &amp; = \dfrac{\rho^2}{1 - \rho} \\
\rho &amp; = \lambda/\mu \\
\lambda &amp; = \text{arrival rate to queue} \\
\mu &amp; = \text{service rate}
\end{aligned}
\]</span></p>
<p>In addition, the expected waiting time in queue is given by
<span class="math inline">\(W_q = L_q/\lambda\)</span>. In the pharmacy model, <span class="math inline">\(\lambda\)</span> = 1/6, i.e. 1
customer every 6 minutes on average, and <span class="math inline">\(\mu\)</span> = 1/3, i.e. 1 customer
every 3 minutes on average. The quantity, <span class="math inline">\(\rho\)</span>, is called the
utilization of the server. Using these values in the formulas for <span class="math inline">\(L_q\)</span>
and <span class="math inline">\(W_q\)</span> results in:</p>
<p><span class="math display">\[\begin{aligned}
\rho &amp; = 0.5 \\
L_q  &amp; = \dfrac{0.5 \times 0.5}{1 - 0.5} = 0.5  \\
W_q &amp; = \dfrac{0.5}{1/6} = 3 \: \text{minutes}\end{aligned}\]</span></p>
<p>In comparing these analytical results with the simulation results, you
can see that they match to within statistical error. The appendix presents an analytical treatment of queues. These analytical results are available for this special case
because the arrival and service distributions are exponential; however,
simple analytical results are not available for many common
distributions, e.g. lognormal. With simulation, you can easily estimate
the above quantities as well as many other performance measures of
interest for wide ranging queuing situations. For example, through
simulation you can easily estimate the chance that there are 3 or more
cars waiting.</p>
</div>
<div id="more-details-about-the-pharmacy-model-implementation" class="section level3 hasAnchor" number="4.4.5">
<h3><span class="header-section-number">4.4.5</span> More Details About the Pharmacy Model Implementation<a href="introDEDSdedsKSL.html#more-details-about-the-pharmacy-model-implementation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are a few additional concepts to note about the implementation of the pharmacy model. The first set of items to notice is how the random variables and statistical response variables were implemented. In the following code snippet, we see that random variables for the service time and time between arrives were defined using Kotlin private properties. This encapsulates the random variables within the simulation model. However, it can be useful to allow users of the code to have some access to the underlying objects. For this purpose, two public properties <code>serviceRV</code> and <code>arrivalRV</code> were defined.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb127-1"><a href="introDEDSdedsKSL.html#cb127-1" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">myServiceRV</span><span class="op">:</span> RandomVariable <span class="op">=</span> RandomVariable<span class="op">(</span><span class="kw">this</span><span class="op">,</span> serviceTime<span class="op">,</span> <span class="st">&quot;Service RV&quot;</span><span class="op">)</span></span>
<span id="cb127-2"><a href="introDEDSdedsKSL.html#cb127-2" tabindex="-1"></a>    <span class="kw">val</span> <span class="va">serviceRV</span><span class="op">:</span> RandomSourceCIfc</span>
<span id="cb127-3"><a href="introDEDSdedsKSL.html#cb127-3" tabindex="-1"></a>        <span class="kw">get</span><span class="op">()</span> <span class="op">=</span> myServiceRV</span>
<span id="cb127-4"><a href="introDEDSdedsKSL.html#cb127-4" tabindex="-1"></a></span>
<span id="cb127-5"><a href="introDEDSdedsKSL.html#cb127-5" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">myArrivalRV</span><span class="op">:</span> RandomVariable <span class="op">=</span> RandomVariable<span class="op">(</span><span class="kw">this</span><span class="op">,</span> timeBtwArrivals<span class="op">,</span> <span class="st">&quot;Arrival RV&quot;</span><span class="op">)</span></span>
<span id="cb127-6"><a href="introDEDSdedsKSL.html#cb127-6" tabindex="-1"></a>    <span class="kw">val</span> <span class="va">arrivalRV</span><span class="op">:</span> RandomSourceCIfc</span>
<span id="cb127-7"><a href="introDEDSdedsKSL.html#cb127-7" tabindex="-1"></a>        <span class="kw">get</span><span class="op">()</span> <span class="op">=</span> myArrivalRV</span></code></pre></div>
<p>These properties return instances of the <code>RandomSourceCIfc</code> interface. This interface limits what can be changed about the underlying random variable. This interface allows the user to change the initial random source associated with the random variable. As noted in the interface comments, this needs to be controlled in such a manner to ensure that each replication starts with the same initial conditions. A naive user may not realize the implications of these changes and thus there are some limitations imposed.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb128-1"><a href="introDEDSdedsKSL.html#cb128-1" tabindex="-1"></a><span class="kw">interface</span> RandomSourceCIfc <span class="op">:</span> <span class="dt">StreamOptionIfc</span><span class="op">,</span> <span class="dt">IdentityIfc</span> <span class="op">{</span></span>
<span id="cb128-2"><a href="introDEDSdedsKSL.html#cb128-2" tabindex="-1"></a></span>
<span id="cb128-3"><a href="introDEDSdedsKSL.html#cb128-3" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb128-4"><a href="introDEDSdedsKSL.html#cb128-4" tabindex="-1"></a><span class="co">     * RandomIfc provides a reference to the underlying source of randomness</span></span>
<span id="cb128-5"><a href="introDEDSdedsKSL.html#cb128-5" tabindex="-1"></a><span class="co">     * to initialize each replication.</span></span>
<span id="cb128-6"><a href="introDEDSdedsKSL.html#cb128-6" tabindex="-1"></a><span class="co">     * Controls the underlying RandomIfc source for the RandomVariable. This is the</span></span>
<span id="cb128-7"><a href="introDEDSdedsKSL.html#cb128-7" tabindex="-1"></a><span class="co">     * source to which each replication will be initialized.  This is only used</span></span>
<span id="cb128-8"><a href="introDEDSdedsKSL.html#cb128-8" tabindex="-1"></a><span class="co">     * when the replication is initialized. Changing the reference has no effect</span></span>
<span id="cb128-9"><a href="introDEDSdedsKSL.html#cb128-9" tabindex="-1"></a><span class="co">     * during a replication, since the random variable will continue to use</span></span>
<span id="cb128-10"><a href="introDEDSdedsKSL.html#cb128-10" tabindex="-1"></a><span class="co">     * the reference returned by property randomSource.  Please also see the</span></span>
<span id="cb128-11"><a href="introDEDSdedsKSL.html#cb128-11" tabindex="-1"></a><span class="co">     * discussion in the class documentation.</span></span>
<span id="cb128-12"><a href="introDEDSdedsKSL.html#cb128-12" tabindex="-1"></a><span class="co">     * &lt;p&gt;</span></span>
<span id="cb128-13"><a href="introDEDSdedsKSL.html#cb128-13" tabindex="-1"></a><span class="co">     * </span><span class="al">WARNING</span><span class="co">: If this is used during an experiment to change the characteristics of</span></span>
<span id="cb128-14"><a href="introDEDSdedsKSL.html#cb128-14" tabindex="-1"></a><span class="co">     * the random source, then each replication may not necessarily start in the</span></span>
<span id="cb128-15"><a href="introDEDSdedsKSL.html#cb128-15" tabindex="-1"></a><span class="co">     * same initial state.  It is recommended that this be used only prior to executing experiments.</span></span>
<span id="cb128-16"><a href="introDEDSdedsKSL.html#cb128-16" tabindex="-1"></a><span class="co">     */</span></span>
<span id="cb128-17"><a href="introDEDSdedsKSL.html#cb128-17" tabindex="-1"></a>    <span class="kw">var</span> <span class="va">initialRandomSource</span><span class="op">:</span> RandomIfc</span>
<span id="cb128-18"><a href="introDEDSdedsKSL.html#cb128-18" tabindex="-1"></a></span>
<span id="cb128-19"><a href="introDEDSdedsKSL.html#cb128-19" tabindex="-1"></a>    <span class="kw">var</span> <span class="va">rnStream</span><span class="op">:</span> RNStreamIfc</span>
<span id="cb128-20"><a href="introDEDSdedsKSL.html#cb128-20" tabindex="-1"></a></span>
<span id="cb128-21"><a href="introDEDSdedsKSL.html#cb128-21" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb128-22"><a href="introDEDSdedsKSL.html#cb128-22" tabindex="-1"></a><span class="co">     * Controls whether warning of changing the initial random source during a replication</span></span>
<span id="cb128-23"><a href="introDEDSdedsKSL.html#cb128-23" tabindex="-1"></a><span class="co">     * is logged, default is true.</span></span>
<span id="cb128-24"><a href="introDEDSdedsKSL.html#cb128-24" tabindex="-1"></a><span class="co">     */</span></span>
<span id="cb128-25"><a href="introDEDSdedsKSL.html#cb128-25" tabindex="-1"></a>    <span class="kw">var</span> <span class="va">initialRandomSourceChangeWarning</span><span class="op">:</span> <span class="kw">Boolean</span></span>
<span id="cb128-26"><a href="introDEDSdedsKSL.html#cb128-26" tabindex="-1"></a></span>
<span id="cb128-27"><a href="introDEDSdedsKSL.html#cb128-27" tabindex="-1"></a>    <span class="kw">fun</span> <span class="fu">asString</span><span class="op">():</span> <span class="dt">String</span></span>
<span id="cb128-28"><a href="introDEDSdedsKSL.html#cb128-28" tabindex="-1"></a>}</span></code></pre></div>
<p>Similarly for simulation response variables, there should be controlled access that limits how the properties can be changed from outside of the model element. In the following code snippet, a private property to track the state of the queue is defined. Since the <code>TWResponse</code> class has public methods and properties that permit the user to change its values, we do not want to fully expose this internal state to outside clients.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb129-1"><a href="introDEDSdedsKSL.html#cb129-1" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">myNumInQ</span><span class="op">:</span> TWResponse <span class="op">=</span> TWResponse<span class="op">(</span><span class="kw">this</span><span class="op">,</span> <span class="st">&quot;PharmacyQ&quot;</span><span class="op">)</span></span>
<span id="cb129-2"><a href="introDEDSdedsKSL.html#cb129-2" tabindex="-1"></a>    <span class="kw">val</span> <span class="va">numInQ</span><span class="op">:</span> TWResponseCIfc</span>
<span id="cb129-3"><a href="introDEDSdedsKSL.html#cb129-3" tabindex="-1"></a>        <span class="kw">get</span><span class="op">()</span> <span class="op">=</span> myNumInQ</span></code></pre></div>
<p>However, it is useful for outside clients to have access to immutable properties and to summary statistics related to the response variable. This is permitted by the use of the <code>TWResponseCIfc</code> interface, which limits access.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:ResponseCIfc"></span>
<img src="figures2/ch4/ResponseCIfc.png" alt="Controlled Access to Responses" width="70%" height="70%" />
<p class="caption">
Figure 4.10: Controlled Access to Responses
</p>
</div>
<p>As indicated in Figure <a href="introDEDSdedsKSL.html#fig:ResponseCIfc">4.10</a>, the two interfaces <code>TWResponseCIfc</code> and <code>ResponseCIfc</code> limit access to time-weighted and tally-based response variables to access within and across replication statistics and to add count actions. Count actions permit actions to take place when the number of observations reaches a particular value. One use of count actions is to stop the simulation with a fixed number of observations have been observed.</p>
<p>Within the implementation, there are a couple of additional items to note. The KSL allows for the definition of aggregate responses. Aggregate responses observe other responses and permit the definition of derived responses. In the pharmacy model implementation there is an aggregate response called <code>myTotal.</code> The relevant code is shown below.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb130-1"><a href="introDEDSdedsKSL.html#cb130-1" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">myNumBusy</span><span class="op">:</span> TWResponse <span class="op">=</span> TWResponse<span class="op">(</span><span class="kw">this</span><span class="op">,</span> <span class="st">&quot;NumBusy&quot;</span><span class="op">)</span></span>
<span id="cb130-2"><a href="introDEDSdedsKSL.html#cb130-2" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">myNS</span><span class="op">:</span> TWResponse <span class="op">=</span> TWResponse<span class="op">(</span><span class="kw">this</span><span class="op">,</span> <span class="st">&quot;# in System&quot;</span><span class="op">)</span></span>
<span id="cb130-3"><a href="introDEDSdedsKSL.html#cb130-3" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">myNumCustomers</span><span class="op">:</span> Counter <span class="op">=</span> Counter<span class="op">(</span><span class="kw">this</span><span class="op">,</span> name <span class="op">=</span> <span class="st">&quot;Num Served&quot;</span><span class="op">)</span></span>
<span id="cb130-4"><a href="introDEDSdedsKSL.html#cb130-4" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">myTotal</span><span class="op">:</span> AggregateTWResponse <span class="op">=</span> AggregateTWResponse<span class="op">(</span><span class="kw">this</span><span class="op">,</span> <span class="st">&quot;aggregate # in system&quot;</span><span class="op">)</span></span>
<span id="cb130-5"><a href="introDEDSdedsKSL.html#cb130-5" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">myArrivalEventAction</span><span class="op">:</span> ArrivalEventAction <span class="op">=</span> ArrivalEventAction<span class="op">()</span></span>
<span id="cb130-6"><a href="introDEDSdedsKSL.html#cb130-6" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">myEndServiceEventAction</span><span class="op">:</span> EndServiceEventAction <span class="op">=</span> EndServiceEventAction<span class="op">()</span></span>
<span id="cb130-7"><a href="introDEDSdedsKSL.html#cb130-7" tabindex="-1"></a></span>
<span id="cb130-8"><a href="introDEDSdedsKSL.html#cb130-8" tabindex="-1"></a>    init <span class="op">{</span></span>
<span id="cb130-9"><a href="introDEDSdedsKSL.html#cb130-9" tabindex="-1"></a>        myTotal<span class="op">.</span>observe<span class="op">(</span>myNumInQ<span class="op">)</span></span>
<span id="cb130-10"><a href="introDEDSdedsKSL.html#cb130-10" tabindex="-1"></a>        myTotal<span class="op">.</span>observe<span class="op">(</span>myNumBusy<span class="op">)</span></span>
<span id="cb130-11"><a href="introDEDSdedsKSL.html#cb130-11" tabindex="-1"></a>    <span class="op">}</span></span></code></pre></div>
<p>This code defines an aggregate response that observes two variables, <code>myNumInQ</code> and <code>myNumBusy.</code> Thus, whenever either of these two variables change, the aggregate response is updated to ensure that it represents the total of the two variable. Thus, <code>myTotal</code> represents the total number of customers in the system at any time <span class="math inline">\(t\)</span>. As can be noted in the output results, this response has the same statistics as the response collected by the variable <code>myNS</code> labeled “# in System”.</p>
<p>Finally, the implementation has a couple of interesting new items within the main execution method. Notice that in line 1 in the model constructor that the parameter <code>autoCSVReports</code> is set to true. This will cause comma separated value files to be produced in the model’s default output directory that contains all of the within and across replication statistics. In addition, note how the initial random sources for the arrival and service distributions are set in lines 8 and 9. Finally, note the use of <code>model.print(),</code> which causes the default simulation running information and results to be printed to the console.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb131-1"><a href="introDEDSdedsKSL.html#cb131-1" tabindex="-1"></a><span class="kw">fun</span> <span class="fu">main</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb131-2"><a href="introDEDSdedsKSL.html#cb131-2" tabindex="-1"></a>    <span class="kw">val</span> <span class="va">model</span> <span class="op">=</span> Model<span class="op">(</span><span class="st">&quot;Drive Through Pharmacy&quot;</span><span class="op">,</span> autoCSVReports <span class="op">=</span> <span class="kw">true</span><span class="op">)</span></span>
<span id="cb131-3"><a href="introDEDSdedsKSL.html#cb131-3" tabindex="-1"></a>    model<span class="op">.</span>numberOfReplications <span class="op">=</span> <span class="dv">30</span></span>
<span id="cb131-4"><a href="introDEDSdedsKSL.html#cb131-4" tabindex="-1"></a>    model<span class="op">.</span>lengthOfReplication <span class="op">=</span> <span class="fl">20000.0</span></span>
<span id="cb131-5"><a href="introDEDSdedsKSL.html#cb131-5" tabindex="-1"></a>    model<span class="op">.</span>lengthOfReplicationWarmUp <span class="op">=</span> <span class="fl">5000.0</span></span>
<span id="cb131-6"><a href="introDEDSdedsKSL.html#cb131-6" tabindex="-1"></a>    <span class="co">// add DriveThroughPharmacy to the main model</span></span>
<span id="cb131-7"><a href="introDEDSdedsKSL.html#cb131-7" tabindex="-1"></a>    <span class="kw">val</span> <span class="va">dtp</span> <span class="op">=</span> DriveThroughPharmacy<span class="op">(</span>model<span class="op">,</span> <span class="dv">1</span><span class="op">)</span></span>
<span id="cb131-8"><a href="introDEDSdedsKSL.html#cb131-8" tabindex="-1"></a>    dtp<span class="op">.</span>arrivalRV<span class="op">.</span>initialRandomSource <span class="op">=</span> ExponentialRV<span class="op">(</span><span class="fl">6.0</span><span class="op">,</span> <span class="dv">1</span><span class="op">)</span></span>
<span id="cb131-9"><a href="introDEDSdedsKSL.html#cb131-9" tabindex="-1"></a>    dtp<span class="op">.</span>serviceRV<span class="op">.</span>initialRandomSource <span class="op">=</span> ExponentialRV<span class="op">(</span><span class="fl">3.0</span><span class="op">,</span> <span class="dv">2</span><span class="op">)</span></span>
<span id="cb131-10"><a href="introDEDSdedsKSL.html#cb131-10" tabindex="-1"></a>    model<span class="op">.</span>simulate<span class="op">()</span></span>
<span id="cb131-11"><a href="introDEDSdedsKSL.html#cb131-11" tabindex="-1"></a>    model<span class="op">.</span>print<span class="op">()</span></span>
<span id="cb131-12"><a href="introDEDSdedsKSL.html#cb131-12" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>In the next section, we redo the pharmacy model using some new KSL constructs that facilitate the modeling of queues.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="QHandExample.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="enhancing-the-drive-through-pharmacy-model.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
