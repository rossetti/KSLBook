<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>7.3 Examples of Advanced Event Models | Simulation Modeling using the Kotlin Simulation Library (KSL)</title>
  <meta name="description" content="A book that illustrates the basics of using the KSL. The output format for this book is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.30 and GitBook 2.6.7" />

  <meta property="og:title" content="7.3 Examples of Advanced Event Models | Simulation Modeling using the Kotlin Simulation Library (KSL)" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="A book that illustrates the basics of using the KSL. The output format for this book is bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="7.3 Examples of Advanced Event Models | Simulation Modeling using the Kotlin Simulation Library (KSL)" />
  
  <meta name="twitter:description" content="A book that illustrates the basics of using the KSL. The output format for this book is bookdown::gitbook." />
  

<meta name="author" content="Manuel D. Rossetti" />


<meta name="date" content="2023-01-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="modeling-non-stationary-systems.html"/>
<link rel="next" href="summary-3.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Simulation Modeling using the Kotlin Simulation Library (KSL)</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="release-history.html"><a href="release-history.html"><i class="fa fa-check"></i>Release History</a></li>
<li class="chapter" data-level="" data-path="ksl-project-page.html"><a href="ksl-project-page.html"><i class="fa fa-check"></i>KSL Project Page</a></li>
<li class="chapter" data-level="" data-path="book-support-files.html"><a href="book-support-files.html"><i class="fa fa-check"></i>Book Support Files</a></li>
<li class="chapter" data-level="" data-path="acknowledgments.html"><a href="acknowledgments.html"><i class="fa fa-check"></i>Acknowledgments</a></li>
<li class="chapter" data-level="" data-path="intended-audience.html"><a href="intended-audience.html"><i class="fa fa-check"></i>Intended Audience</a></li>
<li class="chapter" data-level="" data-path="organization-of-the-book.html"><a href="organization-of-the-book.html"><i class="fa fa-check"></i>Organization of the Book</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html"><i class="fa fa-check"></i>About the Author</a></li>
<li class="chapter" data-level="1" data-path="ch1.html"><a href="ch1.html"><i class="fa fa-check"></i><b>1</b> Simulation Modeling</a>
<ul>
<li class="chapter" data-level="1.1" data-path="simulation-modeling.html"><a href="simulation-modeling.html"><i class="fa fa-check"></i><b>1.1</b> Simulation Modeling</a></li>
<li class="chapter" data-level="1.2" data-path="why-simulate.html"><a href="why-simulate.html"><i class="fa fa-check"></i><b>1.2</b> Why Simulate?</a></li>
<li class="chapter" data-level="1.3" data-path="types-of-systems-and-simulation-models.html"><a href="types-of-systems-and-simulation-models.html"><i class="fa fa-check"></i><b>1.3</b> Types of Systems and Simulation Models</a></li>
<li class="chapter" data-level="1.4" data-path="simulation-descriptive-or-prescriptive-modeling.html"><a href="simulation-descriptive-or-prescriptive-modeling.html"><i class="fa fa-check"></i><b>1.4</b> Simulation: Descriptive or Prescriptive Modeling?</a></li>
<li class="chapter" data-level="1.5" data-path="randomness-in-simulation.html"><a href="randomness-in-simulation.html"><i class="fa fa-check"></i><b>1.5</b> Randomness in Simulation</a></li>
<li class="chapter" data-level="1.6" data-path="simulation-languages.html"><a href="simulation-languages.html"><i class="fa fa-check"></i><b>1.6</b> Simulation Languages</a></li>
<li class="chapter" data-level="1.7" data-path="ch1:sec:simMeth.html"><a href="ch1:sec:simMeth.html"><i class="fa fa-check"></i><b>1.7</b> Simulation Methodology</a></li>
<li class="chapter" data-level="1.8" data-path="overview-of-the-kotline-simulation-library.html"><a href="overview-of-the-kotline-simulation-library.html"><i class="fa fa-check"></i><b>1.8</b> Overview of the Kotline Simulation Library</a></li>
<li class="chapter" data-level="1.9" data-path="exercises.html"><a href="exercises.html"><i class="fa fa-check"></i><b>1.9</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="ch2rng.html"><a href="ch2rng.html"><i class="fa fa-check"></i><b>2</b> Modeling Randomness</a>
<ul>
<li class="chapter" data-level="2.1" data-path="ch2generator.html"><a href="ch2generator.html"><i class="fa fa-check"></i><b>2.1</b> Random Number Generator</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="ch2generator.html"><a href="ch2generator.html#ch2randompkg"><i class="fa fa-check"></i><b>2.1.1</b> Random Package</a></li>
<li class="chapter" data-level="2.1.2" data-path="ch2generator.html"><a href="ch2generator.html#ch2creatingStreams"><i class="fa fa-check"></i><b>2.1.2</b> Creating and Using Streams</a></li>
<li class="chapter" data-level="2.1.3" data-path="ch2generator.html"><a href="ch2generator.html#ch2crn"><i class="fa fa-check"></i><b>2.1.3</b> Common Random Numbers</a></li>
<li class="chapter" data-level="2.1.4" data-path="ch2generator.html"><a href="ch2generator.html#ch2antitheticStreams"><i class="fa fa-check"></i><b>2.1.4</b> Creating and Using Antithetic Streams</a></li>
<li class="chapter" data-level="2.1.5" data-path="ch2generator.html"><a href="ch2generator.html#ch2rnFAQ"><i class="fa fa-check"></i><b>2.1.5</b> Frequently Asked Questions about Random Numbers</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="rvg.html"><a href="rvg.html"><i class="fa fa-check"></i><b>2.2</b> Random Variate Generation</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="rvg.html"><a href="rvg.html#rvg_dists"><i class="fa fa-check"></i><b>2.2.1</b> Continuous and Discrete Random Variables</a></li>
<li class="chapter" data-level="2.2.2" data-path="rvg.html"><a href="rvg.html#rvg_algo"><i class="fa fa-check"></i><b>2.2.2</b> Overview of Generation Algorithms</a></li>
<li class="chapter" data-level="2.2.3" data-path="rvg.html"><a href="rvg.html#rvg_use"><i class="fa fa-check"></i><b>2.2.3</b> Creating and Using Random Variables</a></li>
<li class="chapter" data-level="2.2.4" data-path="rvg.html"><a href="rvg.html#functions-of-random-variables"><i class="fa fa-check"></i><b>2.2.4</b> Functions of Random Variables</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="probability-distribution-models.html"><a href="probability-distribution-models.html"><i class="fa fa-check"></i><b>2.3</b> Probability Distribution Models</a></li>
<li class="chapter" data-level="2.4" data-path="summary.html"><a href="summary.html"><i class="fa fa-check"></i><b>2.4</b> Summary</a></li>
<li class="chapter" data-level="2.5" data-path="exercises-1.html"><a href="exercises-1.html"><i class="fa fa-check"></i><b>2.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="mcm.html"><a href="mcm.html"><i class="fa fa-check"></i><b>3</b> Monte Carlo Methods</a>
<ul>
<li class="chapter" data-level="3.1" data-path="kslStatistics.html"><a href="kslStatistics.html"><i class="fa fa-check"></i><b>3.1</b> Collecting Statistics</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="kslStatistics.html"><a href="kslStatistics.html#creating-and-using-a-statistic"><i class="fa fa-check"></i><b>3.1.1</b> Creating and Using a Statistic</a></li>
<li class="chapter" data-level="3.1.2" data-path="kslStatistics.html"><a href="kslStatistics.html#histograms-and-frequencies"><i class="fa fa-check"></i><b>3.1.2</b> Histograms and Frequencies</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="ch3batchStats.html"><a href="ch3batchStats.html"><i class="fa fa-check"></i><b>3.2</b> Batch Statistics</a></li>
<li class="chapter" data-level="3.3" data-path="ssMC.html"><a href="ssMC.html"><i class="fa fa-check"></i><b>3.3</b> Simple Monte Carlo Integration</a></li>
<li class="chapter" data-level="3.4" data-path="ch3StatReview.html"><a href="ch3StatReview.html"><i class="fa fa-check"></i><b>3.4</b> Review of Statistical Concepts</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="ch3StatReview.html"><a href="ch3StatReview.html#point-estimates-and-confidence-intervals"><i class="fa fa-check"></i><b>3.4.1</b> Point Estimates and Confidence Intervals</a></li>
<li class="chapter" data-level="3.4.2" data-path="ch3StatReview.html"><a href="ch3StatReview.html#ch3SampleSize"><i class="fa fa-check"></i><b>3.4.2</b> Sample Size Determination</a></li>
<li class="chapter" data-level="3.4.3" data-path="ch3StatReview.html"><a href="ch3StatReview.html#determining-the-sample-size-for-a-monte-carlo-simulation-experiment"><i class="fa fa-check"></i><b>3.4.3</b> Determining the Sample Size for a Monte Carlo Simulation Experiment</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="craps.html"><a href="craps.html"><i class="fa fa-check"></i><b>3.5</b> Simulating the Game of Craps</a></li>
<li class="chapter" data-level="3.6" data-path="the-news-vendor-problem.html"><a href="the-news-vendor-problem.html"><i class="fa fa-check"></i><b>3.6</b> The News Vendor Problem</a></li>
<li class="chapter" data-level="3.7" data-path="monte-carlo-experiments.html"><a href="monte-carlo-experiments.html"><i class="fa fa-check"></i><b>3.7</b> Monte-Carlo Experiments</a></li>
<li class="chapter" data-level="3.8" data-path="summary-1.html"><a href="summary-1.html"><i class="fa fa-check"></i><b>3.8</b> Summary</a></li>
<li class="chapter" data-level="3.9" data-path="exercises-2.html"><a href="exercises-2.html"><i class="fa fa-check"></i><b>3.9</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="introDEDS.html"><a href="introDEDS.html"><i class="fa fa-check"></i><b>4</b> Introduction to Discrete Event Modeling</a>
<ul>
<li class="chapter" data-level="4.1" data-path="introDEDSIntro.html"><a href="introDEDSIntro.html"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="introDEDSdeds.html"><a href="introDEDSdeds.html"><i class="fa fa-check"></i><b>4.2</b> Discrete-Event Dynamic Systems</a></li>
<li class="chapter" data-level="4.3" data-path="HowDEDSClockWorks.html"><a href="HowDEDSClockWorks.html"><i class="fa fa-check"></i><b>4.3</b> How the Discrete-Event Clock Works</a></li>
<li class="chapter" data-level="4.4" data-path="QHandExample.html"><a href="QHandExample.html"><i class="fa fa-check"></i><b>4.4</b> Simulating a Queueing System By Hand</a></li>
<li class="chapter" data-level="4.5" data-path="introDEDSdedsKSL.html"><a href="introDEDSdedsKSL.html"><i class="fa fa-check"></i><b>4.5</b> Modeling DEDS in the KSL</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="introDEDSdedsKSL.html"><a href="introDEDSdedsKSL.html#event-scheduling"><i class="fa fa-check"></i><b>4.5.1</b> Event Scheduling</a></li>
<li class="chapter" data-level="4.5.2" data-path="introDEDSdedsKSL.html"><a href="introDEDSdedsKSL.html#introDEDSschedExamples"><i class="fa fa-check"></i><b>4.5.2</b> Simple Event Scheduling Examples</a></li>
<li class="chapter" data-level="4.5.3" data-path="introDEDSdedsKSL.html"><a href="introDEDSdedsKSL.html#introDEDSUpDown"><i class="fa fa-check"></i><b>4.5.3</b> Up and Down Component Example</a></li>
<li class="chapter" data-level="4.5.4" data-path="introDEDSdedsKSL.html"><a href="introDEDSdedsKSL.html#introDEDSPharmacy"><i class="fa fa-check"></i><b>4.5.4</b> Modeling a Simple Queueing System</a></li>
<li class="chapter" data-level="4.5.5" data-path="introDEDSdedsKSL.html"><a href="introDEDSdedsKSL.html#more-details-about-the-pharmacy-model-implementation"><i class="fa fa-check"></i><b>4.5.5</b> More Details About the Pharmacy Model Implementation</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="enhancing-the-drive-through-pharmacy-model.html"><a href="enhancing-the-drive-through-pharmacy-model.html"><i class="fa fa-check"></i><b>4.6</b> Enhancing the Drive Through Pharmacy Model</a></li>
<li class="chapter" data-level="4.7" data-path="introDEDSSummary.html"><a href="introDEDSSummary.html"><i class="fa fa-check"></i><b>4.7</b> Summary</a></li>
<li class="chapter" data-level="4.8" data-path="exercises-3.html"><a href="exercises-3.html"><i class="fa fa-check"></i><b>4.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="simoa.html"><a href="simoa.html"><i class="fa fa-check"></i><b>5</b> Analyzing Simulation Output</a>
<ul>
<li class="chapter" data-level="5.1" data-path="simoadatatypes.html"><a href="simoadatatypes.html"><i class="fa fa-check"></i><b>5.1</b> Types of Statistical Variables</a></li>
<li class="chapter" data-level="5.2" data-path="simoasimtypes.html"><a href="simoasimtypes.html"><i class="fa fa-check"></i><b>5.2</b> Types of Simulation With Respect To Output Analysis</a></li>
<li class="chapter" data-level="5.3" data-path="simoafinhorizon.html"><a href="simoafinhorizon.html"><i class="fa fa-check"></i><b>5.3</b> Analysis of Finite Horizon Simulations</a></li>
<li class="chapter" data-level="5.4" data-path="simoafinhorizonex.html"><a href="simoafinhorizonex.html"><i class="fa fa-check"></i><b>5.4</b> Capturing Output for a Simple Finite Horizon Simulation</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="simoafinhorizonex.html"><a href="simoafinhorizonex.html#ksl-functionality-for-capturing-statistical-results"><i class="fa fa-check"></i><b>5.4.1</b> KSL Functionality for Capturing Statistical Results</a></li>
<li class="chapter" data-level="5.4.2" data-path="simoafinhorizonex.html"><a href="simoafinhorizonex.html#additional-remarks"><i class="fa fa-check"></i><b>5.4.2</b> Additional Remarks</a></li>
<li class="chapter" data-level="5.4.3" data-path="simoafinhorizonex.html"><a href="simoafinhorizonex.html#querying-the-ksl-database"><i class="fa fa-check"></i><b>5.4.3</b> Querying the KSL Database</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="simoaseqsampling.html"><a href="simoaseqsampling.html"><i class="fa fa-check"></i><b>5.5</b> Sequential Sampling for Finite Horizon Simulations</a></li>
<li class="chapter" data-level="5.6" data-path="simoainfhorizon.html"><a href="simoainfhorizon.html"><i class="fa fa-check"></i><b>5.6</b> Analysis of Infinite Horizon Simulations</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="simoainfhorizon.html"><a href="simoainfhorizon.html#simoainfhorizoninitialbias"><i class="fa fa-check"></i><b>5.6.1</b> Assessing the Effect of Initial Conditions</a></li>
<li class="chapter" data-level="5.6.2" data-path="simoainfhorizon.html"><a href="simoainfhorizon.html#simoainfhorizonrepDeletion"><i class="fa fa-check"></i><b>5.6.2</b> Performing the Method of Replication-Deletion</a></li>
<li class="chapter" data-level="5.6.3" data-path="simoainfhorizon.html"><a href="simoainfhorizon.html#simoainfhorizonbatchmeans"><i class="fa fa-check"></i><b>5.6.3</b> The Method of Batch Means</a></li>
<li class="chapter" data-level="5.6.4" data-path="simoainfhorizon.html"><a href="simoainfhorizon.html#simoainfhorizonjslbatching"><i class="fa fa-check"></i><b>5.6.4</b> Performing the Method of Batch Means</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="simoacomparingSystems.html"><a href="simoacomparingSystems.html"><i class="fa fa-check"></i><b>5.7</b> Comparing System Configurations</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="simoacomparingSystems.html"><a href="simoacomparingSystems.html#simoacomparingSystems:two"><i class="fa fa-check"></i><b>5.7.1</b> Comparing Two Systems</a></li>
<li class="chapter" data-level="5.7.2" data-path="simoacomparingSystems.html"><a href="simoacomparingSystems.html#simoacomparingSystemsMCB"><i class="fa fa-check"></i><b>5.7.2</b> Multiple Comparisons</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="simoasummary.html"><a href="simoasummary.html"><i class="fa fa-check"></i><b>5.8</b> Summary</a></li>
<li class="chapter" data-level="5.9" data-path="exercises-4.html"><a href="exercises-4.html"><i class="fa fa-check"></i><b>5.9</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="processview.html"><a href="processview.html"><i class="fa fa-check"></i><b>6</b> Process View Modeling Using the KSL</a>
<ul>
<li class="chapter" data-level="6.1" data-path="ch6Entities.html"><a href="ch6Entities.html"><i class="fa fa-check"></i><b>6.1</b> What are Entities?</a></li>
<li class="chapter" data-level="6.2" data-path="pvIntro.html"><a href="pvIntro.html"><i class="fa fa-check"></i><b>6.2</b> The Process View</a></li>
<li class="chapter" data-level="6.3" data-path="understanding-ksl-processes-and-entities.html"><a href="understanding-ksl-processes-and-entities.html"><i class="fa fa-check"></i><b>6.3</b> Understanding KSL Processes and Entities</a></li>
<li class="chapter" data-level="6.4" data-path="examples-of-process-modeling.html"><a href="examples-of-process-modeling.html"><i class="fa fa-check"></i><b>6.4</b> Examples of Process Modeling</a></li>
<li class="chapter" data-level="6.5" data-path="modeling-a-stem-career-mixer.html"><a href="modeling-a-stem-career-mixer.html"><i class="fa fa-check"></i><b>6.5</b> Modeling a STEM Career Mixer</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="modeling-a-stem-career-mixer.html"><a href="modeling-a-stem-career-mixer.html#conceptualizing-the-system"><i class="fa fa-check"></i><b>6.5.1</b> Conceptualizing the System</a></li>
<li class="chapter" data-level="6.5.2" data-path="modeling-a-stem-career-mixer.html"><a href="modeling-a-stem-career-mixer.html#implementing-the-stem-mixer-model"><i class="fa fa-check"></i><b>6.5.2</b> Implementing the STEM Mixer Model</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="the-tie-dye-t-shirt-model.html"><a href="the-tie-dye-t-shirt-model.html"><i class="fa fa-check"></i><b>6.6</b> The Tie-Dye T-Shirt Model</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="the-tie-dye-t-shirt-model.html"><a href="the-tie-dye-t-shirt-model.html#ch4:TieDyeTShirtsSub1"><i class="fa fa-check"></i><b>6.6.1</b> Implementing the Tie-Dye T-Shirt Model</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="summary-2.html"><a href="summary-2.html"><i class="fa fa-check"></i><b>6.7</b> Summary</a></li>
<li class="chapter" data-level="6.8" data-path="exercises-5.html"><a href="exercises-5.html"><i class="fa fa-check"></i><b>6.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="ch7AdvModeling.html"><a href="ch7AdvModeling.html"><i class="fa fa-check"></i><b>7</b> Advanced Event and Process View Modeling</a>
<ul>
<li class="chapter" data-level="7.1" data-path="modeling-with-processes-and-resources.html"><a href="modeling-with-processes-and-resources.html"><i class="fa fa-check"></i><b>7.1</b> Modeling with Processes and Resources</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="modeling-with-processes-and-resources.html"><a href="modeling-with-processes-and-resources.html#modeling-space-with-resources"><i class="fa fa-check"></i><b>7.1.1</b> Modeling Space with Resources</a></li>
<li class="chapter" data-level="7.1.2" data-path="modeling-with-processes-and-resources.html"><a href="modeling-with-processes-and-resources.html#resource-pools"><i class="fa fa-check"></i><b>7.1.2</b> Resource Pools</a></li>
<li class="chapter" data-level="7.1.3" data-path="modeling-with-processes-and-resources.html"><a href="modeling-with-processes-and-resources.html#computer-test-and-repair-shop-example"><i class="fa fa-check"></i><b>7.1.3</b> Computer Test and Repair Shop Example</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="modeling-non-stationary-systems.html"><a href="modeling-non-stationary-systems.html"><i class="fa fa-check"></i><b>7.2</b> Modeling Non-Stationary Systems</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="modeling-non-stationary-systems.html"><a href="modeling-non-stationary-systems.html#ch7secNSPP"><i class="fa fa-check"></i><b>7.2.1</b> Non-Stationary Arrival Processes</a></li>
<li class="chapter" data-level="7.2.2" data-path="modeling-non-stationary-systems.html"><a href="modeling-non-stationary-systems.html#modeling-resources-under-non-stationary-conditions"><i class="fa fa-check"></i><b>7.2.2</b> Modeling Resources Under Non-Stationary Conditions</a></li>
<li class="chapter" data-level="7.2.3" data-path="modeling-non-stationary-systems.html"><a href="modeling-non-stationary-systems.html#enhancing-the-stem-career-mixer-example"><i class="fa fa-check"></i><b>7.2.3</b> Enhancing the STEM Career Mixer Example</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="examples-of-advanced-event-models.html"><a href="examples-of-advanced-event-models.html"><i class="fa fa-check"></i><b>7.3</b> Examples of Advanced Event Models</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="examples-of-advanced-event-models.html"><a href="examples-of-advanced-event-models.html#ch6s1sb4sub3"><i class="fa fa-check"></i><b>7.3.1</b> Modeling Balking and Reneging</a></li>
<li class="chapter" data-level="7.3.2" data-path="examples-of-advanced-event-models.html"><a href="examples-of-advanced-event-models.html#modeling-a-reorder-point-reorder-quantity-inventory-policy"><i class="fa fa-check"></i><b>7.3.2</b> Modeling a Reorder Point, Reorder Quantity Inventory Policy</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="summary-3.html"><a href="summary-3.html"><i class="fa fa-check"></i><b>7.4</b> Summary</a></li>
<li class="chapter" data-level="7.5" data-path="exercises-6.html"><a href="exercises-6.html"><i class="fa fa-check"></i><b>7.5</b> Exercises</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="appRNRV.html"><a href="appRNRV.html"><i class="fa fa-check"></i><b>A</b> Generating Pseudo-Random Numbers and Random Variates</a>
<ul>
<li class="chapter" data-level="A.1" data-path="appRNRVPRN.html"><a href="appRNRVPRN.html"><i class="fa fa-check"></i><b>A.1</b> Pseudo Random Numbers</a>
<ul>
<li class="chapter" data-level="A.1.1" data-path="appRNRVPRN.html"><a href="appRNRVPRN.html#appRNRVRNGs"><i class="fa fa-check"></i><b>A.1.1</b> Random Number Generators</a></li>
</ul></li>
<li class="chapter" data-level="A.2" data-path="appRNRVs.html"><a href="appRNRVs.html"><i class="fa fa-check"></i><b>A.2</b> Generating Random Variates from Distributions</a>
<ul>
<li class="chapter" data-level="A.2.1" data-path="appRNRVs.html"><a href="appRNRVs.html#inverse-transform-method"><i class="fa fa-check"></i><b>A.2.1</b> Inverse Transform Method</a></li>
<li class="chapter" data-level="A.2.2" data-path="appRNRVs.html"><a href="appRNRVs.html#convolution"><i class="fa fa-check"></i><b>A.2.2</b> Convolution</a></li>
<li class="chapter" data-level="A.2.3" data-path="appRNRVs.html"><a href="appRNRVs.html#acceptancerejection"><i class="fa fa-check"></i><b>A.2.3</b> Acceptance/Rejection</a></li>
<li class="chapter" data-level="A.2.4" data-path="appRNRVs.html"><a href="appRNRVs.html#AppRNRVsubsecMTSRV"><i class="fa fa-check"></i><b>A.2.4</b> Mixture Distributions, Truncated Distributions, and Shifted Random Variables</a></li>
</ul></li>
<li class="chapter" data-level="A.3" data-path="summary-4.html"><a href="summary-4.html"><i class="fa fa-check"></i><b>A.3</b> Summary</a></li>
<li class="chapter" data-level="A.4" data-path="exercises-7.html"><a href="exercises-7.html"><i class="fa fa-check"></i><b>A.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="appidm.html"><a href="appidm.html"><i class="fa fa-check"></i><b>B</b> Probability Distribution Modeling</a>
<ul>
<li class="chapter" data-level="B.1" data-path="appidmsecrvPD.html"><a href="appidmsecrvPD.html"><i class="fa fa-check"></i><b>B.1</b> Random Variables and Probability Distributions</a></li>
<li class="chapter" data-level="B.2" data-path="appidmsecMDD.html"><a href="appidmsecMDD.html"><i class="fa fa-check"></i><b>B.2</b> Modeling with Discrete Distributions</a></li>
<li class="chapter" data-level="B.3" data-path="appidmsecfitDiscrete.html"><a href="appidmsecfitDiscrete.html"><i class="fa fa-check"></i><b>B.3</b> Fitting Discrete Distributions</a>
<ul>
<li class="chapter" data-level="B.3.1" data-path="appidmsecfitDiscrete.html"><a href="appidmsecfitDiscrete.html#AppDisFitPoissonFit"><i class="fa fa-check"></i><b>B.3.1</b> Fitting a Poisson Distribution</a></li>
<li class="chapter" data-level="B.3.2" data-path="appidmsecfitDiscrete.html"><a href="appidmsecfitDiscrete.html#visualizing-the-data"><i class="fa fa-check"></i><b>B.3.2</b> Visualizing the Data</a></li>
<li class="chapter" data-level="B.3.3" data-path="appidmsecfitDiscrete.html"><a href="appidmsecfitDiscrete.html#estimating-the-rate-parameter-for-the-poisson-distribution"><i class="fa fa-check"></i><b>B.3.3</b> Estimating the Rate Parameter for the Poisson Distribution</a></li>
<li class="chapter" data-level="B.3.4" data-path="appidmsecfitDiscrete.html"><a href="appidmsecfitDiscrete.html#chi-squared-goodness-of-fit-test-for-poisson-distribution"><i class="fa fa-check"></i><b>B.3.4</b> Chi-Squared Goodness of Fit Test for Poisson Distribution</a></li>
<li class="chapter" data-level="B.3.5" data-path="appidmsecfitDiscrete.html"><a href="appidmsecfitDiscrete.html#subsubchisqGOF"><i class="fa fa-check"></i><b>B.3.5</b> Chi-Squared Goodness of Fit Test</a></li>
<li class="chapter" data-level="B.3.6" data-path="appidmsecfitDiscrete.html"><a href="appidmsecfitDiscrete.html#using-the-fitdistrplus-r-package-on-discrete-data"><i class="fa fa-check"></i><b>B.3.6</b> Using the fitdistrplus R Package on Discrete Data</a></li>
<li class="chapter" data-level="B.3.7" data-path="appidmsecfitDiscrete.html"><a href="appidmsecfitDiscrete.html#fitting-a-discrete-empirical-distribution"><i class="fa fa-check"></i><b>B.3.7</b> Fitting a Discrete Empirical Distribution</a></li>
</ul></li>
<li class="chapter" data-level="B.4" data-path="appidmsecMCD.html"><a href="appidmsecMCD.html"><i class="fa fa-check"></i><b>B.4</b> Modeling with Continuous Distributions</a></li>
<li class="chapter" data-level="B.5" data-path="appidmsecfitContinuous.html"><a href="appidmsecfitContinuous.html"><i class="fa fa-check"></i><b>B.5</b> Fitting Continuous Distributions</a>
<ul>
<li class="chapter" data-level="B.5.1" data-path="appidmsecfitContinuous.html"><a href="appidmsecfitContinuous.html#appidmsubsecvisualizedata"><i class="fa fa-check"></i><b>B.5.1</b> Visualizing the Data</a></li>
<li class="chapter" data-level="B.5.2" data-path="appidmsecfitContinuous.html"><a href="appidmsecfitContinuous.html#appidmsubsecstatsdata"><i class="fa fa-check"></i><b>B.5.2</b> Statistically Summarize the Data</a></li>
<li class="chapter" data-level="B.5.3" data-path="appidmsecfitContinuous.html"><a href="appidmsecfitContinuous.html#appidmsubsechypothDist"><i class="fa fa-check"></i><b>B.5.3</b> Hypothesizing and Testing a Distribution</a></li>
<li class="chapter" data-level="B.5.4" data-path="appidmsecfitContinuous.html"><a href="appidmsecfitContinuous.html#kolmogorov-smirnov-test"><i class="fa fa-check"></i><b>B.5.4</b> Kolmogorov-Smirnov Test</a></li>
<li class="chapter" data-level="B.5.5" data-path="appidmsecfitContinuous.html"><a href="appidmsecfitContinuous.html#appidmsubsecvisFit"><i class="fa fa-check"></i><b>B.5.5</b> Visualizing the Fit</a></li>
<li class="chapter" data-level="B.5.6" data-path="appidmsecfitContinuous.html"><a href="appidmsecfitContinuous.html#appidms2sb3"><i class="fa fa-check"></i><b>B.5.6</b> Using the Input Analyzer</a></li>
</ul></li>
<li class="chapter" data-level="B.6" data-path="appdistfittestU01.html"><a href="appdistfittestU01.html"><i class="fa fa-check"></i><b>B.6</b> Testing Uniform (0,1) Pseudo-Random Numbers</a>
<ul>
<li class="chapter" data-level="B.6.1" data-path="appdistfittestU01.html"><a href="appdistfittestU01.html#chi-squared-goodness-of-fit-tests-for-pseudo-random-numbers"><i class="fa fa-check"></i><b>B.6.1</b> Chi-Squared Goodness of Fit Tests for Pseudo-Random Numbers</a></li>
<li class="chapter" data-level="B.6.2" data-path="appdistfittestU01.html"><a href="appdistfittestU01.html#higher-dimensional-chi-squared-test"><i class="fa fa-check"></i><b>B.6.2</b> Higher Dimensional Chi-Squared Test</a></li>
<li class="chapter" data-level="B.6.3" data-path="appdistfittestU01.html"><a href="appdistfittestU01.html#kolmogorov-smirnov-test-for-pseudo-random-numbers"><i class="fa fa-check"></i><b>B.6.3</b> Kolmogorov-Smirnov Test for Pseudo-Random Numbers</a></li>
<li class="chapter" data-level="B.6.4" data-path="appdistfittestU01.html"><a href="appdistfittestU01.html#testing-for-independence-and-patterns-in-pseudo-random-numbers"><i class="fa fa-check"></i><b>B.6.4</b> Testing for Independence and Patterns in Pseudo-Random Numbers</a></li>
</ul></li>
<li class="chapter" data-level="B.7" data-path="appdistfitidms2sb4.html"><a href="appdistfitidms2sb4.html"><i class="fa fa-check"></i><b>B.7</b> Additional Distribution Modeling Concepts</a></li>
<li class="chapter" data-level="B.8" data-path="appidmSummary.html"><a href="appidmSummary.html"><i class="fa fa-check"></i><b>B.8</b> Summary</a></li>
<li class="chapter" data-level="B.9" data-path="exercises-8.html"><a href="exercises-8.html"><i class="fa fa-check"></i><b>B.9</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="appqtAndInvT.html"><a href="appqtAndInvT.html"><i class="fa fa-check"></i><b>C</b> Queueing Theory</a>
<ul>
<li class="chapter" data-level="C.1" data-path="appqts1.html"><a href="appqts1.html"><i class="fa fa-check"></i><b>C.1</b> Single Line Queueing Stations</a>
<ul>
<li class="chapter" data-level="C.1.1" data-path="appqts1.html"><a href="appqts1.html#queueing-notation"><i class="fa fa-check"></i><b>C.1.1</b> Queueing Notation</a></li>
<li class="chapter" data-level="C.1.2" data-path="appqts1.html"><a href="appqts1.html#littles-formula"><i class="fa fa-check"></i><b>C.1.2</b> Littleâ€™s Formula</a></li>
<li class="chapter" data-level="C.1.3" data-path="appqts1.html"><a href="appqts1.html#appqts1sb1"><i class="fa fa-check"></i><b>C.1.3</b> Deriving Formulas for Markovian Single Queue Systems</a></li>
</ul></li>
<li class="chapter" data-level="C.2" data-path="appqts1sb2.html"><a href="appqts1sb2.html"><i class="fa fa-check"></i><b>C.2</b> Examples and Applications of Queueing Analysis</a>
<ul>
<li class="chapter" data-level="C.2.1" data-path="appqts1sb2.html"><a href="appqts1sb2.html#infinite-queue-examples"><i class="fa fa-check"></i><b>C.2.1</b> Infinite Queue Examples</a></li>
<li class="chapter" data-level="C.2.2" data-path="appqts1sb2.html"><a href="appqts1sb2.html#finite-queue-examples"><i class="fa fa-check"></i><b>C.2.2</b> Finite Queue Examples</a></li>
</ul></li>
<li class="chapter" data-level="C.3" data-path="appqts1sb3.html"><a href="appqts1sb3.html"><i class="fa fa-check"></i><b>C.3</b> Non-Markovian Queues and Approximations</a></li>
<li class="chapter" data-level="C.4" data-path="appqtsecformulas.html"><a href="appqtsecformulas.html"><i class="fa fa-check"></i><b>C.4</b> Summary of Queueing Formulas</a>
<ul>
<li class="chapter" data-level="C.4.1" data-path="appqtsecformulas.html"><a href="appqtsecformulas.html#mm1-queue"><i class="fa fa-check"></i><b>C.4.1</b> M/M/1 Queue</a></li>
<li class="chapter" data-level="C.4.2" data-path="appqtsecformulas.html"><a href="appqtsecformulas.html#mmc-queue"><i class="fa fa-check"></i><b>C.4.2</b> M/M/c Queue</a></li>
<li class="chapter" data-level="C.4.3" data-path="appqtsecformulas.html"><a href="appqtsecformulas.html#mmck-queue"><i class="fa fa-check"></i><b>C.4.3</b> M/M/c/k Queue</a></li>
<li class="chapter" data-level="C.4.4" data-path="appqtsecformulas.html"><a href="appqtsecformulas.html#mgcc-queue"><i class="fa fa-check"></i><b>C.4.4</b> M/G/c/c Queue</a></li>
<li class="chapter" data-level="C.4.5" data-path="appqtsecformulas.html"><a href="appqtsecformulas.html#mm1k-queue"><i class="fa fa-check"></i><b>C.4.5</b> M/M/1/k Queue</a></li>
<li class="chapter" data-level="C.4.6" data-path="appqtsecformulas.html"><a href="appqtsecformulas.html#mmck-queue-1"><i class="fa fa-check"></i><b>C.4.6</b> M/M/c/k Queue</a></li>
<li class="chapter" data-level="C.4.7" data-path="appqtsecformulas.html"><a href="appqtsecformulas.html#mm1kk-queue"><i class="fa fa-check"></i><b>C.4.7</b> M/M/1/k/k Queue</a></li>
<li class="chapter" data-level="C.4.8" data-path="appqtsecformulas.html"><a href="appqtsecformulas.html#mmckk-queue"><i class="fa fa-check"></i><b>C.4.8</b> M/M/c/k/k Queue</a></li>
</ul></li>
<li class="chapter" data-level="C.5" data-path="exercises-9.html"><a href="exercises-9.html"><i class="fa fa-check"></i><b>C.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="D" data-path="distributions.html"><a href="distributions.html"><i class="fa fa-check"></i><b>D</b> Distributions</a>
<ul>
<li class="chapter" data-level="D.1" data-path="appDiscreteDistributions.html"><a href="appDiscreteDistributions.html"><i class="fa fa-check"></i><b>D.1</b> Discrete Distrbutions</a></li>
<li class="chapter" data-level="D.2" data-path="appContinuousDistributions.html"><a href="appContinuousDistributions.html"><i class="fa fa-check"></i><b>D.2</b> Continuous Distrbutions</a></li>
</ul></li>
<li class="chapter" data-level="E" data-path="appStatTables.html"><a href="appStatTables.html"><i class="fa fa-check"></i><b>E</b> Statistical Tables</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="_blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Simulation Modeling using the Kotlin Simulation Library (KSL)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="examples-of-advanced-event-models" class="section level2 hasAnchor" number="7.3">
<h2><span class="header-section-number">7.3</span> Examples of Advanced Event Models<a href="examples-of-advanced-event-models.html#examples-of-advanced-event-models" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This section will illustrate situations where combining event based modeling and process modeling is useful. In addition, we will exam how to simulate an inventory system using the event view.</p>
<div id="ch6s1sb4sub3" class="section level3 hasAnchor" number="7.3.1">
<h3><span class="header-section-number">7.3.1</span> Modeling Balking and Reneging<a href="examples-of-advanced-event-models.html#ch6s1sb4sub3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This situation has multiple types of customers with different
priorities, different service times, and in the case of one type of
customer, the desire (or ability) to renege from the system. You can find the completed model file for this section in the chapter files under the name, <code>WalkInHealthClinic.</code></p>
<hr />
<div class="example">
<p><span id="exm:exWinHCC" class="example"><strong>Example 7.2  (Walk-in health care clinic) </strong></span>A walk-in care
clinic has analyzed their operations and they have found that they can
classify their walk-in patients into three categories: high priority
(urgent need of medical attention), medium priority (need standard
medical attention), and low priority (non-urgent need of medical
attention). On a typical day during the period of interest there are
about 15 arrivals per hour with (25% being high priority, 60% being
medium priority, and the remaining being low priority). The clinic is
interested in understanding the waiting time for patients at the clinic.
Upon arrival to the clinic the patients are triaged by a nurse into one
of the three types of patients. This takes only 2-3 minutes uniformly
distributed. Then, the patients wait in the waiting room based on their
priority. Patients with higher priority are placed at the front of the
line. Patients with the same priority are ordered based on a first-come
first served basis. The service time distributions of the customers are
given as follows.</p>
</div>
<table>
<thead>
<tr class="header">
<th align="left">Priority</th>
<th align="left">Service Time Distribution (in minutes)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">High</td>
<td align="left">Lognormal(<span class="math inline">\(\mu = 38\)</span>, <span class="math inline">\(\sigma = 8\)</span>)</td>
</tr>
<tr class="even">
<td align="left">Medium</td>
<td align="left">Triangular(16, 22, 28)</td>
</tr>
<tr class="odd">
<td align="left">Low</td>
<td align="left">Lognormal(<span class="math inline">\(\mu = 12\)</span>, <span class="math inline">\(\sigma = 2\)</span>)</td>
</tr>
</tbody>
</table>
<p>The clinic has 4 doctors on staff to attend to the patients during the
period of interest. They have found through a survey that if there are
more than 10 people waiting for service an arriving low priority patient
will exit before being triaged. Finally, they have found that the
non-urgent (low priority) patients may depart if they have to wait
longer than <span class="math inline">\(15 \pm 5\)</span> minutes after triage. That is, a non-urgent
patient may enter the clinic and begin waiting for a doctor, but if they
have to wait more than <span class="math inline">\(15 \pm 5\)</span> minutes (uniformly distributed) they
will decide to renege and leave the clinic without getting service. The
clinic would like to estimate the following:</p>
<ol style="list-style-type: decimal">
<li><p>the average system time of each type of patient</p></li>
<li><p>the probability that low priority patients balk</p></li>
<li><p>the probability that low priority patients renege</p></li>
</ol>
<hr />
<p><strong>Solution to Example <a href="examples-of-advanced-event-models.html#exm:exWinHCC">7.2</a></strong></p>
<p>For this problem, the system is the walk-in clinic, which includes
doctors and a triage nurse who serve three types of patients. The system
must know how the patients arrive (time between arrival distribution),
how to determine the type of the patient, the triage time, the service
time by type of patient, and the amount of time that a low priority
patient is willing to wait. The following code defines the random variables needed for the modeling as well as the resources. Notice that this code explicitly defines the queue to hold the requests for the doctor. This is done to permit direct access to the reference for the queue during the implementation of reneging.</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb198-1"><a href="examples-of-advanced-event-models.html#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> WalkInHealthClinic<span class="op">(</span><span class="va">parent</span><span class="op">:</span> <span class="dt">ModelElement</span><span class="op">,</span> <span class="va">name</span><span class="op">:</span> <span class="dt">String</span><span class="op">?</span> <span class="op">=</span> null<span class="op">)</span> <span class="op">:</span> <span class="dt">ProcessModel</span><span class="op">(</span><span class="va">parent</span><span class="op">,</span> <span class="va">name</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb198-2"><a href="examples-of-advanced-event-models.html#cb198-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-3"><a href="examples-of-advanced-event-models.html#cb198-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">myTBArrivals</span><span class="op">:</span> RVariableIfc <span class="op">=</span> ExponentialRV<span class="op">(</span><span class="fl">6.0</span><span class="op">,</span> <span class="dv">1</span><span class="op">)</span></span>
<span id="cb198-4"><a href="examples-of-advanced-event-models.html#cb198-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-5"><a href="examples-of-advanced-event-models.html#cb198-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">triageRV</span> <span class="op">=</span> RandomVariable<span class="op">(</span><span class="kw">this</span><span class="op">,</span> UniformRV<span class="op">(</span><span class="fl">2.0</span><span class="op">,</span> <span class="fl">3.0</span><span class="op">,</span> <span class="dv">2</span><span class="op">))</span></span>
<span id="cb198-6"><a href="examples-of-advanced-event-models.html#cb198-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">highRV</span> <span class="op">=</span> RandomVariable<span class="op">(</span><span class="kw">this</span><span class="op">,</span> LognormalRV<span class="op">(</span><span class="fl">38.0</span><span class="op">,</span> <span class="fl">8.0</span> <span class="op">*</span> <span class="fl">8.0</span><span class="op">,</span> <span class="dv">3</span><span class="op">))</span></span>
<span id="cb198-7"><a href="examples-of-advanced-event-models.html#cb198-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">mediumRV</span> <span class="op">=</span> RandomVariable<span class="op">(</span><span class="kw">this</span><span class="op">,</span> TriangularRV<span class="op">(</span><span class="fl">16.0</span><span class="op">,</span> <span class="fl">22.0</span><span class="op">,</span> <span class="fl">28.0</span><span class="op">,</span> <span class="dv">4</span><span class="op">))</span></span>
<span id="cb198-8"><a href="examples-of-advanced-event-models.html#cb198-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">lowRV</span> <span class="op">=</span> RandomVariable<span class="op">(</span><span class="kw">this</span><span class="op">,</span> LognormalRV<span class="op">(</span><span class="fl">12.0</span><span class="op">,</span> <span class="fl">2.0</span> <span class="op">*</span> <span class="fl">2.0</span><span class="op">,</span> <span class="dv">5</span><span class="op">))</span></span>
<span id="cb198-9"><a href="examples-of-advanced-event-models.html#cb198-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-10"><a href="examples-of-advanced-event-models.html#cb198-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">renegeTimeRV</span> <span class="op">=</span> RandomVariable<span class="op">(</span><span class="kw">this</span><span class="op">,</span> UniformRV<span class="op">(</span><span class="fl">10.0</span><span class="op">,</span> <span class="fl">20.0</span><span class="op">,</span> <span class="dv">6</span><span class="op">))</span></span>
<span id="cb198-11"><a href="examples-of-advanced-event-models.html#cb198-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-12"><a href="examples-of-advanced-event-models.html#cb198-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">doctorQ</span><span class="op">:</span> RequestQ <span class="op">=</span> RequestQ<span class="op">(</span><span class="kw">this</span><span class="op">,</span> <span class="st">&quot;DoctorQ&quot;</span><span class="op">,</span> discipline <span class="op">=</span> Queue<span class="op">.</span>Discipline<span class="op">.</span>RANKED<span class="op">)</span></span>
<span id="cb198-13"><a href="examples-of-advanced-event-models.html#cb198-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">doctorR</span><span class="op">:</span> ResourceWithQ <span class="op">=</span> ResourceWithQ<span class="op">(</span><span class="kw">this</span><span class="op">,</span> capacity <span class="op">=</span> <span class="dv">5</span><span class="op">,</span> queue <span class="op">=</span> doctorQ<span class="op">,</span> name <span class="op">=</span> <span class="st">&quot;Doctors&quot;</span><span class="op">)</span></span>
<span id="cb198-14"><a href="examples-of-advanced-event-models.html#cb198-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-15"><a href="examples-of-advanced-event-models.html#cb198-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">triageNurseR</span><span class="op">:</span> ResourceWithQ <span class="op">=</span> ResourceWithQ<span class="op">(</span><span class="kw">this</span><span class="op">,</span> capacity <span class="op">=</span> <span class="dv">1</span><span class="op">,</span> name <span class="op">=</span> <span class="st">&quot;TriageNurse&quot;</span><span class="op">)</span></span>
<span id="cb198-16"><a href="examples-of-advanced-event-models.html#cb198-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-17"><a href="examples-of-advanced-event-models.html#cb198-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> <span class="va">balkCriteria</span> <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb198-18"><a href="examples-of-advanced-event-models.html#cb198-18" aria-hidden="true" tabindex="-1"></a>        <span class="kw">set</span><span class="op">(</span>value<span class="op">)</span> <span class="op">{</span></span>
<span id="cb198-19"><a href="examples-of-advanced-event-models.html#cb198-19" aria-hidden="true" tabindex="-1"></a>            require<span class="op">(</span>value <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> <span class="st">&quot;The balk criteria must be &gt; 0&quot;</span> <span class="op">}</span></span>
<span id="cb198-20"><a href="examples-of-advanced-event-models.html#cb198-20" aria-hidden="true" tabindex="-1"></a>            field <span class="op">=</span> value</span>
<span id="cb198-21"><a href="examples-of-advanced-event-models.html#cb198-21" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span></code></pre></div>
<p>In the following code fragment, we use a <code>DEmpiricalList</code> to hold the service distribution for the types of patients. In addition, a map is defined to model the relationship between the type of patient and the priority.</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb199-1"><a href="examples-of-advanced-event-models.html#cb199-1" aria-hidden="true" tabindex="-1"></a>    <span class="co">// set up the service distribution and the random selection</span></span>
<span id="cb199-2"><a href="examples-of-advanced-event-models.html#cb199-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">distributions</span> <span class="op">=</span> listOf<span class="op">(</span>highRV<span class="op">,</span> mediumRV<span class="op">,</span> lowRV<span class="op">)</span></span>
<span id="cb199-3"><a href="examples-of-advanced-event-models.html#cb199-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">distributionCDF</span> <span class="op">=</span> doubleArrayOf<span class="op">(</span><span class="fl">0.25</span><span class="op">,</span> <span class="fl">0.85</span><span class="op">,</span> <span class="fl">1.0</span><span class="op">)</span></span>
<span id="cb199-4"><a href="examples-of-advanced-event-models.html#cb199-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">serviceRV</span> <span class="op">=</span> REmpiricalList<span class="op">(</span><span class="kw">this</span><span class="op">,</span> distributions<span class="op">,</span> distributionCDF<span class="op">)</span></span>
<span id="cb199-5"><a href="examples-of-advanced-event-models.html#cb199-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">typeMap</span> <span class="op">=</span> mapOf<span class="op">(</span>highRV to <span class="dv">1</span><span class="op">,</span> mediumRV to <span class="dv">2</span><span class="op">,</span> lowRV to <span class="dv">3</span><span class="op">)</span></span></code></pre></div>
<p>We will use these constructs within the patient processes. In the following code, we use the <code>serviceRV</code> to randomly assign the service time distribution for the patient and then use the map to assign the patientâ€™s priority based on the service setting. The <code>clinicProcess</code> starts with a test to see if the low priority patient that arrives will balk if the doctorâ€™s waiting queue has too many people. If so, we collect statistics on the balking and exit the process.</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb200-1"><a href="examples-of-advanced-event-models.html#cb200-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> inner <span class="kw">class</span> Patient <span class="op">:</span> <span class="dt">Entity</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb200-2"><a href="examples-of-advanced-event-models.html#cb200-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">private</span> <span class="kw">val</span> <span class="va">service</span> <span class="op">=</span> serviceRV<span class="op">.</span>element</span>
<span id="cb200-3"><a href="examples-of-advanced-event-models.html#cb200-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-4"><a href="examples-of-advanced-event-models.html#cb200-4" aria-hidden="true" tabindex="-1"></a>        init <span class="op">{</span></span>
<span id="cb200-5"><a href="examples-of-advanced-event-models.html#cb200-5" aria-hidden="true" tabindex="-1"></a>            priority <span class="op">=</span> typeMap<span class="op">[</span>service<span class="op">]!!</span></span>
<span id="cb200-6"><a href="examples-of-advanced-event-models.html#cb200-6" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb200-7"><a href="examples-of-advanced-event-models.html#cb200-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-8"><a href="examples-of-advanced-event-models.html#cb200-8" aria-hidden="true" tabindex="-1"></a>        <span class="kw">val</span> <span class="va">clinicProcess</span> <span class="op">=</span> process <span class="op">{</span></span>
<span id="cb200-9"><a href="examples-of-advanced-event-models.html#cb200-9" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">((</span>priority <span class="op">==</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="op">(</span>doctorQ<span class="op">.</span>size <span class="op">&gt;=</span> balkCriteria<span class="op">))</span> <span class="op">{</span></span>
<span id="cb200-10"><a href="examples-of-advanced-event-models.html#cb200-10" aria-hidden="true" tabindex="-1"></a>                <span class="co">// record balking</span></span>
<span id="cb200-11"><a href="examples-of-advanced-event-models.html#cb200-11" aria-hidden="true" tabindex="-1"></a>                balkingProb<span class="op">.</span>value <span class="op">=</span> <span class="fl">1.0</span></span>
<span id="cb200-12"><a href="examples-of-advanced-event-models.html#cb200-12" aria-hidden="true" tabindex="-1"></a>                numBalked<span class="op">.</span>increment<span class="op">()</span></span>
<span id="cb200-13"><a href="examples-of-advanced-event-models.html#cb200-13" aria-hidden="true" tabindex="-1"></a>                return<span class="at">@process</span></span>
<span id="cb200-14"><a href="examples-of-advanced-event-models.html#cb200-14" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb200-15"><a href="examples-of-advanced-event-models.html#cb200-15" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>priority <span class="op">==</span> <span class="dv">3</span><span class="op">){</span></span>
<span id="cb200-16"><a href="examples-of-advanced-event-models.html#cb200-16" aria-hidden="true" tabindex="-1"></a>                balkingProb<span class="op">.</span>value <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb200-17"><a href="examples-of-advanced-event-models.html#cb200-17" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb200-18"><a href="examples-of-advanced-event-models.html#cb200-18" aria-hidden="true" tabindex="-1"></a>            use<span class="op">(</span>triageNurseR<span class="op">,</span> delayDuration <span class="op">=</span> triageRV<span class="op">)</span></span>
<span id="cb200-19"><a href="examples-of-advanced-event-models.html#cb200-19" aria-hidden="true" tabindex="-1"></a>            <span class="co">// only low priority renege</span></span>
<span id="cb200-20"><a href="examples-of-advanced-event-models.html#cb200-20" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>priority <span class="op">==</span> <span class="dv">3</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb200-21"><a href="examples-of-advanced-event-models.html#cb200-21" aria-hidden="true" tabindex="-1"></a>                schedule<span class="op">(</span>this<span class="at">@Patient</span><span class="op">::</span>renegeAction<span class="op">,</span> renegeTimeRV<span class="op">,</span> message <span class="op">=</span> this<span class="at">@Patient</span><span class="op">)</span></span>
<span id="cb200-22"><a href="examples-of-advanced-event-models.html#cb200-22" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb200-23"><a href="examples-of-advanced-event-models.html#cb200-23" aria-hidden="true" tabindex="-1"></a>            <span class="kw">val</span> <span class="va">a</span> <span class="op">=</span> seize<span class="op">(</span>doctorR<span class="op">)</span></span>
<span id="cb200-24"><a href="examples-of-advanced-event-models.html#cb200-24" aria-hidden="true" tabindex="-1"></a>            delay<span class="op">(</span>service<span class="op">)</span></span>
<span id="cb200-25"><a href="examples-of-advanced-event-models.html#cb200-25" aria-hidden="true" tabindex="-1"></a>            release<span class="op">(</span>a<span class="op">)</span></span>
<span id="cb200-26"><a href="examples-of-advanced-event-models.html#cb200-26" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>priority <span class="op">==</span> <span class="dv">3</span><span class="op">){</span></span>
<span id="cb200-27"><a href="examples-of-advanced-event-models.html#cb200-27" aria-hidden="true" tabindex="-1"></a>                renegingProb<span class="op">.</span>value <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb200-28"><a href="examples-of-advanced-event-models.html#cb200-28" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb200-29"><a href="examples-of-advanced-event-models.html#cb200-29" aria-hidden="true" tabindex="-1"></a>            <span class="kw">val</span> <span class="va">st</span> <span class="op">=</span> time <span class="op">-</span> this<span class="at">@Patient</span><span class="op">.</span>createTime</span>
<span id="cb200-30"><a href="examples-of-advanced-event-models.html#cb200-30" aria-hidden="true" tabindex="-1"></a>            timeInSystem<span class="op">.</span>value <span class="op">=</span> st</span>
<span id="cb200-31"><a href="examples-of-advanced-event-models.html#cb200-31" aria-hidden="true" tabindex="-1"></a>            sysTimeMap<span class="op">[</span>priority<span class="op">]?.</span>value <span class="op">=</span> st</span>
<span id="cb200-32"><a href="examples-of-advanced-event-models.html#cb200-32" aria-hidden="true" tabindex="-1"></a>            numServed<span class="op">.</span>increment<span class="op">()</span></span>
<span id="cb200-33"><a href="examples-of-advanced-event-models.html#cb200-33" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span></code></pre></div>
<p>Patients that get past the balking logic complete the rest of the process and thus do not balk. A response variable is used to collect this statistic. Then, the patient uses the triage nurse. After using the triage nurse, the low priority patient might need to renege. Thus, the low priority patient schedules the reneging action. All patients proceed to used the doctor. After using the doctor, if the patient is a low priority patient, then the patient must not have reneging and statistics are collected. Finally, statistics are collected upon departure from the process. Letâ€™s take a closer look at the reneging action logic.</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb201-1"><a href="examples-of-advanced-event-models.html#cb201-1" aria-hidden="true" tabindex="-1"></a>        <span class="kw">private</span> <span class="kw">fun</span> <span class="fu">renegeAction</span><span class="op">(</span><span class="va">event</span><span class="op">:</span> <span class="dt">KSLEvent</span>&lt;<span class="va">Patient</span>&gt;<span class="op">)</span> <span class="op">{</span></span>
<span id="cb201-2"><a href="examples-of-advanced-event-models.html#cb201-2" aria-hidden="true" tabindex="-1"></a>            <span class="kw">val</span> <span class="va">request</span><span class="op">:</span> ProcessModel<span class="op">.</span>Entity<span class="op">.</span>Request<span class="op">?</span> <span class="op">=</span> doctorQ<span class="op">.</span>find <span class="op">{</span> it<span class="op">.</span>entity <span class="op">==</span> event<span class="op">.</span>message <span class="op">}</span></span>
<span id="cb201-3"><a href="examples-of-advanced-event-models.html#cb201-3" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>request <span class="op">!=</span> <span class="kw">null</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb201-4"><a href="examples-of-advanced-event-models.html#cb201-4" aria-hidden="true" tabindex="-1"></a>                doctorQ<span class="op">.</span>removeAndTerminate<span class="op">(</span>request<span class="op">)</span></span>
<span id="cb201-5"><a href="examples-of-advanced-event-models.html#cb201-5" aria-hidden="true" tabindex="-1"></a>                <span class="co">// reneging statistics</span></span>
<span id="cb201-6"><a href="examples-of-advanced-event-models.html#cb201-6" aria-hidden="true" tabindex="-1"></a>                renegingProb<span class="op">.</span>value <span class="op">=</span> <span class="fl">1.0</span></span>
<span id="cb201-7"><a href="examples-of-advanced-event-models.html#cb201-7" aria-hidden="true" tabindex="-1"></a>                numReneged<span class="op">.</span>increment<span class="op">()</span></span>
<span id="cb201-8"><a href="examples-of-advanced-event-models.html#cb201-8" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb201-9"><a href="examples-of-advanced-event-models.html#cb201-9" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span></code></pre></div>
<p>The low priority patient schedules its possible reneging. One can think of this as
the patient, setting an alarm clock (the event scheduled by the entity) for when to renege. This must be done because once the low priority patient seizes the doctor it may be suspended and cannot proceed (by itself) to exit the queue after a period of time. Thus, an event is scheduled at the time of the reneging (essentially when the patientâ€™s patience runs out). The above code is the event action. Here, the doctor queue (<code>doctorQ</code>) is searched to find the same entity that scheduled the event. If that entityâ€™s request is found then the request is removed from the doctor queue and reneging statistics are collected. If a request is not found, there is nothing to do because the patient has already started seeing the doctor.</p>
<p>Notice that the removal of the entity from the queue uses the <code>removeAndTerminate()</code> method of the <code>RequestQ</code> class. Since the entity is suspended within the process and is being held in the queue, we must remove the entityâ€™s request from the queue and <em>terminate</em> its process. For more complex termination situations, the user can supply a function to be invoked after the process is terminated via a parameter of the <code>removeAndTerminate()</code> method. For example, such a function could allow for the sending of the removed entity to further processing.</p>
<p>The results from simulating the clinic for 30 days of operation are as follows.</p>
<p><strong>Walk-in Clinic Statistical Summary Report</strong></p>
<table>
<thead>
<tr class="header">
<th align="center">Name</th>
<th align="center">Count</th>
<th align="center">Average</th>
<th align="center">Half-Width</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">DoctorQ:NumInQ</td>
<td align="center">30</td>
<td align="center">0.999</td>
<td align="center">0.349</td>
</tr>
<tr class="even">
<td align="center">DoctorQ:TimeInQ</td>
<td align="center">30</td>
<td align="center">5.37</td>
<td align="center">1.863</td>
</tr>
<tr class="odd">
<td align="center">Doctors:InstantaneousUtil</td>
<td align="center">30</td>
<td align="center">0.769</td>
<td align="center">0.03</td>
</tr>
<tr class="even">
<td align="center">Doctors:NumBusyUnits</td>
<td align="center">30</td>
<td align="center">3.847</td>
<td align="center">0.148</td>
</tr>
<tr class="odd">
<td align="center">Doctors:ScheduledUtil</td>
<td align="center">30</td>
<td align="center">0.769</td>
<td align="center">0.03</td>
</tr>
<tr class="even">
<td align="center">TriageNurse:InstantaneousUtil</td>
<td align="center">30</td>
<td align="center">0.421</td>
<td align="center">0.016</td>
</tr>
<tr class="odd">
<td align="center">TriageNurse:NumBusyUnits</td>
<td align="center">30</td>
<td align="center">0.421</td>
<td align="center">0.016</td>
</tr>
<tr class="even">
<td align="center">TriageNurse:ScheduledUtil</td>
<td align="center">30</td>
<td align="center">0.421</td>
<td align="center">0.016</td>
</tr>
<tr class="odd">
<td align="center">TriageNurse:Q:NumInQ</td>
<td align="center">30</td>
<td align="center">0.154</td>
<td align="center">0.022</td>
</tr>
<tr class="even">
<td align="center">TriageNurse:Q:TimeInQ</td>
<td align="center">30</td>
<td align="center">0.888</td>
<td align="center">0.106</td>
</tr>
<tr class="odd">
<td align="center">Walk-In Clinic:TimeInSystem</td>
<td align="center">30</td>
<td align="center">33.334</td>
<td align="center">2.38</td>
</tr>
<tr class="even">
<td align="center">Walk-In Clinic:TimeInSystemHigh</td>
<td align="center">30</td>
<td align="center">43.738</td>
<td align="center">0.902</td>
</tr>
<tr class="odd">
<td align="center">Walk-In Clinic:TimeInSystemMedium</td>
<td align="center">30</td>
<td align="center">32.619</td>
<td align="center">3.07</td>
</tr>
<tr class="even">
<td align="center">Walk-In Clinic:TimeInSystemLow</td>
<td align="center">30</td>
<td align="center">16.819</td>
<td align="center">0.622</td>
</tr>
<tr class="odd">
<td align="center">Walk-In Clinic:ProbBalking</td>
<td align="center">30</td>
<td align="center">0.001</td>
<td align="center">0.003</td>
</tr>
<tr class="even">
<td align="center">Walk-In Clinic:ProbReneging</td>
<td align="center">30</td>
<td align="center">0.281</td>
<td align="center">0.084</td>
</tr>
<tr class="odd">
<td align="center">Walk-In Clinic:NumServed</td>
<td align="center">30</td>
<td align="center">91.133</td>
<td align="center">2.227</td>
</tr>
<tr class="even">
<td align="center">Walk-In Clinic:NumBalked</td>
<td align="center">30</td>
<td align="center">0.033</td>
<td align="center">0.068</td>
</tr>
<tr class="odd">
<td align="center">Walk-In Clinic:NumReneged</td>
<td align="center">30</td>
<td align="center">4.4</td>
<td align="center">1.453</td>
</tr>
</tbody>
</table>
<p>Notice that a fairly high (28%) of the low priority patients renege before seeing the doctor. This may
or may not be acceptable in light of the other performance measures for
the system. The reader is asked to further explore this model in the
exercises. While some analytical work has been done for queuing systems involving
balking and reneging, simulation allows for the modeling of more
realistic types of queueing situations as well as even more complicated
systems. The next subsection will explore such a situation.</p>
</div>
<div id="modeling-a-reorder-point-reorder-quantity-inventory-policy" class="section level3 hasAnchor" number="7.3.2">
<h3><span class="header-section-number">7.3.2</span> Modeling a Reorder Point, Reorder Quantity Inventory Policy<a href="examples-of-advanced-event-models.html#modeling-a-reorder-point-reorder-quantity-inventory-policy" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In an inventory system, there are units of an item (e.g.Â computer
printers, etc.) for which customers make demands. If the item is
available (in stock) then the customer can receive the item and depart.
If the item is not on hand when a demand from a customer arrives then
the customer may depart without the item (i.e.Â lost sales) or the
customer may be placed on a list for when the item becomes available
(i.e.Â back ordered). In a sense, the item is like a resource that is
consumed by the customer. Unlike the previous notions of a resource,
inventory can be replenished. The proper control of the replenishment
process is the key to providing adequate customer service. There are two
basic questions that must be addressed when controlling the inventory
replenishment process: 1) When to order? and 2) How much to order?. If
the system does not order enough or does not order at the right time,
the system not be able to fill customer demand in a timely manner.
Figure <a href="examples-of-advanced-event-models.html#fig:Inventory">7.7</a> illustrates a simple inventory system.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:Inventory"></span>
<img src="figures2/ch7/figInventory.png" alt="A simple reorder point, reorder quantity inventory system" width="90%" height="90%" />
<p class="caption">
Figure 7.7: A simple reorder point, reorder quantity inventory system
</p>
</div>
<p>There are a number of different ways to manage the replenishment process
for an inventory item. These different methods are called
<em>inventory control policies</em>. An inventory control policy must determine (at the
very least) when to place a replenishment order and how much to order.
This section examines the use of a reorder point (<span class="math inline">\(r\)</span>), reorder quantity
(<span class="math inline">\(Q\)</span>) inventory policy. This is often denoted as an <span class="math inline">\((r, Q)\)</span> inventory
policy. The modeling of a number of other inventory control policies
will be explored as exercises. After developing a basic understanding of
how to model an <span class="math inline">\((r, Q)\)</span> inventory system, the modeling can be expanded
to study supply chains. A supply chain can be thought of as a network
of locations that hold inventory in order to satisfy end customer
demand.</p>
<p>The topic of inventory systems has been well studied. A full exposition of the
topic of inventory systems is beyond the scope of this text, but the
reader can consult a number of texts within the area, such as
<span class="citation">(<a href="#ref-hadley1963analysis" role="doc-biblioref">Hadley and Whitin 1963</a>)</span>, <span class="citation">(<a href="#ref-2006inventory" role="doc-biblioref">AxsÃ¤ter 2006</a>)</span>, <span class="citation">Silver, Pyke, and Peterson (<a href="#ref-silver1998inventory" role="doc-biblioref">1998</a>)</span>, or
<span class="citation">(<a href="#ref-zipkin2000foundations" role="doc-biblioref">Zipkin 2000</a>)</span> for more details. The reader interested in
supply chain modeling might consult <span class="citation">(<a href="#ref-nahmias2001production" role="doc-biblioref">Nahmias 2001</a>)</span>,
<span class="citation">(<a href="#ref-askin2002design" role="doc-biblioref">Askin and Goldberg 2002</a>)</span>, <span class="citation">(<a href="#ref-chopra2007supply" role="doc-biblioref">Chopra and Meindl 2007</a>)</span>, or <span class="citation">(<a href="#ref-ballou2004business" role="doc-biblioref">Ballou 2004</a>)</span>.</p>
<p>Within this section we will develop a model of a continuous review <span class="math inline">\((r, Q)\)</span> inventory
system with back-ordering. In a continuous review <span class="math inline">\((r, Q)\)</span> inventory
control system, demand arrives according to some stochastic process.
When a demand (customer order) occurs, the amount of the demand is
determined, and then the system checks for the availability of stock. If
the stock on-hand is enough for the order, the demand is filled and the
quantity on-hand is decreased. On the other hand, if the stock on-hand
is not enough to fill the order, the entire order is back-ordered. The
back-orders are accumulated in a queue and they will be filled after the
arrival of a replenishment order. Assume for simplicity that the
back-orders are filled on a first come first served basis. The inventory
position (inventory on-hand plus on-order minus back-orders) is checked
each time after a regular customer demand and the occurrence of a
back-order. If the inventory position reaches or falls under the reorder
point, a replenishment order is placed. The replenishment order will
take a possibly random amount of time to arrive and fill any back-orders
and increase the on-hand inventory. The time from when a replenishment
order is placed until the time that it arrives to fill any back-orders
is often called the lead time for the item.</p>
<p>There are three key state variables that are required to model this
situation. Let <span class="math inline">\(I(t)\)</span>, <span class="math inline">\(\mathit{IO}(t)\)</span>, and <span class="math inline">\(\mathit{BO}(t)\)</span> be the
amount of inventory on hand, on order, and back-ordered, respectively at
time <span class="math inline">\(t\)</span>. The net inventory, <span class="math inline">\(\mathit{IN}(t) = I(t) - \mathit{BO}(t)\)</span>,
represents the amount of inventory (positive or negative). Notice that
if <span class="math inline">\(I(t) &gt; 0\)</span>, then <span class="math inline">\(\mathit{BO}(t) = 0\)</span>, and that if
<span class="math inline">\(\mathit{BO}(t) &gt; 0\)</span>, then <span class="math inline">\(I(t) = 0\)</span>. These variables compose the
inventory position, which is defined as:</p>
<p><span class="math display">\[\mathit{IP}(t) = I(t) + \mathit{IO}(t) - \mathit{BO}(t)\]</span></p>
<p>The inventory position represents both the current amount on hand,
<span class="math inline">\(I(t)\)</span>, the amounted back ordered, <span class="math inline">\(\mathit{BO}(t)\)</span>, and the amount
previously ordered, <span class="math inline">\(\mathit{IO}(t)\)</span>. Thus, when placing an order, the
inventory position can be used to determine whether or not a
replenishment order needs to be placed. Since, <span class="math inline">\(\mathit{IO}(t)\)</span>, is
included in <span class="math inline">\(\mathit{IP}(t)\)</span>, the system will only order, when
outstanding orders are not enough to get <span class="math inline">\(\mathit{IP}(t)\)</span> above the
reorder point.</p>
<p>In the continuous review <span class="math inline">\((r, Q)\)</span> policy, the inventory position must be
checked against the reorder point as demands arrive to be filled. After
filling (or back-ordering) a demand, either <span class="math inline">\(I(t)\)</span> or <span class="math inline">\(\mathit{BO}(t)\)</span>
will have changed (and thus <span class="math inline">\(\mathit{IP}(t)\)</span> will change). If
<span class="math inline">\(\mathit{IP}(t)\)</span> changes, it must be checked against the reorder point.
If <span class="math inline">\(\mathit{IP}(t) \leq r\)</span>, then an order for the amount <span class="math inline">\(Q\)</span> is placed.</p>
<p>The key performance measures for this type of system are the average
amount of inventory on hand, the average amount of inventory
back-ordered, the percentage of time that the system is out of stock,
and the average number of orders made per unit time.</p>
<p>Letâ€™s discuss these performance measures before indicating how to
collect them within a simulation. The average inventory on hand and the
average amount of inventory back-ordered can be defined as follows:</p>
<p><span class="math display">\[\begin{aligned}
\bar{I} &amp; = \frac{1}{T}\int_0^T I(t)\mathrm{d}t \\
\overline{\mathit{BO}} &amp; = \frac{1}{T}\int_0^T \mathit{BO}(t)\mathrm{d}t\end{aligned}\]</span></p>
<p>As can be seen from the definitions, both <span class="math inline">\(I(t)\)</span> and <span class="math inline">\(\mathit{BO}(t)\)</span>
are time-persistent variables and their averages are time averages. Under
certain conditions as <span class="math inline">\(T\)</span> goes to infinity, these time averages will
converge to the steady state performance for the <span class="math inline">\((r, Q)\)</span> inventory
model. The percentage of time that the system is out of stock can be
defined based on <span class="math inline">\(I(t)\)</span> as follows:</p>
<p><span class="math display">\[SO(t) =
   \begin{cases}
     1 &amp; I(t) = 0\\
     0 &amp; I(t) &gt; 0
  \end{cases}\]</span></p>
<p><span class="math display">\[\overline{\mathit{SO}} = \frac{1}{T}\int_0^T \mathit{SO}(t)\mathrm{d}t\]</span></p>
<p>Thus, the variable <span class="math inline">\(SO(t)\)</span> indicates whether or not there is no stock on
hand at any time. A time average value for this variable can also be
defined and interpreted as the percentage of time that the system is out
of stock. One minus <span class="math inline">\(\overline{\mathit{SO}}\)</span> can be interpreted as the
proportion of time that the system has stock on hand. Under certain
conditions (but not always), this can also be interpreted as the fill
rate of the system (i.e.Â the fraction of demands that can be filled
immediately). Let <span class="math inline">\(Y_i\)</span> be an indicator variable that indicates 1 if the
<span class="math inline">\(i^{th}\)</span> demand is immediately filled (without back ordering) and 0 if
the <span class="math inline">\(i^{th}\)</span> demand is back ordered upon arrival. Then, the fill rate is
defined as follows.</p>
<p><span class="math display">\[\overline{\mathit{FR}} = \frac{1}{n} \sum_{i=1}^{n} Y_i\]</span></p>
<p>Thus, the fill rate is just the average number of demands that are
directly satisfied from on hand inventory. The variables
<span class="math inline">\(\overline{\mathit{SO}}\)</span> and <span class="math inline">\(\overline{\mathit{FR}}\)</span> are measures of
customer service.</p>
<p>To understand the cost of operating the inventory policy, the average
number of replenishment orders made per unit time or the <em>average order
frequency</em> needs to be measured. Let <span class="math inline">\(N(t)\)</span> be the number of
replenishment orders placed in <span class="math inline">\((0,t]\)</span>, then the average order frequency
over the period <span class="math inline">\((0,t]\)</span> can be defined as:</p>
<p><span class="math display">\[\overline{\mathit{OF}} = \frac{N(T)}{T}\]</span></p>
<p>Notice that the average order frequency is a rate (units/time).</p>
<p>In order to determine the best settings of the reorder point and reorder
quantity, we need an objective function that trades-off the key
performance measures within the system. This can be achieved by
developing a total cost equation on a per time period basis. Let <span class="math inline">\(h\)</span> be
the holding cost for the item in terms of $/unit/time. That is, for
every unit of inventory held, we accrue <span class="math inline">\(h\)</span> dollars per time period. Let
<span class="math inline">\(b\)</span> be the back order cost for the item in terms of $/unit/time. That
is, for every unit of inventory back ordered, we accrue <span class="math inline">\(b\)</span> dollars per
time period. finally, let <span class="math inline">\(k\)</span> represent the cost in dollars per order
whenever an order is placed. The settings of the reorder point and
reorder quantity depend on these cost factors. For example, if the cost
per order is very high, then we should not want to order very often.
However, this means that we would need to carry a lot of inventory to
prevent a high chance of stocking out. If we carry more inventory, then
the inventory holding cost is high.</p>
<p>The average total cost per time period can be formulated as follows:</p>
<p><span class="math display">\[\overline{\mathit{TC}} = k\overline{\mathit{OF}} + h\bar{I} + b\overline{\mathit{BO}}\]</span></p>
<p>A discussion of the technical issues and analytical results related to
these variables can be found in ChapterÂ 6 of <span class="citation">(<a href="#ref-zipkin2000foundations" role="doc-biblioref">Zipkin 2000</a>)</span>.
Letâ€™s take a look at an example that illustrates an inventory situation and simulates it using the KSL.</p>
<hr />
<div class="example">
<p><span id="exm:exRQModel" class="example"><strong>Example 7.3  </strong></span>An inventory manager is
interested in understanding the cost and service trade-offs related to
the inventory management of computer printers. Suppose customer demand
occurs according to a Poisson process at a rate of 3.6 units per month
and the lead time is 0.5 months. The manager has estimated that the
holding cost for the item is approximately $0.25 per unit per month. In
addition, when a back-order occurs, the estimate cost will be $1.75 per
unit per month. Every time that an order is placed, it costs
approximately $0.15 to prepare and process the order. The inventory
manager has set the reorder point to 1 units and the reorder quantity to
2 units. Develop a simulation model that estimates the following
quantities:</p>
</div>
<ol style="list-style-type: decimal">
<li><p>Average inventory on hand and back ordered</p></li>
<li><p>Average frequency at which orders are placed</p></li>
<li><p>Probability that an arriving customer does not have their demand
immediately filled.</p></li>
</ol>
<hr />
<p>The examples associated with this chapter provide for a framework to model this kind of situation as well as to expand to model other inventory policies. We start the modeling by first defining an interface to represent something that can fill demand.</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb202-1"><a href="examples-of-advanced-event-models.html#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="kw">interface</span> InventoryFillerIfc <span class="op">{</span></span>
<span id="cb202-2"><a href="examples-of-advanced-event-models.html#cb202-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb202-3"><a href="examples-of-advanced-event-models.html#cb202-3" aria-hidden="true" tabindex="-1"></a><span class="co">     * Represents an arrival of demand to be provided by the filler</span></span>
<span id="cb202-4"><a href="examples-of-advanced-event-models.html#cb202-4" aria-hidden="true" tabindex="-1"></a><span class="co">     *</span></span>
<span id="cb202-5"><a href="examples-of-advanced-event-models.html#cb202-5" aria-hidden="true" tabindex="-1"></a><span class="co">     * @param demand</span></span>
<span id="cb202-6"><a href="examples-of-advanced-event-models.html#cb202-6" aria-hidden="true" tabindex="-1"></a><span class="co">     */</span></span>
<span id="cb202-7"><a href="examples-of-advanced-event-models.html#cb202-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">fun</span> <span class="fu">fillInventory</span><span class="op">(</span><span class="va">demand</span><span class="op">:</span> <span class="dt">Int</span><span class="op">)</span></span>
<span id="cb202-8"><a href="examples-of-advanced-event-models.html#cb202-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Then, we implement an abstract base class to represent different kinds of inventory situations. The class <code>Inventory</code> represents the key state variables of on-hand, on-order, and amount back ordered as time weighted response variables. The class requires the specification of the initial amount of inventory on-hand and a reference to an instance of an class that implements the <code>InventoryFillerIfc</code> interface. This instance is responsible for resupplying the inventory when it places a replenishment order.</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb203-1"><a href="examples-of-advanced-event-models.html#cb203-1" aria-hidden="true" tabindex="-1"></a>abstract <span class="kw">class</span> Inventory<span class="op">(</span><span class="va">parent</span><span class="op">:</span> <span class="dt">ModelElement</span><span class="op">,</span> <span class="va">initialOnHand</span><span class="op">:</span> <span class="dt">Int</span> <span class="op">=</span> <span class="dv">1</span><span class="op">,</span> <span class="va">replenisher</span><span class="op">:</span> <span class="dt">InventoryFillerIfc</span><span class="op">,</span> <span class="va">name</span><span class="op">:</span> <span class="dt">String</span><span class="op">?)</span> <span class="op">:</span></span>
<span id="cb203-2"><a href="examples-of-advanced-event-models.html#cb203-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">ModelElement</span><span class="op">(</span><span class="va">parent</span><span class="op">,</span> <span class="va">name</span><span class="op">),</span> <span class="dt">InventoryFillerIfc</span> <span class="op">{</span></span>
<span id="cb203-3"><a href="examples-of-advanced-event-models.html#cb203-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-4"><a href="examples-of-advanced-event-models.html#cb203-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> <span class="va">replenishmentFiller</span><span class="op">:</span> InventoryFillerIfc <span class="op">=</span> replenisher</span>
<span id="cb203-5"><a href="examples-of-advanced-event-models.html#cb203-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-6"><a href="examples-of-advanced-event-models.html#cb203-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">protected</span> <span class="kw">val</span> <span class="va">myAmountBackOrdered</span> <span class="op">=</span> TWResponse<span class="op">(</span><span class="kw">this</span><span class="op">,</span> <span class="st">&quot;</span><span class="ss">${</span><span class="kw">this</span><span class="op">.</span>name<span class="ss">}</span><span class="st">:AmountBackOrdered&quot;</span><span class="op">)</span></span>
<span id="cb203-7"><a href="examples-of-advanced-event-models.html#cb203-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">val</span> <span class="va">amountBackOrdered</span><span class="op">:</span> <span class="kw">Int</span></span>
<span id="cb203-8"><a href="examples-of-advanced-event-models.html#cb203-8" aria-hidden="true" tabindex="-1"></a>        <span class="kw">get</span><span class="op">()</span> <span class="op">=</span> myAmountBackOrdered<span class="op">.</span>value<span class="op">.</span>toInt<span class="op">()</span></span>
<span id="cb203-9"><a href="examples-of-advanced-event-models.html#cb203-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-10"><a href="examples-of-advanced-event-models.html#cb203-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">protected</span> <span class="kw">val</span> <span class="va">myOnOrder</span> <span class="op">=</span> TWResponse<span class="op">(</span><span class="kw">this</span><span class="op">,</span> <span class="st">&quot;</span><span class="ss">${</span><span class="kw">this</span><span class="op">.</span>name<span class="ss">}</span><span class="st">:OnOrder&quot;</span><span class="op">)</span></span>
<span id="cb203-11"><a href="examples-of-advanced-event-models.html#cb203-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">val</span> <span class="va">onOrder</span><span class="op">:</span> <span class="kw">Int</span></span>
<span id="cb203-12"><a href="examples-of-advanced-event-models.html#cb203-12" aria-hidden="true" tabindex="-1"></a>        <span class="kw">get</span><span class="op">()</span> <span class="op">=</span> myOnOrder<span class="op">.</span>value<span class="op">.</span>toInt<span class="op">()</span></span>
<span id="cb203-13"><a href="examples-of-advanced-event-models.html#cb203-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-14"><a href="examples-of-advanced-event-models.html#cb203-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">protected</span> <span class="kw">val</span> <span class="va">myOnHand</span> <span class="op">=</span> TWResponse<span class="op">(</span><span class="kw">this</span><span class="op">,</span> theInitialValue <span class="op">=</span> initialOnHand<span class="op">.</span>toDouble<span class="op">(),</span> name <span class="op">=</span> <span class="st">&quot;</span><span class="ss">${</span><span class="kw">this</span><span class="op">.</span>name<span class="ss">}</span><span class="st">:OnHand&quot;</span><span class="op">)</span></span>
<span id="cb203-15"><a href="examples-of-advanced-event-models.html#cb203-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">val</span> <span class="va">onHand</span><span class="op">:</span> <span class="kw">Int</span></span>
<span id="cb203-16"><a href="examples-of-advanced-event-models.html#cb203-16" aria-hidden="true" tabindex="-1"></a>        <span class="kw">get</span><span class="op">()</span> <span class="op">=</span> myOnHand<span class="op">.</span>value<span class="op">.</span>toInt<span class="op">()</span></span>
<span id="cb203-17"><a href="examples-of-advanced-event-models.html#cb203-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-18"><a href="examples-of-advanced-event-models.html#cb203-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">fun</span> <span class="fu">setInitialOnHand</span><span class="op">(</span><span class="va">amount</span><span class="op">:</span> <span class="dt">Int</span><span class="op">){</span></span>
<span id="cb203-19"><a href="examples-of-advanced-event-models.html#cb203-19" aria-hidden="true" tabindex="-1"></a>        require<span class="op">(</span>amount<span class="op">&gt;=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span><span class="st">&quot;The initial amount on hand must be &gt;= 0&quot;</span><span class="op">}</span></span>
<span id="cb203-20"><a href="examples-of-advanced-event-models.html#cb203-20" aria-hidden="true" tabindex="-1"></a>        myOnHand<span class="op">.</span>initialValue <span class="op">=</span> amount<span class="op">.</span>toDouble<span class="op">()</span></span>
<span id="cb203-21"><a href="examples-of-advanced-event-models.html#cb203-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span></code></pre></div>
<p>The base class also defines some additional responses and a queue to hold demands that must be back ordered because they cannot be immediately filled from stock on-hand. Then, it defines three abstract methods that must be implemented by sub-classes. There must be a way to define the initial policy parameters of the inventory control policy, a method for placing replenishment orders, and a method to check the inventory position.</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb204-1"><a href="examples-of-advanced-event-models.html#cb204-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">val</span> <span class="va">onHandResponse</span><span class="op">:</span> TWResponseCIfc</span>
<span id="cb204-2"><a href="examples-of-advanced-event-models.html#cb204-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">get</span><span class="op">()</span> <span class="op">=</span> myOnHand</span>
<span id="cb204-3"><a href="examples-of-advanced-event-models.html#cb204-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-4"><a href="examples-of-advanced-event-models.html#cb204-4" aria-hidden="true" tabindex="-1"></a>    init <span class="op">{</span></span>
<span id="cb204-5"><a href="examples-of-advanced-event-models.html#cb204-5" aria-hidden="true" tabindex="-1"></a>        myOnHand<span class="op">.</span>attachIndicator<span class="op">({</span> x <span class="op">-&gt;</span> x <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">},</span> name <span class="op">=</span> <span class="st">&quot;</span><span class="ss">${</span><span class="kw">this</span><span class="op">.</span>name<span class="ss">}</span><span class="st">:PTimeWithStockOnHand&quot;</span><span class="op">)</span></span>
<span id="cb204-6"><a href="examples-of-advanced-event-models.html#cb204-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb204-7"><a href="examples-of-advanced-event-models.html#cb204-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-8"><a href="examples-of-advanced-event-models.html#cb204-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">val</span> <span class="va">inventoryPosition</span><span class="op">:</span> <span class="kw">Int</span></span>
<span id="cb204-9"><a href="examples-of-advanced-event-models.html#cb204-9" aria-hidden="true" tabindex="-1"></a>        <span class="kw">get</span><span class="op">()</span> <span class="op">=</span> onHand <span class="op">+</span> onOrder <span class="op">-</span> amountBackOrdered</span>
<span id="cb204-10"><a href="examples-of-advanced-event-models.html#cb204-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-11"><a href="examples-of-advanced-event-models.html#cb204-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">protected</span> <span class="kw">val</span> <span class="va">myBackOrderQ</span><span class="op">:</span> Queue<span class="op">&lt;</span>Demand<span class="op">&gt;</span> <span class="op">=</span> Queue<span class="op">(</span><span class="kw">this</span><span class="op">,</span> <span class="st">&quot;</span><span class="ss">${</span><span class="kw">this</span><span class="op">.</span>name<span class="ss">}</span><span class="st">:BackOrderQ&quot;</span><span class="op">)</span></span>
<span id="cb204-12"><a href="examples-of-advanced-event-models.html#cb204-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">protected</span> <span class="kw">val</span> <span class="va">myFirstFillRate</span> <span class="op">=</span> Response<span class="op">(</span><span class="kw">this</span><span class="op">,</span> <span class="st">&quot;</span><span class="ss">${</span><span class="kw">this</span><span class="op">.</span>name<span class="ss">}</span><span class="st">:FillRate&quot;</span><span class="op">)</span></span>
<span id="cb204-13"><a href="examples-of-advanced-event-models.html#cb204-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-14"><a href="examples-of-advanced-event-models.html#cb204-14" aria-hidden="true" tabindex="-1"></a>    inner <span class="kw">class</span> Demand<span class="op">(</span><span class="kw">val</span> <span class="va">originalAmount</span><span class="op">:</span> <span class="dt">Int</span> <span class="op">=</span> <span class="dv">1</span><span class="op">,</span> <span class="kw">var</span> <span class="va">amountNeeded</span><span class="op">:</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">:</span> <span class="dt">QObject</span><span class="op">()</span></span>
<span id="cb204-15"><a href="examples-of-advanced-event-models.html#cb204-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-16"><a href="examples-of-advanced-event-models.html#cb204-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">abstract</span> <span class="kw">fun</span> <span class="fu">setInitialPolicyParameters</span><span class="op">(</span><span class="va">param</span><span class="op">:</span> <span class="dt">DoubleArray</span><span class="op">)</span></span>
<span id="cb204-17"><a href="examples-of-advanced-event-models.html#cb204-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-18"><a href="examples-of-advanced-event-models.html#cb204-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">abstract</span> <span class="kw">fun</span> <span class="fu">replenishmentArrival</span><span class="op">(</span><span class="va">orderAmount</span><span class="op">:</span> <span class="dt">Int</span><span class="op">)</span></span>
<span id="cb204-19"><a href="examples-of-advanced-event-models.html#cb204-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-20"><a href="examples-of-advanced-event-models.html#cb204-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">protected</span> <span class="fu">abstract</span> <span class="kw">fun</span> <span class="fu">checkInventoryPosition</span><span class="op">()</span></span></code></pre></div>
<p>The base class defines what must happen to fill a demand, how to back order demand, and how to fill waiting back orders. The following code presents the default implementations. The fill demand method implements what happens when demand is fully filled. The back order demand method indicates what should be done for the amount that must be back ordered.</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb205-1"><a href="examples-of-advanced-event-models.html#cb205-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">protected</span> <span class="kw">open</span> <span class="kw">fun</span> <span class="fu">fillDemand</span><span class="op">(</span><span class="va">demand</span><span class="op">:</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb205-2"><a href="examples-of-advanced-event-models.html#cb205-2" aria-hidden="true" tabindex="-1"></a>        myFirstFillRate<span class="op">.</span>value <span class="op">=</span> <span class="fl">1.0</span></span>
<span id="cb205-3"><a href="examples-of-advanced-event-models.html#cb205-3" aria-hidden="true" tabindex="-1"></a>        myOnHand<span class="op">.</span>decrement<span class="op">(</span>demand<span class="op">.</span>toDouble<span class="op">())</span></span>
<span id="cb205-4"><a href="examples-of-advanced-event-models.html#cb205-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb205-5"><a href="examples-of-advanced-event-models.html#cb205-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb205-6"><a href="examples-of-advanced-event-models.html#cb205-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">protected</span> <span class="kw">open</span> <span class="kw">fun</span> <span class="fu">backOrderDemand</span><span class="op">(</span><span class="va">demand</span><span class="op">:</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb205-7"><a href="examples-of-advanced-event-models.html#cb205-7" aria-hidden="true" tabindex="-1"></a>        myFirstFillRate<span class="op">.</span>value <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb205-8"><a href="examples-of-advanced-event-models.html#cb205-8" aria-hidden="true" tabindex="-1"></a>        <span class="co">// determine amount to be back ordered</span></span>
<span id="cb205-9"><a href="examples-of-advanced-event-models.html#cb205-9" aria-hidden="true" tabindex="-1"></a>        <span class="kw">val</span> <span class="va">amtBO</span><span class="op">:</span> <span class="kw">Int</span> <span class="op">=</span> demand <span class="op">-</span> onHand</span>
<span id="cb205-10"><a href="examples-of-advanced-event-models.html#cb205-10" aria-hidden="true" tabindex="-1"></a>        <span class="co">// determine the amount to give</span></span>
<span id="cb205-11"><a href="examples-of-advanced-event-models.html#cb205-11" aria-hidden="true" tabindex="-1"></a>        <span class="kw">val</span> <span class="va">amtFilled</span><span class="op">:</span> <span class="kw">Int</span> <span class="op">=</span> onHand</span>
<span id="cb205-12"><a href="examples-of-advanced-event-models.html#cb205-12" aria-hidden="true" tabindex="-1"></a>        <span class="co">// give all that can be given</span></span>
<span id="cb205-13"><a href="examples-of-advanced-event-models.html#cb205-13" aria-hidden="true" tabindex="-1"></a>        myOnHand<span class="op">.</span>decrement<span class="op">(</span>amtFilled<span class="op">.</span>toDouble<span class="op">())</span></span>
<span id="cb205-14"><a href="examples-of-advanced-event-models.html#cb205-14" aria-hidden="true" tabindex="-1"></a>        myAmountBackOrdered<span class="op">.</span>increment<span class="op">(</span>amtBO<span class="op">.</span>toDouble<span class="op">())</span></span>
<span id="cb205-15"><a href="examples-of-advanced-event-models.html#cb205-15" aria-hidden="true" tabindex="-1"></a>        <span class="co">// create a demand for the back order queue</span></span>
<span id="cb205-16"><a href="examples-of-advanced-event-models.html#cb205-16" aria-hidden="true" tabindex="-1"></a>        <span class="kw">val</span> <span class="va">d</span> <span class="op">=</span> Demand<span class="op">(</span>demand<span class="op">,</span> amtBO<span class="op">)</span></span>
<span id="cb205-17"><a href="examples-of-advanced-event-models.html#cb205-17" aria-hidden="true" tabindex="-1"></a>        myBackOrderQ<span class="op">.</span>enqueue<span class="op">(</span>d<span class="op">)</span></span>
<span id="cb205-18"><a href="examples-of-advanced-event-models.html#cb205-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span></code></pre></div>
<p>The <code>fillBackOrders()</code> method can be called after a replenishment order comes in to fill requests that are waiting for inventory. In the default implementation, the amount to fill is determined and it is allocated to the waiting demand. If the demand is filled in full, it is removed from the queue; otherwise, its amount needed is reduced and it continues to wait.</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb206-1"><a href="examples-of-advanced-event-models.html#cb206-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb206-2"><a href="examples-of-advanced-event-models.html#cb206-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">protected</span> <span class="kw">open</span> <span class="kw">fun</span> <span class="fu">fillBackOrders</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb206-3"><a href="examples-of-advanced-event-models.html#cb206-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> <span class="va">amtToFill</span><span class="op">:</span> <span class="kw">Int</span> <span class="op">=</span> minOf<span class="op">(</span>amountBackOrdered<span class="op">,</span> onHand<span class="op">)</span></span>
<span id="cb206-4"><a href="examples-of-advanced-event-models.html#cb206-4" aria-hidden="true" tabindex="-1"></a>        myAmountBackOrdered<span class="op">.</span>decrement<span class="op">(</span>amtToFill<span class="op">.</span>toDouble<span class="op">())</span></span>
<span id="cb206-5"><a href="examples-of-advanced-event-models.html#cb206-5" aria-hidden="true" tabindex="-1"></a>        myOnHand<span class="op">.</span>decrement<span class="op">(</span>amtToFill<span class="op">.</span>toDouble<span class="op">())</span></span>
<span id="cb206-6"><a href="examples-of-advanced-event-models.html#cb206-6" aria-hidden="true" tabindex="-1"></a>        <span class="co">// now we have to give the amount to those waiting in the backlog queue</span></span>
<span id="cb206-7"><a href="examples-of-advanced-event-models.html#cb206-7" aria-hidden="true" tabindex="-1"></a>        <span class="co">// we assume filling is from first waiting until all of amtToFill is used</span></span>
<span id="cb206-8"><a href="examples-of-advanced-event-models.html#cb206-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>myBackOrderQ<span class="op">.</span>isNotEmpty<span class="op">)</span> <span class="op">{</span></span>
<span id="cb206-9"><a href="examples-of-advanced-event-models.html#cb206-9" aria-hidden="true" tabindex="-1"></a>            <span class="kw">val</span> <span class="va">d</span> <span class="op">=</span> myBackOrderQ<span class="op">.</span>peekNext<span class="op">()!!</span></span>
<span id="cb206-10"><a href="examples-of-advanced-event-models.html#cb206-10" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>amtToFill <span class="op">&gt;=</span> d<span class="op">.</span>amountNeeded<span class="op">)</span> <span class="op">{</span></span>
<span id="cb206-11"><a href="examples-of-advanced-event-models.html#cb206-11" aria-hidden="true" tabindex="-1"></a>                amtToFill <span class="op">=</span> amtToFill <span class="op">-</span> d<span class="op">.</span>amountNeeded</span>
<span id="cb206-12"><a href="examples-of-advanced-event-models.html#cb206-12" aria-hidden="true" tabindex="-1"></a>                d<span class="op">.</span>amountNeeded <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb206-13"><a href="examples-of-advanced-event-models.html#cb206-13" aria-hidden="true" tabindex="-1"></a>                myBackOrderQ<span class="op">.</span>removeNext<span class="op">()</span></span>
<span id="cb206-14"><a href="examples-of-advanced-event-models.html#cb206-14" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb206-15"><a href="examples-of-advanced-event-models.html#cb206-15" aria-hidden="true" tabindex="-1"></a>                d<span class="op">.</span>amountNeeded <span class="op">=</span> d<span class="op">.</span>amountNeeded <span class="op">-</span> amtToFill</span>
<span id="cb206-16"><a href="examples-of-advanced-event-models.html#cb206-16" aria-hidden="true" tabindex="-1"></a>                amtToFill <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb206-17"><a href="examples-of-advanced-event-models.html#cb206-17" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb206-18"><a href="examples-of-advanced-event-models.html#cb206-18" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>amtToFill <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb206-19"><a href="examples-of-advanced-event-models.html#cb206-19" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span></span>
<span id="cb206-20"><a href="examples-of-advanced-event-models.html#cb206-20" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb206-21"><a href="examples-of-advanced-event-models.html#cb206-21" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb206-22"><a href="examples-of-advanced-event-models.html#cb206-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb206-23"><a href="examples-of-advanced-event-models.html#cb206-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb206-24"><a href="examples-of-advanced-event-models.html#cb206-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">protected</span> <span class="kw">open</span> <span class="kw">fun</span> <span class="fu">requestReplenishment</span><span class="op">(</span><span class="va">orderAmt</span><span class="op">:</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb206-25"><a href="examples-of-advanced-event-models.html#cb206-25" aria-hidden="true" tabindex="-1"></a>        myOnOrder<span class="op">.</span>increment<span class="op">(</span>orderAmt<span class="op">.</span>toDouble<span class="op">())</span></span>
<span id="cb206-26"><a href="examples-of-advanced-event-models.html#cb206-26" aria-hidden="true" tabindex="-1"></a>        replenishmentFiller<span class="op">.</span>fillInventory<span class="op">(</span>orderAmt<span class="op">)</span></span>
<span id="cb206-27"><a href="examples-of-advanced-event-models.html#cb206-27" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span></code></pre></div>
<p>Finally, the <code>requestReplenishment()</code> method increments the amount on order and calls the registered replenishment filler to fill the order. Thus, an instance of <code>Inventory</code> acts like a filler of inventory via its implementation of the <code>InventoryFillerIfc</code> interface and the fact that it uses an instance of such a class to meet its own replenishment requirements. Now, we are ready to explore the concrete implementation for the reorder point, reorder quantity inventory policy situation. This is implemented within the <code>RQInventory</code> class.</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb207-1"><a href="examples-of-advanced-event-models.html#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> RQInventory<span class="op">(</span></span>
<span id="cb207-2"><a href="examples-of-advanced-event-models.html#cb207-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">parent</span><span class="op">:</span> <span class="dt">ModelElement</span><span class="op">,</span></span>
<span id="cb207-3"><a href="examples-of-advanced-event-models.html#cb207-3" aria-hidden="true" tabindex="-1"></a>    <span class="va">reOrderPoint</span><span class="op">:</span> <span class="dt">Int</span> <span class="op">=</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb207-4"><a href="examples-of-advanced-event-models.html#cb207-4" aria-hidden="true" tabindex="-1"></a>    <span class="va">reOrderQuantity</span><span class="op">:</span> <span class="dt">Int</span> <span class="op">=</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb207-5"><a href="examples-of-advanced-event-models.html#cb207-5" aria-hidden="true" tabindex="-1"></a>    <span class="va">initialOnHand</span> <span class="op">:</span> <span class="dt">Int</span> <span class="op">=</span> reOrderPoint + reOrderQuantity<span class="op">,</span></span>
<span id="cb207-6"><a href="examples-of-advanced-event-models.html#cb207-6" aria-hidden="true" tabindex="-1"></a>    <span class="va">replenisher</span><span class="op">:</span> <span class="dt">InventoryFillerIfc</span><span class="op">,</span></span>
<span id="cb207-7"><a href="examples-of-advanced-event-models.html#cb207-7" aria-hidden="true" tabindex="-1"></a>    <span class="va">name</span><span class="op">:</span> <span class="dt">String</span><span class="op">?</span></span>
<span id="cb207-8"><a href="examples-of-advanced-event-models.html#cb207-8" aria-hidden="true" tabindex="-1"></a><span class="op">)</span> <span class="op">:</span> <span class="dt">Inventory</span><span class="op">(</span><span class="va">parent</span><span class="op">,</span> <span class="va">initialOnHand</span><span class="op">,</span> <span class="va">replenisher</span><span class="op">,</span> <span class="va">name</span><span class="op">){</span></span>
<span id="cb207-9"><a href="examples-of-advanced-event-models.html#cb207-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-10"><a href="examples-of-advanced-event-models.html#cb207-10" aria-hidden="true" tabindex="-1"></a>    init <span class="op">{</span></span>
<span id="cb207-11"><a href="examples-of-advanced-event-models.html#cb207-11" aria-hidden="true" tabindex="-1"></a>        require<span class="op">(</span>reOrderQuantity <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span><span class="st">&quot;The reorder quantity must be &gt; 0&quot;</span><span class="op">}</span></span>
<span id="cb207-12"><a href="examples-of-advanced-event-models.html#cb207-12" aria-hidden="true" tabindex="-1"></a>        require<span class="op">(</span>reOrderPoint <span class="op">&gt;=</span> <span class="op">-</span>reOrderQuantity<span class="op">){</span><span class="st">&quot;reorder point (</span><span class="ss">$reOrderPoint</span><span class="st">) must be &gt;= - reorder quantity (</span><span class="ss">$reOrderQuantity</span><span class="st">)&quot;</span><span class="op">}</span></span>
<span id="cb207-13"><a href="examples-of-advanced-event-models.html#cb207-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb207-14"><a href="examples-of-advanced-event-models.html#cb207-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-15"><a href="examples-of-advanced-event-models.html#cb207-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">var</span> <span class="va">myInitialReorderPt</span> <span class="op">=</span> reOrderPoint</span>
<span id="cb207-16"><a href="examples-of-advanced-event-models.html#cb207-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-17"><a href="examples-of-advanced-event-models.html#cb207-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">var</span> <span class="va">myInitialReorderQty</span> <span class="op">=</span> reOrderQuantity</span>
<span id="cb207-18"><a href="examples-of-advanced-event-models.html#cb207-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-19"><a href="examples-of-advanced-event-models.html#cb207-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">var</span> <span class="va">myReorderPt</span> <span class="op">=</span> myInitialReorderPt</span>
<span id="cb207-20"><a href="examples-of-advanced-event-models.html#cb207-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-21"><a href="examples-of-advanced-event-models.html#cb207-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">var</span> <span class="va">myReorderQty</span> <span class="op">=</span> myInitialReorderQty</span>
<span id="cb207-22"><a href="examples-of-advanced-event-models.html#cb207-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-23"><a href="examples-of-advanced-event-models.html#cb207-23" aria-hidden="true" tabindex="-1"></a>    <span class="kw">fun</span> <span class="fu">setInitialPolicyParameters</span><span class="op">(</span><span class="va">reorderPt</span><span class="op">:</span> <span class="dt">Int</span> <span class="op">=</span> myInitialReorderPt<span class="op">,</span> <span class="va">reorderQty</span><span class="op">:</span> <span class="dt">Int</span> <span class="op">=</span> myInitialReorderQty<span class="op">)</span> <span class="op">{</span></span>
<span id="cb207-24"><a href="examples-of-advanced-event-models.html#cb207-24" aria-hidden="true" tabindex="-1"></a>        require<span class="op">(</span>reorderQty <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> <span class="st">&quot;reorder quantity must be &gt; 0&quot;</span> <span class="op">}</span></span>
<span id="cb207-25"><a href="examples-of-advanced-event-models.html#cb207-25" aria-hidden="true" tabindex="-1"></a>        require<span class="op">(</span>reorderPt <span class="op">&gt;=</span> <span class="op">-</span>reorderQty<span class="op">)</span> <span class="op">{</span> <span class="st">&quot;reorder point must be &gt;= - reorder quantity&quot;</span> <span class="op">}</span></span>
<span id="cb207-26"><a href="examples-of-advanced-event-models.html#cb207-26" aria-hidden="true" tabindex="-1"></a>        myInitialReorderPt <span class="op">=</span> reorderPt</span>
<span id="cb207-27"><a href="examples-of-advanced-event-models.html#cb207-27" aria-hidden="true" tabindex="-1"></a>        myInitialReorderQty <span class="op">=</span> reorderQty</span>
<span id="cb207-28"><a href="examples-of-advanced-event-models.html#cb207-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb207-29"><a href="examples-of-advanced-event-models.html#cb207-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-30"><a href="examples-of-advanced-event-models.html#cb207-30" aria-hidden="true" tabindex="-1"></a>    <span class="kw">override</span> <span class="kw">fun</span> <span class="fu">setInitialPolicyParameters</span><span class="op">(</span><span class="va">param</span><span class="op">:</span> <span class="dt">DoubleArray</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb207-31"><a href="examples-of-advanced-event-models.html#cb207-31" aria-hidden="true" tabindex="-1"></a>        require<span class="op">(</span>param<span class="op">.</span>size <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span> <span class="st">&quot;There must be 2 parameters&quot;</span> <span class="op">}</span></span>
<span id="cb207-32"><a href="examples-of-advanced-event-models.html#cb207-32" aria-hidden="true" tabindex="-1"></a>        setInitialPolicyParameters<span class="op">(</span>param<span class="op">[</span><span class="dv">0</span><span class="op">].</span>toInt<span class="op">(),</span> param<span class="op">[</span><span class="dv">1</span><span class="op">].</span>toInt<span class="op">())</span></span>
<span id="cb207-33"><a href="examples-of-advanced-event-models.html#cb207-33" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span></code></pre></div>
<p>Notice that the constructor for the class requires the reorder point and reorder quantity parameters and provides for the setting of the parameters. The class is a subclass of <code>Inventory,</code> which is a subclass of <code>ModelElement.</code> We need to have an <code>initialize()</code> method. Notice that the initialization resets the reorder point and reorder quantity and checks the inventory position. The check of the inventory position is required because the inventory on-hand at the start of the replication might trigger the need for a replenishment at time 0.0.</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb208-1"><a href="examples-of-advanced-event-models.html#cb208-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">override</span> <span class="kw">fun</span> <span class="fu">initialize</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb208-2"><a href="examples-of-advanced-event-models.html#cb208-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">super</span><span class="op">.</span>initialize<span class="op">()</span></span>
<span id="cb208-3"><a href="examples-of-advanced-event-models.html#cb208-3" aria-hidden="true" tabindex="-1"></a>        myReorderPt <span class="op">=</span> myInitialReorderPt</span>
<span id="cb208-4"><a href="examples-of-advanced-event-models.html#cb208-4" aria-hidden="true" tabindex="-1"></a>        myReorderQty <span class="op">=</span> myInitialReorderQty</span>
<span id="cb208-5"><a href="examples-of-advanced-event-models.html#cb208-5" aria-hidden="true" tabindex="-1"></a>        checkInventoryPosition<span class="op">()</span></span>
<span id="cb208-6"><a href="examples-of-advanced-event-models.html#cb208-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span></code></pre></div>
<p>To fill the inventory, we simply need to check if the amount on hand is sufficient, if so, the amount if filled, if not the amount to back order is determined. Because the filling of demand or the back ordering of demand may cause the change of the inventory position, the inventory position must be checked to see if a replenishment is required.</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb209-1"><a href="examples-of-advanced-event-models.html#cb209-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">override</span> <span class="kw">fun</span> <span class="fu">fillInventory</span><span class="op">(</span><span class="va">demand</span><span class="op">:</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb209-2"><a href="examples-of-advanced-event-models.html#cb209-2" aria-hidden="true" tabindex="-1"></a>        require<span class="op">(</span>demand <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> <span class="st">&quot;arriving demand must be &gt; 0&quot;</span> <span class="op">}</span></span>
<span id="cb209-3"><a href="examples-of-advanced-event-models.html#cb209-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>onHand <span class="op">&gt;=</span> demand<span class="op">)</span> <span class="op">{</span> <span class="co">// fully filled</span></span>
<span id="cb209-4"><a href="examples-of-advanced-event-models.html#cb209-4" aria-hidden="true" tabindex="-1"></a>            fillDemand<span class="op">(</span>demand<span class="op">)</span></span>
<span id="cb209-5"><a href="examples-of-advanced-event-models.html#cb209-5" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span> <span class="co">// some is back ordered</span></span>
<span id="cb209-6"><a href="examples-of-advanced-event-models.html#cb209-6" aria-hidden="true" tabindex="-1"></a>            backOrderDemand<span class="op">(</span>demand<span class="op">)</span></span>
<span id="cb209-7"><a href="examples-of-advanced-event-models.html#cb209-7" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb209-8"><a href="examples-of-advanced-event-models.html#cb209-8" aria-hidden="true" tabindex="-1"></a>        checkInventoryPosition<span class="op">()</span></span>
<span id="cb209-9"><a href="examples-of-advanced-event-models.html#cb209-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span></code></pre></div>
<p>The check of the inventory position for a <span class="math inline">\((r, q)\)</span> inventory policy checks to see if the inventory position has falled below the reorder point, <span class="math inline">\(r\)</span>, and if so, an order must be placed. Because the amount below the reorder point may be large due to random demand, batch multiples of the reorder quantity may be required to be ordered in order to get above the reorder position.</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb210-1"><a href="examples-of-advanced-event-models.html#cb210-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">override</span> <span class="kw">fun</span> <span class="fu">checkInventoryPosition</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb210-2"><a href="examples-of-advanced-event-models.html#cb210-2" aria-hidden="true" tabindex="-1"></a>         <span class="cf">if</span> <span class="op">(</span>inventoryPosition <span class="op">&lt;=</span> myReorderPt<span class="op">)</span> <span class="op">{</span></span>
<span id="cb210-3"><a href="examples-of-advanced-event-models.html#cb210-3" aria-hidden="true" tabindex="-1"></a>            <span class="co">// determine the amount to order and request the replenishment</span></span>
<span id="cb210-4"><a href="examples-of-advanced-event-models.html#cb210-4" aria-hidden="true" tabindex="-1"></a>            <span class="co">// need to place an order, figure out the amount below reorder point</span></span>
<span id="cb210-5"><a href="examples-of-advanced-event-models.html#cb210-5" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>inventoryPosition <span class="op">==</span> myReorderPt<span class="op">)</span> <span class="op">{</span> <span class="co">// hit reorder point exactly</span></span>
<span id="cb210-6"><a href="examples-of-advanced-event-models.html#cb210-6" aria-hidden="true" tabindex="-1"></a>                requestReplenishment<span class="op">(</span>myReorderQty<span class="op">)</span></span>
<span id="cb210-7"><a href="examples-of-advanced-event-models.html#cb210-7" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb210-8"><a href="examples-of-advanced-event-models.html#cb210-8" aria-hidden="true" tabindex="-1"></a>                <span class="kw">val</span> <span class="va">gap</span> <span class="op">=</span> <span class="op">(</span>myReorderPt <span class="op">-</span> inventoryPosition<span class="op">).</span>toDouble<span class="op">()</span></span>
<span id="cb210-9"><a href="examples-of-advanced-event-models.html#cb210-9" aria-hidden="true" tabindex="-1"></a>                <span class="co">// find number of batches to order</span></span>
<span id="cb210-10"><a href="examples-of-advanced-event-models.html#cb210-10" aria-hidden="true" tabindex="-1"></a>                <span class="kw">val</span> <span class="va">n</span> <span class="op">=</span> ceil<span class="op">(</span>gap <span class="op">/</span> myReorderQty<span class="op">).</span>toInt<span class="op">()</span></span>
<span id="cb210-11"><a href="examples-of-advanced-event-models.html#cb210-11" aria-hidden="true" tabindex="-1"></a>                requestReplenishment<span class="op">(</span>n <span class="op">*</span> myReorderQty<span class="op">)</span></span>
<span id="cb210-12"><a href="examples-of-advanced-event-models.html#cb210-12" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb210-13"><a href="examples-of-advanced-event-models.html#cb210-13" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb210-14"><a href="examples-of-advanced-event-models.html#cb210-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span></code></pre></div>
<p>The <code>requestReplenishment</code> method is used to place the order. When the replenishment order arrives, we must increase the amount on-hand, decrease the amount ordered, and process any back ordered demand.</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb211-1"><a href="examples-of-advanced-event-models.html#cb211-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">override</span> <span class="kw">fun</span> <span class="fu">replenishmentArrival</span><span class="op">(</span><span class="va">orderAmount</span><span class="op">:</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb211-2"><a href="examples-of-advanced-event-models.html#cb211-2" aria-hidden="true" tabindex="-1"></a>        myOnOrder<span class="op">.</span>decrement<span class="op">(</span>orderAmount<span class="op">.</span>toDouble<span class="op">())</span></span>
<span id="cb211-3"><a href="examples-of-advanced-event-models.html#cb211-3" aria-hidden="true" tabindex="-1"></a>        myOnHand<span class="op">.</span>increment<span class="op">(</span>orderAmount<span class="op">.</span>toDouble<span class="op">())</span></span>
<span id="cb211-4"><a href="examples-of-advanced-event-models.html#cb211-4" aria-hidden="true" tabindex="-1"></a>        <span class="co">// need to fill any back orders</span></span>
<span id="cb211-5"><a href="examples-of-advanced-event-models.html#cb211-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>amountBackOrdered <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> <span class="co">// back orders to fill</span></span>
<span id="cb211-6"><a href="examples-of-advanced-event-models.html#cb211-6" aria-hidden="true" tabindex="-1"></a>            fillBackOrders<span class="op">()</span></span>
<span id="cb211-7"><a href="examples-of-advanced-event-models.html#cb211-7" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb211-8"><a href="examples-of-advanced-event-models.html#cb211-8" aria-hidden="true" tabindex="-1"></a>        checkInventoryPosition<span class="op">()</span></span>
<span id="cb211-9"><a href="examples-of-advanced-event-models.html#cb211-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span></code></pre></div>
<p>Now we are ready to model the inventory situation described in the problem. In the following code, we encapsulate the problem within a class called <code>RQInventorySystem.</code> The key aspects of this model are the use of an event generator to generate the demand and the use of an inner class to provide a warehouse to fill the replenishment orders.</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb212-1"><a href="examples-of-advanced-event-models.html#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> RQInventorySystem<span class="op">(</span></span>
<span id="cb212-2"><a href="examples-of-advanced-event-models.html#cb212-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">parent</span><span class="op">:</span> <span class="dt">ModelElement</span><span class="op">,</span></span>
<span id="cb212-3"><a href="examples-of-advanced-event-models.html#cb212-3" aria-hidden="true" tabindex="-1"></a>    <span class="va">reorderPt</span><span class="op">:</span> <span class="dt">Int</span> <span class="op">=</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb212-4"><a href="examples-of-advanced-event-models.html#cb212-4" aria-hidden="true" tabindex="-1"></a>    <span class="va">reorderQty</span><span class="op">:</span> <span class="dt">Int</span> <span class="op">=</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb212-5"><a href="examples-of-advanced-event-models.html#cb212-5" aria-hidden="true" tabindex="-1"></a>    <span class="va">name</span><span class="op">:</span> <span class="dt">String</span><span class="op">?</span> <span class="op">=</span> null</span>
<span id="cb212-6"><a href="examples-of-advanced-event-models.html#cb212-6" aria-hidden="true" tabindex="-1"></a><span class="op">)</span> <span class="op">:</span> <span class="dt">ModelElement</span><span class="op">(</span><span class="va">parent</span><span class="op">,</span> <span class="va">name</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb212-7"><a href="examples-of-advanced-event-models.html#cb212-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-8"><a href="examples-of-advanced-event-models.html#cb212-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">var</span> <span class="va">leadTimeRV</span> <span class="op">=</span> RandomVariable<span class="op">(</span><span class="kw">this</span><span class="op">,</span> ConstantRV<span class="op">(</span><span class="fl">10.0</span><span class="op">))</span></span>
<span id="cb212-9"><a href="examples-of-advanced-event-models.html#cb212-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">val</span> <span class="va">leadTime</span><span class="op">:</span> RandomSourceCIfc</span>
<span id="cb212-10"><a href="examples-of-advanced-event-models.html#cb212-10" aria-hidden="true" tabindex="-1"></a>        <span class="kw">get</span><span class="op">()</span> <span class="op">=</span> leadTimeRV</span>
<span id="cb212-11"><a href="examples-of-advanced-event-models.html#cb212-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-12"><a href="examples-of-advanced-event-models.html#cb212-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">var</span> <span class="va">timeBetweenDemand</span><span class="op">:</span> RandomVariable <span class="op">=</span> RandomVariable<span class="op">(</span>parent<span class="op">,</span> ExponentialRV<span class="op">(</span><span class="fl">365.0</span> <span class="op">/</span> <span class="fl">14.0</span><span class="op">))</span></span>
<span id="cb212-13"><a href="examples-of-advanced-event-models.html#cb212-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">val</span> <span class="va">timeBetweenDemandRV</span><span class="op">:</span> RandomSourceCIfc</span>
<span id="cb212-14"><a href="examples-of-advanced-event-models.html#cb212-14" aria-hidden="true" tabindex="-1"></a>        <span class="kw">get</span><span class="op">()</span> <span class="op">=</span> timeBetweenDemand</span>
<span id="cb212-15"><a href="examples-of-advanced-event-models.html#cb212-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-16"><a href="examples-of-advanced-event-models.html#cb212-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">demandGenerator</span> <span class="op">=</span> EventGenerator<span class="op">(</span><span class="kw">this</span><span class="op">,</span> <span class="kw">this</span><span class="op">::</span>sendDemand<span class="op">,</span> timeBetweenDemand<span class="op">,</span> timeBetweenDemand<span class="op">)</span></span>
<span id="cb212-17"><a href="examples-of-advanced-event-models.html#cb212-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-18"><a href="examples-of-advanced-event-models.html#cb212-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">val</span> <span class="va">inventory</span><span class="op">:</span> RQInventory <span class="op">=</span> RQInventory<span class="op">(</span></span>
<span id="cb212-19"><a href="examples-of-advanced-event-models.html#cb212-19" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">,</span> reorderPt<span class="op">,</span> reorderQty<span class="op">,</span> replenisher <span class="op">=</span> Warehouse<span class="op">(),</span> name <span class="op">=</span> <span class="st">&quot;Item&quot;</span></span>
<span id="cb212-20"><a href="examples-of-advanced-event-models.html#cb212-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">)</span></span>
<span id="cb212-21"><a href="examples-of-advanced-event-models.html#cb212-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-22"><a href="examples-of-advanced-event-models.html#cb212-22" aria-hidden="true" tabindex="-1"></a>    <span class="kw">fun</span> <span class="fu">setInitialOnHand</span><span class="op">(</span><span class="va">amount</span><span class="op">:</span> <span class="dt">Int</span><span class="op">){</span></span>
<span id="cb212-23"><a href="examples-of-advanced-event-models.html#cb212-23" aria-hidden="true" tabindex="-1"></a>        inventory<span class="op">.</span>setInitialOnHand<span class="op">(</span>amount<span class="op">)</span></span>
<span id="cb212-24"><a href="examples-of-advanced-event-models.html#cb212-24" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb212-25"><a href="examples-of-advanced-event-models.html#cb212-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-26"><a href="examples-of-advanced-event-models.html#cb212-26" aria-hidden="true" tabindex="-1"></a>    <span class="kw">fun</span> <span class="fu">setInitialPolicyParameters</span><span class="op">(</span><span class="va">reorderPt</span><span class="op">:</span> <span class="dt">Int</span><span class="op">,</span> <span class="va">reorderQty</span><span class="op">:</span> <span class="dt">Int</span><span class="op">){</span></span>
<span id="cb212-27"><a href="examples-of-advanced-event-models.html#cb212-27" aria-hidden="true" tabindex="-1"></a>        inventory<span class="op">.</span>setInitialPolicyParameters<span class="op">(</span>reorderPt<span class="op">,</span> reorderQty<span class="op">)</span></span>
<span id="cb212-28"><a href="examples-of-advanced-event-models.html#cb212-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb212-29"><a href="examples-of-advanced-event-models.html#cb212-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-30"><a href="examples-of-advanced-event-models.html#cb212-30" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">fun</span> <span class="fu">sendDemand</span><span class="op">(</span><span class="va">generator</span><span class="op">:</span> <span class="dt">EventGenerator</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb212-31"><a href="examples-of-advanced-event-models.html#cb212-31" aria-hidden="true" tabindex="-1"></a>        inventory<span class="op">.</span>fillInventory<span class="op">(</span><span class="dv">1</span><span class="op">)</span></span>
<span id="cb212-32"><a href="examples-of-advanced-event-models.html#cb212-32" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb212-33"><a href="examples-of-advanced-event-models.html#cb212-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-34"><a href="examples-of-advanced-event-models.html#cb212-34" aria-hidden="true" tabindex="-1"></a>    inner <span class="kw">class</span> Warehouse <span class="op">:</span> <span class="dt">InventoryFillerIfc</span> <span class="op">{</span></span>
<span id="cb212-35"><a href="examples-of-advanced-event-models.html#cb212-35" aria-hidden="true" tabindex="-1"></a>        <span class="kw">override</span> <span class="kw">fun</span> <span class="fu">fillInventory</span><span class="op">(</span><span class="va">demand</span><span class="op">:</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb212-36"><a href="examples-of-advanced-event-models.html#cb212-36" aria-hidden="true" tabindex="-1"></a>            schedule<span class="op">(</span><span class="kw">this</span><span class="op">::</span>endLeadTimeAction<span class="op">,</span> leadTimeRV<span class="op">,</span> message <span class="op">=</span> demand<span class="op">)</span></span>
<span id="cb212-37"><a href="examples-of-advanced-event-models.html#cb212-37" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb212-38"><a href="examples-of-advanced-event-models.html#cb212-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-39"><a href="examples-of-advanced-event-models.html#cb212-39" aria-hidden="true" tabindex="-1"></a>        <span class="kw">private</span> <span class="kw">fun</span> <span class="fu">endLeadTimeAction</span><span class="op">(</span><span class="va">event</span><span class="op">:</span> <span class="dt">KSLEvent</span>&lt;<span class="va">Int</span>&gt;<span class="op">)</span> <span class="op">{</span></span>
<span id="cb212-40"><a href="examples-of-advanced-event-models.html#cb212-40" aria-hidden="true" tabindex="-1"></a>            inventory<span class="op">.</span>replenishmentArrival<span class="op">(</span>event<span class="op">.</span>message<span class="op">!!)</span></span>
<span id="cb212-41"><a href="examples-of-advanced-event-models.html#cb212-41" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb212-42"><a href="examples-of-advanced-event-models.html#cb212-42" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb212-43"><a href="examples-of-advanced-event-models.html#cb212-43" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>The implementation of the warehouse simply schedules a delay to represent the lead time and then calls the inventory with the amount of the replenishment after the lead time interval. In this implementation, we assume that the demand occurs in units of one. The exercises will ask the reader to generalize on this situation. Finally, we create an instance that represents the problem and perform the simulation.</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode kt"><code class="sourceCode kotlin"><span id="cb213-1"><a href="examples-of-advanced-event-models.html#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="kw">fun</span> <span class="fu">main</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb213-2"><a href="examples-of-advanced-event-models.html#cb213-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">val</span> <span class="va">m</span> <span class="op">=</span> Model<span class="op">()</span></span>
<span id="cb213-3"><a href="examples-of-advanced-event-models.html#cb213-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">val</span> <span class="va">reorderPoint</span> <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb213-4"><a href="examples-of-advanced-event-models.html#cb213-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">val</span> <span class="va">reorderQty</span> <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb213-5"><a href="examples-of-advanced-event-models.html#cb213-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">val</span> <span class="va">rqModel</span> <span class="op">=</span> RQInventorySystem<span class="op">(</span>m<span class="op">,</span> reorderPoint<span class="op">,</span> reorderQty<span class="op">,</span> <span class="st">&quot;RQ Inventory Model&quot;</span><span class="op">)</span></span>
<span id="cb213-6"><a href="examples-of-advanced-event-models.html#cb213-6" aria-hidden="true" tabindex="-1"></a>    rqModel<span class="op">.</span>setInitialOnHand<span class="op">(</span><span class="dv">0</span><span class="op">)</span></span>
<span id="cb213-7"><a href="examples-of-advanced-event-models.html#cb213-7" aria-hidden="true" tabindex="-1"></a>    rqModel<span class="op">.</span>timeBetweenDemandRV<span class="op">.</span>initialRandomSource <span class="op">=</span> ExponentialRV<span class="op">(</span><span class="fl">1.0</span> <span class="op">/</span> <span class="fl">3.6</span><span class="op">)</span></span>
<span id="cb213-8"><a href="examples-of-advanced-event-models.html#cb213-8" aria-hidden="true" tabindex="-1"></a>    rqModel<span class="op">.</span>leadTime<span class="op">.</span>initialRandomSource <span class="op">=</span> ConstantRV<span class="op">(</span><span class="fl">0.5</span><span class="op">)</span></span>
<span id="cb213-9"><a href="examples-of-advanced-event-models.html#cb213-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb213-10"><a href="examples-of-advanced-event-models.html#cb213-10" aria-hidden="true" tabindex="-1"></a>    m<span class="op">.</span>lengthOfReplication <span class="op">=</span> <span class="fl">110000.0</span></span>
<span id="cb213-11"><a href="examples-of-advanced-event-models.html#cb213-11" aria-hidden="true" tabindex="-1"></a>    m<span class="op">.</span>lengthOfReplicationWarmUp <span class="op">=</span> <span class="fl">10000.0</span></span>
<span id="cb213-12"><a href="examples-of-advanced-event-models.html#cb213-12" aria-hidden="true" tabindex="-1"></a>    m<span class="op">.</span>numberOfReplications <span class="op">=</span> <span class="dv">40</span></span>
<span id="cb213-13"><a href="examples-of-advanced-event-models.html#cb213-13" aria-hidden="true" tabindex="-1"></a>    m<span class="op">.</span>simulate<span class="op">()</span></span>
<span id="cb213-14"><a href="examples-of-advanced-event-models.html#cb213-14" aria-hidden="true" tabindex="-1"></a>    m<span class="op">.</span>print<span class="op">()</span></span>
<span id="cb213-15"><a href="examples-of-advanced-event-models.html#cb213-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">val</span> <span class="va">r</span> <span class="op">=</span> m<span class="op">.</span>simulationReporter</span>
<span id="cb213-16"><a href="examples-of-advanced-event-models.html#cb213-16" aria-hidden="true" tabindex="-1"></a>    r<span class="op">.</span>writeHalfWidthSummaryReportAsMarkDown<span class="op">(</span>KSL<span class="op">.</span><span class="kw">out</span><span class="op">,</span> df <span class="op">=</span> MarkDown<span class="op">.</span>D3FORMAT<span class="op">)</span></span>
<span id="cb213-17"><a href="examples-of-advanced-event-models.html#cb213-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>The results for this simulation match the theoretical expected analytical results for this situation.</p>
<p><strong>Inventory Model Statistical Summary Report</strong></p>
<table>
<thead>
<tr class="header">
<th align="center">Name</th>
<th align="center">Count</th>
<th align="center">Average</th>
<th align="center">Half-Width</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Item:AmountBackOrdered</td>
<td align="center">40</td>
<td align="center">0.294</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">Item:OnOrder</td>
<td align="center">40</td>
<td align="center">1.8</td>
<td align="center">0.001</td>
</tr>
<tr class="odd">
<td align="center">Item:OnHand</td>
<td align="center">40</td>
<td align="center">0.993</td>
<td align="center">0.001</td>
</tr>
<tr class="even">
<td align="center">Item:PTimeWithStockOnHand</td>
<td align="center">40</td>
<td align="center">0.536</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">Item:BackOrderQ:NumInQ</td>
<td align="center">40</td>
<td align="center">0.294</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">Item:BackOrderQ:TimeInQ</td>
<td align="center">40</td>
<td align="center">0.202</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">Item:FillRate</td>
<td align="center">40</td>
<td align="center">0.597</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<p>This example should give you a solid basis for developing more
sophisticated inventory models. While analytical results are available
for this example, small changes in the assumptions necessitate the need
for simulation. For example, what if the lead times are stochastic or
the demand is not in units of 1. In the latter case, the filling of the
back-order queue should be done in different ways. For example, suppose
customers wanting 5 and 3 items respectively were waiting in the queue.
Now suppose a replenishment of 4 items comes in. Do you give 4 units of
the item to the customer wanting 5 units (partial fill) or do you choose
the customer wanting 3 units and fill their entire back-order and give
only 1 unit to the customer wanting 5 units. The more realism needed,
the less analytical models can be applied, and the more simulation
becomes useful.</p>
</div>
</div>
<h3>References<a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-askin2002design" class="csl-entry">
Askin, R. G., and J. B. Goldberg. 2002. <em>Design and Analysis of Lean Production Systems</em>. John Wiley &amp; Sons.
</div>
<div id="ref-2006inventory" class="csl-entry">
AxsÃ¤ter, S. 2006. <em>Inventory Control</em>. Springer Science + Business Media.
</div>
<div id="ref-ballou2004business" class="csl-entry">
Ballou, R. H. 2004. <em>Business Logistics/Supply Chain Management: Planning, Organizing, and Controlling the Supply Chain</em>. 5th ed. Prentice-Hall.
</div>
<div id="ref-chopra2007supply" class="csl-entry">
Chopra, S., and Meindl. 2007. <em>Supply Chain Management: Strategy, Planning, and Operations</em>. 3rd ed. Prentice-Hall.
</div>
<div id="ref-hadley1963analysis" class="csl-entry">
Hadley, G., and T. M. Whitin. 1963. <em>Analysis of Inventory Systems</em>. Prentice Hall.
</div>
<div id="ref-nahmias2001production" class="csl-entry">
Nahmias, S. 2001. <em>Production and Operations Analysis</em>. 4th ed. McGraw-Hill.
</div>
<div id="ref-silver1998inventory" class="csl-entry">
Silver, E. A., D. F. Pyke, and R. Peterson. 1998. <em>Inventory Management and Production Planning and Scheduling</em>. 3rd ed. John Wiley &amp; Sons.
</div>
<div id="ref-zipkin2000foundations" class="csl-entry">
Zipkin, P. H. 2000. <em>Foundations of Inventory Management</em>. McGraw-Hill.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="modeling-non-stationary-systems.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="summary-3.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
